/*! #metadata# @jsc/nano: 3.1.4-8e4ce27f (2021-10-11T11:14:21+08:00) */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){function t(t){for(var r,a,s=t[0],u=t[1],l=t[3]||[],p=0,d=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t),l.forEach((function(e){if(void 0===n[e]){n[e]=null;var t=document.createElement("link");i.nc&&t.setAttribute("nonce",i.nc),t.rel="prefetch",t.as="script",t.href=o(e),document.head.appendChild(t)}}));d.length;)d.shift()()}var r={},n={8:0};function o(e){return i.p+"widgets/npd."+({0:"auxiliary-helper~default-helper",1:"vendors~auxiliary-helper~default-helper",2:"vendors~default-helper~lottie_light",3:"ace",4:"auxiliary-helper",5:"bas-danmaku",6:"combo-new",7:"common-helper",9:"dash-module",10:"default-helper",11:"flv-module",12:"homepage-helper",13:"vendors~default-helper"}[e]||e)+"."+{0:"fae7227e",1:"59d5f288",2:"adf70feb",3:"5fd94cfc",4:"8156ba95",5:"90896fed",6:"9bdcd85e",7:"5c710660",9:"480c5ada",10:"5f103359",11:"7b773b35",12:"08f50e41",13:"c65fb069"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,o){r=n[e]=[t,o]}));t.push(r[2]=a);var s=new Error;var u=function t(r,a){var u,c=document.createElement("script"),l="&retry-attempt="+(1-a+1);c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r,u=function(r){c.onerror=c.onload=null,clearTimeout(p);var i=n[e];if(0!==i)if(i)if(0===a){var u=r&&("load"===r.type?"missing":r.type),d=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed after 1 retries.\n("+u+": "+d+")",s.name="ChunkLoadError",s.type=u,s.request=d,i[1](s),n[e]=void 0}else{var f="cache-bust=true"+l,h=t(o(e)+"?"+f,a-1);document.head.appendChild(h)}else n[e]=void 0};var p=setTimeout((function(){u({type:"timeout",target:c})}),12e4);return c.onerror=c.onload=u,c}(o(e),1);document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://s1.hdslb.com/bfs/static/player/main/",i.oe=function(e){throw console.error(e),e};var a=window.nanoWidgetsJsonp=window.nanoWidgetsJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=s,l=i(i.s=268);return t([[],{},0,[2,1,13,0,10,7]]),l}([function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"i",(function(){return l})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return d})),r.d(t,"f",(function(){return f}));var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){
this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t,r,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function u(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function c(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function f(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}Object.create},function(e,t,r){"use strict";var n,o;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),function(e){e.Player_Navigate="Player_Navigate",e.Player_Committed="Player_Committed",e.Player_Prepared="Player_Prepared",e.Player_Enter_Loading="Player_Enter_Loading",e.Player_Leave_Loading="Player_Leave_Loading",e.Player_Initialized="Player_Initialized",e.Player_Connected="Player_Connected",e.Player_Show_EndPanel="Player_Show_EndPanel",e.Player_Hide_EndPanel="Player_Hide_EndPanel",e.Player_Show_Controls="Player_Show_Controls",e.Player_Hide_Controls="Player_Hide_Controls",e.Player_Dispose="Player_Dispose",e.Player_Disconnect="Player_Disconnect",e.Player_LoadStart="Player_LoadStart",e.Player_LoadedMetadata="Player_LoadedMetadata",e.Player_LoadedData="Player_LoadedData",e.Player_Canplay="Player_Canplay",e.Player_Play="Player_Play",e.Player_Pause="Player_Pause",e.Player_Waiting="Player_Waiting",e.Player_Playing="Player_Playing",e.Player_Seeking="Player_Seeking",e.Player_Seeked="Player_Seeked",e.Player_Stalled="Player_Stalled",e.Player_Progress="Player_Progress",e.Player_Suspend="Player_Suspend",e.Player_TimeUpdate="Player_TimeUpdate",e.Player_RateChange="Player_RateChange",e.Player_VolumeChange="Player_VolumeChange",
e.Player_DurationChange="Player_DurationChange",e.Player_Abort="Player_Abort",e.Player_Ended="Player_Ended",e.Player_Error="Player_Error",e.Player_Emptied="Player_Emptied",e.Player_LoopChange="Player_LoopChange",e.Player_MirrorChange="Player_MirrorChange",e.Player_AspectRatioChange="Player_AspectRatioChange",e.Player_LightOffChange="Player_LightOffChange",e.Player_BlackGapChange="Player_BlackGapChange",e.Player_AutoplayChange="Player_AutoplayChange",e.Player_HandoffChange="Player_HandoffChange",e.Player_PreferCodecChange="Player_PreferCodecChange",e.Player_Loop_Signal="Player_Loop_Signal",e.Player_Handoff_Signal="Player_Handoff_Signal",e.Player_Internal_Signal="Player_Internal_Signal",e.Player_Perch_Click="Player_Perch_Click",e.Player_Submit_Feedback="Player_Submit_Feedback",e.Player_Danmaku_Change="Player_Danmaku_Change",e.Player_Hotspot_Change="Player_Hotspot_Change",e.Player_SharePanel_Change="Player_SharePanel_Change",e.Player_ProgressBar_Change="Player_ProgressBar_Change",e.Player_Screen_Changed="Player_Screen_Changed",e.Player_Access_Changed="Player_Access_Changed",e.Player_Quality_Changed="Player_Quality_Changed",e.Player_Container_Resize="Player_Container_Resize",e.Media_Element_Resize="Media_Element_Resize",e.Media_Autoplay_Not_Allowed="Media_Autoplay_Not_Allowed"}(n||(n={})),function(e){e.PLAYER_GRAPH_FLATTEN="PLAYER_GRAPH_FLATTEN",e.PLAYER_STORAGE_BUILD="PLAYER_STORAGE_BUILD",e.PLAYER_STATE_CREATE="PLAYER_STATE_CREATE",e.PLAYER_STATE_CREATED="PLAYER_STATE_CREATED",e.PLAYER_STORE_MOUNT="PLAYER_STORE_MOUNT",e.PLAYER_STORE_MOUNTED="PLAYER_STORE_MOUNTED",e.PLAYER_USER_LOADED="PLAYER_USER_LOADED",e.PLAYER_BEFORE_SEEKING="PLAYER_BEFORE_SEEKING",e.PLAYER_PLAYBACK_LAG="PLAYER_PLAYBACK_LAG",e.PLAYER_BEFORE_QUIT="PLAYER_BEFORE_QUIT",e.PLAYER_QUIT_SIGNAL="PLAYER_QUIT_SIGNAL",e.MEDIA_LOADSTART="MEDIA_LOADSTART",e.MEDIA_LOADEDMETADATA="MEDIA_LOADEDMETADATA",e.MEDIA_LOADEDDATA="MEDIA_LOADEDDATA",e.MEDIA_CANPLAY="MEDIA_CANPLAY",e.MEDIA_PLAY="MEDIA_PLAY",e.MEDIA_PAUSE="MEDIA_PAUSE",e.MEDIA_WAITING="MEDIA_WAITING",e.MEDIA_PLAYING="MEDIA_PLAYING",e.MEDIA_SEEKING="MEDIA_SEEKING",e.MEDIA_SEEKED="MEDIA_SEEKED",e.MEDIA_STALLED="MEDIA_STALLED",e.MEDIA_PROGRESS="MEDIA_PROGRESS",e.MEDIA_SUSPEND="MEDIA_SUSPEND",e.MEDIA_TIMEUPDATE="MEDIA_TIMEUPDATE",e.MEDIA_RATECHANGE="MEDIA_RATECHANGE",e.MEDIA_VOLUMECHANGE="MEDIA_VOLUMECHANGE",e.MEDIA_DURATIONCHANGE="MEDIA_DURATIONCHANGE",e.MEDIA_ABORT="MEDIA_ABORT",e.MEDIA_ENDED="MEDIA_ENDED",e.MEDIA_EMPTIED="MEDIA_EMPTIED",e.MEDIA_ERROR="MEDIA_ERROR",e.ERROR_DASH_INITIALIZE="ERROR_DASH_INITIALIZE",e.ERROR_DASH_KERNEL="ERROR_DASH_KERNEL",e.ERROR_FLV_KERNEL="ERROR_FLV_KERNEL",e.ERROR_PLAY_URL="ERROR_PLAY_URL",e.ERROR_CODE_SIGNAL="ERROR_CODE_SIGNAL"}(o||(o={}))},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",(function(){return Zt})),r.d(t,"b",(function(){return it})),r.d(t,"c",(function(){return ut})),r.d(t,"d",(function(){return C})),r.d(t,"e",(function(){return ce})),r.d(t,"f",(function(){return yt})),r.d(t,"g",(function(){return ne})),r.d(t,"h",(function(){return dt})),r.d(t,"i",(function(){return pt})),r.d(t,"j",(function(){return at})),r.d(t,"k",(function(){return Pt})),r.d(t,"l",(function(){return jt}));var o=[];Object.freeze(o);var i={};Object.freeze(i);var a={};function s(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:a}function u(){return++Ne.mobxGuid}function c(e){throw l(!1,e),"X"}function l(e,t){if(!e)throw new Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is an production build."))}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var d=function(){};function f(e){return null!==e&&"object"===n(e)}function h(e){if(null===e||"object"!==n(e))return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function y(e,t,r){
Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function m(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function v(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return f(e)&&!0===e[r]}}function b(e){return void 0!==s().Map&&e instanceof s().Map}function g(e){return e instanceof Set}function S(e){for(var t=[];;){var r=e.next();if(r.done)break;t.push(r.value)}return t}function E(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function O(e){return null===e?null:"object"===n(e)?""+e:e}function w(e,t){for(var r=e.next();!r.done;)t(r.value),r=e.next()}function _(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function P(e,t){m(e,_(),t)}function k(e){return e[_()]=j,e}function x(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function j(){return this}var A=function(){function e(e){void 0===e&&(e="Atom@"+u()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ie.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return He(this)},e.prototype.reportChanged=function(){Fe(),function(e){if(e.lowestObserverState===ie.STALE)return;e.lowestObserverState=ie.STALE;var t=e.observers,r=t.length;for(;r--;){var n=t[r];n.dependenciesState===ie.UP_TO_DATE&&(n.isTracing!==ae.NONE&&qe(n,e),n.onBecomeStale()),n.dependenciesState=ie.STALE}}(this),Ve()},e.prototype.toString=function(){return this.name},e}(),T=v("Atom",A);function D(e,t,r){void 0===t&&(t=d),void 0===r&&(r=d);var n=new A(e);return dt(n,t),ft(n,r),n}function L(e,t){return e===t}var C={identity:L,structural:function(e,t){return mr(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||L(e,t)},shallow:function(e,t){return mr(e,t,1)}},R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function I(e,t){function r(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var N=function(){return(N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function M(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function U(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M(arguments[t]));return e}var B={},F={};function V(e,t){var r=t?B:F;return r[e]||(r[e]={configurable:!0,enumerable:t,get:function(){return H(this),this[e]},set:function(t){H(this),this[e]=t}})}function H(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var r in y(e,"__mobxDidRunLazyInitializers",!0),t){var n=t[r];n.propertyCreator(e,n.prop,n.descriptor,n.decoratorTarget,n.decoratorArguments)}}}function q(e,t){return function(){var r,n=function(n,o,i,a){if(!0===a)return t(n,o,i,n,r),null;if(!Object.prototype.hasOwnProperty.call(n,"__mobxDecorators")){var s=n.__mobxDecorators;y(n,"__mobxDecorators",N({},s))}return n.__mobxDecorators[o]={prop:o,propertyCreator:t,descriptor:i,decoratorTarget:n,decoratorArguments:r},V(o,e)};return z(arguments)?(r=o,n.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),n)}}function z(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function G(e,t,r){return St(e)?e:Array.isArray(e)?ne.array(e,{name:r}):h(e)?ne.object(e,void 0,{name:r}):b(e)?ne.map(e,{name:r}):g(e)?ne.set(e,{name:r}):e}function K(e){return e}function W(e){l(e);var t=q(!0,(function(t,r,n,o,i){
sr(t,r,n?n.initializer?n.initializer.call(t):n.value:void 0,e)})),r=("undefined"!=typeof process&&process.env,t);return r.enhancer=e,r}var Q={deep:!0,name:void 0,defaultDecorator:void 0},$={deep:!1,name:void 0,defaultDecorator:void 0};function Y(e){return null==e?Q:"string"==typeof e?{name:e,deep:!0}:e}function J(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?K:G}Object.freeze(Q),Object.freeze($);var X=W(G),Z=W((function(e,t,r){return null==e||dr(e)||Jt(e)||tr(e)||or(e)?e:Array.isArray(e)?ne.array(e,{name:r,deep:!1}):h(e)?ne.object(e,void 0,{name:r,deep:!1}):b(e)?ne.map(e,{name:r,deep:!1}):g(e)?ne.set(e,{name:r,deep:!1}):c(!1)})),ee=W(K),te=W((function(e,t,r){return mr(e,t)?t:e}));var re={box:function(e,t){arguments.length>2&&oe("box");var r=Y(t);return new Ae(e,J(r),r.name,!0,r.equals)},shallowBox:function(e,t){return arguments.length>2&&oe("shallowBox"),ne.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&oe("array");var r=Y(t);return new Gt(e,J(r),r.name)},shallowArray:function(e,t){return arguments.length>2&&oe("shallowArray"),ne.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&oe("map");var r=Y(t);return new Zt(e,J(r),r.name)},shallowMap:function(e,t){return arguments.length>2&&oe("shallowMap"),ne.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&oe("set");var r=Y(t);return new nr(e,J(r),r.name)},object:function(e,t,r){"string"==typeof arguments[1]&&oe("object");var n=Y(r);return mt({},e,t,n)},shallowObject:function(e,t){return"string"==typeof arguments[1]&&oe("shallowObject"),ne.object(e,{},{name:t,deep:!1})},ref:ee,shallow:Z,deep:X,struct:te},ne=function(e,t,r){if("string"==typeof arguments[1])return X.apply(null,arguments);if(St(e))return e;var n=h(e)?ne.object(e,t,r):Array.isArray(e)?ne.array(e,t):b(e)?ne.map(e,t):g(e)?ne.set(e,t):e;if(n!==e)return n;c(!1)};function oe(e){c("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(re).forEach((function(e){return ne[e]=re[e]}));var ie,ae,se=q(!1,(function(e,t,r,n,o){var i=r.get,a=r.set,s=o[0]||{};!function(e,t,r){var n=ar(e);r.name=n.name+"."+t,r.context=e,n.values[t]=new De(r),Object.defineProperty(e,t,function(e){return cr[e]||(cr[e]={configurable:Ne.computedConfigurable,enumerable:!1,get:function(){return lr(this).read(this,e)},set:function(t){lr(this).write(this,e,t)}})}(t))}(e,t,N({get:i,set:a},s))})),ue=se({equals:C.structural}),ce=function(e,t,r){if("string"==typeof t)return se.apply(null,arguments);if(null!==e&&"object"===n(e)&&1===arguments.length)return se.apply(null,arguments);var o="object"===n(t)?t:{};return o.get=e,o.set="function"==typeof t?t:o.set,o.name=o.name||e.name||"",new De(o)};ce.struct=ue,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(ie||(ie={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ae||(ae={}));var le=function(e){this.cause=e};function pe(e){return e instanceof le}function de(e){switch(e.dependenciesState){case ie.UP_TO_DATE:return!1;case ie.NOT_TRACKING:case ie.STALE:return!0;case ie.POSSIBLY_STALE:for(var t=ge(!0),r=ve(),n=e.observing,o=n.length,i=0;i<o;i++){var a=n[i];if(Le(a)){if(Ne.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return be(r),Se(t),!0}if(e.dependenciesState===ie.STALE)return be(r),Se(t),!0}}return Ee(e),be(r),Se(t),!1}}function fe(e){var t=e.observers.length>0;Ne.computationDepth>0&&t&&c(!1),Ne.allowStateChanges||!t&&"strict"!==Ne.enforceActions||c(!1)}function he(e,t,r){var n=ge(!0);Ee(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Ne.runId;var o,i=Ne.trackingDerivation;if(Ne.trackingDerivation=e,!0===Ne.disableErrorBoundaries)o=t.call(r);else try{o=t.call(r)}catch(e){o=new le(e)}return Ne.trackingDerivation=i,function(e){for(var t=e.observing,r=e.observing=e.newObserving,n=ie.UP_TO_DATE,o=0,i=e.unboundDepsCount,a=0;a<i;a++){0===(s=r[a]).diffValue&&(s.diffValue=1,o!==a&&(r[o]=s),o++),
s.dependenciesState>n&&(n=s.dependenciesState)}r.length=o,e.newObserving=null,i=t.length;for(;i--;){0===(s=t[i]).diffValue&&Ue(s,e),s.diffValue=0}for(;o--;){var s;1===(s=r[o]).diffValue&&(s.diffValue=0,Me(s,e))}n!==ie.UP_TO_DATE&&(e.dependenciesState=n,e.onBecomeStale())}(e),e.observing.length,Se(n),o}function ye(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)Ue(t[r],e);e.dependenciesState=ie.NOT_TRACKING}function me(e){var t=ve(),r=e();return be(t),r}function ve(){var e=Ne.trackingDerivation;return Ne.trackingDerivation=null,e}function be(e){Ne.trackingDerivation=e}function ge(e){var t=Ne.allowStateReads;return Ne.allowStateReads=e,t}function Se(e){Ne.allowStateReads=e}function Ee(e){if(e.dependenciesState!==ie.UP_TO_DATE){e.dependenciesState=ie.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=ie.UP_TO_DATE}}var Oe=0,we=1,_e=Object.getOwnPropertyDescriptor((function(){}),"name");_e&&_e.configurable;function Pe(e,t){var r=function(){return ke(e,t,this,arguments)};return r.isMobxAction=!0,r}function ke(e,t,r,n){var o=function(e,t,r){var n=Je()&&!!e,o=0;if(n){o=Date.now();var i=r&&r.length||0,a=new Array(i);if(i>0)for(var s=0;s<i;s++)a[s]=r[s];Ze({type:"action",name:e,object:t,arguments:a})}var u=ve();Fe();var c=xe(!0),l=ge(!0),p={prevDerivation:u,prevAllowStateChanges:c,prevAllowStateReads:l,notifySpy:n,startTime:o,actionId:we++,parentActionId:Oe};return Oe=p.actionId,p}(e,r,n);try{return t.apply(r,n)}catch(e){throw o.error=e,e}finally{!function(e){Oe!==e.actionId&&c("invalid action stack. did you forget to finish an action?");Oe=e.parentActionId,void 0!==e.error&&(Ne.suppressReactionErrors=!0);je(e.prevAllowStateChanges),Se(e.prevAllowStateReads),Ve(),be(e.prevDerivation),e.notifySpy&&tt({time:Date.now()-e.startTime});Ne.suppressReactionErrors=!1}(o)}}function xe(e){var t=Ne.allowStateChanges;return Ne.allowStateChanges=e,t}function je(e){Ne.allowStateChanges=e}var Ae=function(e){function t(t,r,n,o,i){void 0===n&&(n="ObservableValue@"+u()),void 0===o&&(o=!0),void 0===i&&(i=C.default);var a=e.call(this,n)||this;return a.enhancer=r,a.name=n,a.equals=i,a.hasUnreportedChange=!1,a.value=r(t,void 0,n),o&&Je()&&Xe({type:"create",name:a.name,newValue:""+a.value}),a}return I(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Ne.UNCHANGED){var r=Je();r&&Ze({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),r&&tt()}},t.prototype.prepareNewValue=function(e){if(fe(this),Dt(this)){var t=Ct(this,{object:this,type:"update",newValue:e});if(!t)return Ne.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Ne.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),Rt(this)&&Nt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return Lt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),It(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return O(this.get())},t}(A);Ae.prototype[E()]=Ae.prototype.valueOf;var Te=v("ObservableValue",Ae),De=function(){function e(e){this.dependenciesState=ie.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ie.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+u(),this.value=new le(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ae.NONE,l(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+u(),e.set&&(this.setter=Pe(this.name+"-setter",e.set)),
this.equals=e.equals||(e.compareStructural||e.struct?C.structural:C.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==ie.UP_TO_DATE)return;e.lowestObserverState=ie.POSSIBLY_STALE;var t=e.observers,r=t.length;for(;r--;){var n=t[r];n.dependenciesState===ie.UP_TO_DATE&&(n.dependenciesState=ie.POSSIBLY_STALE,n.isTracing!==ae.NONE&&qe(n,e),n.onBecomeStale())}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&c("Cycle detected in computation "+this.name+": "+this.derivation),0!==Ne.inBatch||0!==this.observers.length||this.keepAlive?(He(this),de(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===ie.STALE)return;e.lowestObserverState=ie.STALE;var t=e.observers,r=t.length;for(;r--;){var n=t[r];n.dependenciesState===ie.POSSIBLY_STALE?n.dependenciesState=ie.STALE:n.dependenciesState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.UP_TO_DATE)}}(this)):de(this)&&(this.warnAboutUntrackedRead(),Fe(),this.value=this.computeValue(!1),Ve());var e=this.value;if(pe(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(pe(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){l(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else l(!1,!1)},e.prototype.trackAndCompute=function(){Je()&&Xe({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===ie.NOT_TRACKING,r=this.computeValue(!0),n=t||pe(e)||pe(r)||!this.equals(e,r);return n&&(this.value=r),n},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Ne.computationDepth++,e)t=he(this,this.derivation,this.scope);else if(!0===Ne.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new le(e)}return Ne.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(ye(this),this.value=void 0)},e.prototype.observe=function(e,t){var r=this,n=!0,o=void 0;return ut((function(){var i=r.get();if(!n||t){var a=ve();e({type:"update",object:r,newValue:i,oldValue:o}),be(a)}n=!1,o=i}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return O(this.get())},e}();De.prototype[E()]=De.prototype.valueOf;var Le=v("ComputedValue",De),Ce=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Re=!0,Ie=!1,Ne=function(){var e=s();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Re=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Ce).version&&(Re=!1),Re?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Ce):(setTimeout((function(){Ie||c("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ce)}();function Me(e,t){var r=e.observers.length;r&&(e.observersIndexes[t.__mapid]=r),e.observers[r]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ue(e,t){
if(1===e.observers.length)e.observers.length=0,Be(e);else{var r=e.observers,n=e.observersIndexes,o=r.pop();if(o!==t){var i=n[t.__mapid]||0;i?n[o.__mapid]=i:delete n[o.__mapid],r[i]=o}delete n[t.__mapid]}}function Be(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Ne.pendingUnobservations.push(e))}function Fe(){Ne.inBatch++}function Ve(){if(0==--Ne.inBatch){We();for(var e=Ne.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,0===r.observers.length&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof De&&r.suspend())}Ne.pendingUnobservations=[]}}function He(e){var t=Ne.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Ne.inBatch>0&&Be(e),!1)}function qe(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ae.BREAK){var r=[];ze(vt(fr(e,n)),r,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof De?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}var n}function ze(e,t,r){t.length>=1e3?t.push("(and many more)"):(t.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return ze(e,t,r+1)})))}var Ge=function(){function e(e,t,r,n){void 0===e&&(e="Reaction@"+u()),void 0===n&&(n=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=ie.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+u(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ae.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ne.pendingReactions.push(this),We())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Fe(),this._isScheduled=!1,de(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Je()&&Xe({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}Ve()}},e.prototype.track=function(e){Fe();var t,r=Je();r&&(t=Date.now(),Ze({name:this.name,type:"reaction"})),this._isRunning=!0;var n=he(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ye(this),pe(n)&&this.reportExceptionInDerivation(n.cause),r&&tt({time:Date.now()-t}),Ve()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Ne.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ne.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),Je()&&Xe({type:"error",name:this.name,message:r,error:""+e}),Ne.globalReactionErrorHandlers.forEach((function(r){return r(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Fe(),ye(this),Ve()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var n=kt(e);if(!n)return c(!1);n.isTracing===ae.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled")
;n.isTracing=r?ae.BREAK:ae.LOG}(this,e)},e}();var Ke=function(e){return e()};function We(){Ne.inBatch>0||Ne.isRunningReactions||Ke(Qe)}function Qe(){Ne.isRunningReactions=!0;for(var e=Ne.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,o=r.length;n<o;n++)r[n].runReaction()}Ne.isRunningReactions=!1}var $e=v("Reaction",Ge);function Ye(e){var t=Ke;Ke=function(r){return e((function(){return t(r)}))}}function Je(){return!!Ne.spyListeners.length}function Xe(e){if(Ne.spyListeners.length)for(var t=Ne.spyListeners,r=0,n=t.length;r<n;r++)t[r](e)}function Ze(e){Xe(N(N({},e),{spyReportStart:!0}))}var et={spyReportEnd:!0};function tt(e){Xe(e?N(N({},e),{spyReportEnd:!0}):et)}function rt(){c(!1)}function nt(e){return function(t,r,n){if(n){if(n.value)return{value:Pe(e,n.value),enumerable:!1,configurable:!0,writable:!0};var o=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Pe(e,o.call(this))}}}return ot(e).apply(this,arguments)}}function ot(e){return function(t,r,n){Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:function(){},set:function(t){y(this,r,it(e,t))}})}}var it=function(e,t,r,n){return 1===arguments.length&&"function"==typeof e?Pe(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?Pe(e,t):1===arguments.length&&"string"==typeof e?nt(e):!0!==n?nt(t).apply(null,arguments):void(e[t]=Pe(e.name||t,r.value))};function at(e,t){return ke("string"==typeof e?e:e.name||"<unnamed action>","function"==typeof e?e:t,this,void 0)}function st(e,t,r){y(e,t,Pe(t,r.bind(e)))}function ut(e,t){void 0===t&&(t=i);var r,n=t&&t.name||e.name||"Autorun@"+u();if(!t.scheduler&&!t.delay)r=new Ge(n,(function(){this.track(s)}),t.onError,t.requiresObservable);else{var o=lt(t),a=!1;r=new Ge(n,(function(){a||(a=!0,o((function(){a=!1,r.isDisposed||r.track(s)})))}),t.onError,t.requiresObservable)}function s(){e(r)}return r.schedule(),r.getDisposer()}it.bound=function(e,t,r,n){return!0===n?(st(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return st(this,t,r.value||r.initializer.call(this)),this[t]},set:rt}:{enumerable:!1,configurable:!0,set:function(e){st(this,t,e)},get:function(){}}};var ct=function(e){return e()};function lt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ct}function pt(e,t,r){void 0===r&&(r=i),"boolean"==typeof r&&(r={fireImmediately:r});var n,o,a,s=r.name||"Reaction@"+u(),c=it(s,r.onError?(n=r.onError,o=t,function(){try{return o.apply(this,arguments)}catch(e){n.call(this,e)}}):t),l=!r.scheduler&&!r.delay,p=lt(r),d=!0,f=!1,h=r.compareStructural?C.structural:r.equals||C.default,y=new Ge(s,(function(){d||l?m():f||(f=!0,p(m))}),r.onError,r.requiresObservable);function m(){if(f=!1,!y.isDisposed){var t=!1;y.track((function(){var r=e(y);t=d||!h(a,r),a=r})),d&&r.fireImmediately&&c(a,y),d||!0!==t||c(a,y),d&&(d=!1)}}return y.schedule(),y.getDisposer()}function dt(e,t,r){return ht("onBecomeObserved",e,t,r)}function ft(e,t,r){return ht("onBecomeUnobserved",e,t,r)}function ht(e,t,r,n){var o="function"==typeof n?fr(t,r):fr(t),i="function"==typeof n?n:r,a=o[e];return"function"!=typeof a?c(!1):(o[e]=function(){a.call(this),i.call(this)},function(){o[e]=a})}function yt(e){var t=e.enforceActions,r=e.computedRequiresReaction,n=e.computedConfigurable,o=e.disableErrorBoundaries,i=e.arrayBuffer,a=e.reactionScheduler,u=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((Ne.pendingReactions.length||Ne.inBatch||Ne.isRunningReactions)&&c("isolateGlobalState should be called before MobX is running any reactions"),Ie=!0,Re&&(0==--s().__mobxInstanceCount&&(s().__mobxGlobals=void 0),Ne=new Ce)),void 0!==t){var p=void 0;switch(t){case!0:case"observed":p=!0;break;case!1:case"never":p=!1;break;case"strict":case"always":p="strict";break;default:c("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}
Ne.enforceActions=p,Ne.allowStateChanges=!0!==p&&"strict"!==p}void 0!==r&&(Ne.computedRequiresReaction=!!r),void 0!==u&&(Ne.reactionRequiresObservable=!!u),void 0!==l&&(Ne.observableRequiresReaction=!!l,Ne.allowStateReads=!Ne.observableRequiresReaction),void 0!==n&&(Ne.computedConfigurable=!!n),void 0!==o&&(!0===o&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Ne.disableErrorBoundaries=!!o),"number"==typeof i&&$t(i),a&&Ye(a)}function mt(e,t,r,n){var o=(n=Y(n)).defaultDecorator||(!1===n.deep?ee:X);H(e),ar(e,n.name,o.enhancer),Fe();try{for(var i=Object.getOwnPropertyNames(t),a=0,s=i.length;a<s;a++){var u=i[a],c=Object.getOwnPropertyDescriptor(t,u);0;var l=(r&&u in r?r[u]:c.get?se:o)(e,u,c,!0);l&&Object.defineProperty(e,u,l)}}finally{Ve()}return e}function vt(e){var t,r,n={name:e.name};return e.observing&&e.observing.length>0&&(n.dependencies=(t=e.observing,r=[],t.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r).map(vt)),n}function bt(){this.message="FLOW_CANCELLED"}function gt(e,t){if(null==e)return!1;if(void 0!==t){if(dr(e)){var r=e.$mobx;return r.values&&!!r.values[t]}return!1}return dr(e)||!!e.$mobx||T(e)||$e(e)||Le(e)}function St(e){return 1!==arguments.length&&c(!1),gt(e)}function Et(e){return dr(e)?e.$mobx.getKeys():tr(e)||or(e)?S(e.keys()):Jt(e)?e.map((function(e,t){return t})):c(!1)}bt.prototype=Object.create(Error.prototype);var Ot={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function wt(e,t,r,n){return n.detectCycles&&e.set(t,r),r}function _t(e,t,r){if(!t.recurseEverything&&!St(e))return e;if("object"!==n(e))return e;if(null===e)return null;if(e instanceof Date)return e;if(Te(e))return _t(e.get(),t,r);if(St(e)&&Et(e),!0===t.detectCycles&&null!==e&&r.has(e))return r.get(e);if(Jt(e)||Array.isArray(e)){var o=wt(r,e,[],t),i=e.map((function(e){return _t(e,t,r)}));o.length=i.length;for(var a=0,s=i.length;a<s;a++)o[a]=i[a];return o}if(or(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===t.exportMapsAsObjects){var u=wt(r,e,new Set,t);return e.forEach((function(e){u.add(_t(e,t,r))})),u}var c=wt(r,e,[],t);return e.forEach((function(e){c.push(_t(e,t,r))})),c}if(tr(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===t.exportMapsAsObjects){var l=wt(r,e,new Map,t);return e.forEach((function(e,n){l.set(n,_t(e,t,r))})),l}var p=wt(r,e,{},t);return e.forEach((function(e,n){p[n]=_t(e,t,r)})),p}var d=wt(r,e,{},t);for(var f in e)d[f]=_t(e[f],t,r);return d}function Pt(e,t){var r;return"boolean"==typeof t&&(t={detectCycles:t}),t||(t=Ot),t.detectCycles=void 0===t.detectCycles?!0===t.recurseEverything:!0===t.detectCycles,t.detectCycles&&(r=new Map),_t(e,t,r)}function kt(e){switch(e.length){case 0:return Ne.trackingDerivation;case 1:return fr(e[0]);case 2:return fr(e[0],e[1])}}function xt(e,t){void 0===t&&(t=void 0),Fe();try{return e.apply(t)}finally{Ve()}}function jt(e,t,r){return 1===arguments.length||t&&"object"===n(t)?Tt(e,t):At(e,t,r||{})}function At(e,t,r){var n;"number"==typeof r.timeout&&(n=setTimeout((function(){if(!i.$mobx.isDisposed){i();var e=new Error("WHEN_TIMEOUT");if(!r.onError)throw e;r.onError(e)}}),r.timeout)),r.name=r.name||"When@"+u();var o=Pe(r.name+"-effect",t),i=ut((function(t){e()&&(t.dispose(),n&&clearTimeout(n),o())}),r);return i}function Tt(e,t){var r;var n=new Promise((function(n,o){var i=At(e,n,N(N({},t),{onError:o}));r=function(){i(),o("WHEN_CANCELLED")}}));return n.cancel=r,n}function Dt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Lt(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),p((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function Ct(e,t){var r=ve();try{var n=e.interceptors;if(n)for(var o=0,i=n.length;o<i&&(l(!(t=n[o](t))||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{be(r)}}function Rt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function It(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),p((function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}))}function Nt(e,t){
var r=ve(),n=e.changeListeners;if(n){for(var o=0,i=(n=n.slice()).length;o<i;o++)n[o](t);be(r)}}var Mt,Ut,Bt,Ft,Vt=(Mt=!1,Ut={},Object.defineProperty(Ut,"0",{set:function(){Mt=!0}}),Object.create(Ut)[0]=1,!1===Mt),Ht=0,qt=function(){};Bt=qt,Ft=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Bt.prototype,Ft):void 0!==Bt.prototype.__proto__?Bt.prototype.__proto__=Ft:Bt.prototype=Ft,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(e){Object.defineProperty(qt.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var zt=function(){function e(e,t,r,n){this.array=r,this.owned=n,this.values=[],this.lastKnownLength=0,this.atom=new A(e||"ObservableArray@"+u()),this.enhancer=function(r,n){return t(r,n,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Lt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),It(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var r=new Array(e-t),n=0;n<e-t;n++)r[n]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>Ht&&$t(e+t+1)},e.prototype.spliceWithArray=function(e,t,r){var n=this;fe(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===r&&(r=o),Dt(this)){var a=Ct(this,{object:this.array,type:"splice",index:e,removedCount:t,added:r});if(!a)return o;t=a.removedCount,r=a.added}var s=(r=0===r.length?r:r.map((function(e){return n.enhancer(e,void 0)}))).length-t;this.updateArrayLength(i,s);var u=this.spliceItemsIntoValues(e,t,r);return 0===t&&0===r.length||this.notifyArraySplice(e,r,u),this.dehanceValues(u)},e.prototype.spliceItemsIntoValues=function(e,t,r){var n;if(r.length<1e4)return(n=this.values).splice.apply(n,U([e,t],r));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),o},e.prototype.notifyArrayChildUpdate=function(e,t,r){var n=!this.owned&&Je(),o=Rt(this),i=o||n?{object:this.array,type:"update",index:e,newValue:t,oldValue:r}:null;n&&Ze(N(N({},i),{name:this.atom.name})),this.atom.reportChanged(),o&&Nt(this,i),n&&tt()},e.prototype.notifyArraySplice=function(e,t,r){var n=!this.owned&&Je(),o=Rt(this),i=o||n?{object:this.array,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;n&&Ze(N(N({},i),{name:this.atom.name})),this.atom.reportChanged(),o&&Nt(this,i),n&&tt()},e}(),Gt=function(e){function t(t,r,n,o){void 0===n&&(n="ObservableArray@"+u()),void 0===o&&(o=!1);var i=e.call(this)||this,a=new zt(n,r,i,o);if(m(i,"$mobx",a),t&&t.length){var s=xe(!0);i.spliceWithArray(0,0,t),je(s)}return Vt&&Object.defineProperty(a.array,"0",Kt),i}return I(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return Jt(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},
t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,r){void 0===r&&(r=0);var n=this.findIndex.apply(this,arguments);return-1===n?void 0:this.get(n)},t.prototype.findIndex=function(e,t,r){void 0===r&&(r=0);for(var n=this.peek(),o=n.length,i=r;i<o;i++)if(e.call(t,n[i],i,this))return i;return-1},t.prototype.splice=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,r)},t.prototype.spliceWithArray=function(e,t,r){return this.$mobx.spliceWithArray(e,t,r)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.$mobx;return r.spliceWithArray(r.values.length,0,e),r.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.$mobx;return r.spliceWithArray(0,0,e),r.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function r(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(r.call(this,e),r.call(this,t),e!==t){var n,o=this.$mobx.values;n=e<t?U(o.slice(0,e),o.slice(e+1,t+1),[o[e]],o.slice(t+1)):U(o.slice(0,t),[o[e]],o.slice(t,e),o.slice(e+1)),this.replace(n)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var r=this.$mobx,n=r.values;if(e<n.length){fe(r.atom);var o=n[e];if(Dt(r)){var i=Ct(r,{type:"update",object:this,index:e,newValue:t});if(!i)return;t=i.newValue}(t=r.enhancer(t,o))!==o&&(n[e]=t,r.notifyArrayChildUpdate(e,t,o))}else{if(e!==n.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+n.length);r.spliceWithArray(e,0,[t])}},t}(qt);P(Gt.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return k({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Gt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),y(Gt.prototype,x(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(e){var t=Array.prototype[e];l("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),y(Gt.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),["every","filter","forEach","map","some"].forEach((function(e){l("function"==typeof Array.prototype[e],"Base function not defined on Array prototype: '"+e+"'"),y(Gt.prototype,e,(function(t,r){var n=this,o=this.$mobx;return o.atom.reportObserved(),o.dehanceValues(o.values)[e]((function(e,o){return t.call(r,e,o,n)}),r)}))})),["reduce","reduceRight"].forEach((function(e){y(Gt.prototype,e,(function(){var t=this,r=this.$mobx;r.atom.reportObserved();var n=arguments[0];return arguments[0]=function(e,o,i){return o=r.dehanceValue(o),n(e,o,i,t)},r.values[e].apply(r.values,arguments)}))})),function(e,t){for(var r=0;r<t.length;r++)y(e,t[r],e[t[r]])
}(Gt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Kt=Wt(0);function Wt(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function Qt(e){Object.defineProperty(Gt.prototype,""+e,Wt(e))}function $t(e){for(var t=Ht;t<e;t++)Qt(t);Ht=e}$t(1e3);var Yt=v("ObservableArrayAdministration",zt);function Jt(e){return f(e)&&Yt(e.$mobx)}var Xt={},Zt=function(){function e(e,t,r){if(void 0===t&&(t=G),void 0===r&&(r="ObservableMap@"+u()),this.enhancer=t,this.name=r,this.$mobx=Xt,this._keysAtom=D(this.name+".keys()"),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Ne.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var n=r=new Ae(this._has(e),K,this.name+"."+er(e)+"?",!1);this._hasMap.set(e,n),ft(n,(function(){return t._hasMap.delete(e)}))}return r.get()},e.prototype.set=function(e,t){var r=this._has(e);if(Dt(this)){var n=Ct(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if((fe(this._keysAtom),Dt(this))&&!(o=Ct(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var r=Je(),n=Rt(this),o=n||r?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return r&&Ze(N(N({},o),{name:this.name,key:e})),xt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&Nt(this,o),r&&tt(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var r=this._hasMap.get(e);r&&r.setNewValue(t)},e.prototype._updateValue=function(e,t){var r=this._data.get(e);if((t=r.prepareNewValue(t))!==Ne.UNCHANGED){var n=Je(),o=Rt(this),i=o||n?{type:"update",object:this,oldValue:r.value,name:e,newValue:t}:null;n&&Ze(N(N({},i),{name:this.name,key:e})),r.setNewValue(t),o&&Nt(this,i),n&&tt()}},e.prototype._addValue=function(e,t){var r=this;fe(this._keysAtom),xt((function(){var n=new Ae(t,r.enhancer,r.name+"."+er(e),!1);r._data.set(e,n),t=n.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()}));var n=Je(),o=Rt(this),i=o||n?{type:"add",object:this,name:e,newValue:t}:null;n&&Ze(N(N({},i),{name:this.name,key:e})),o&&Nt(this,i),n&&tt()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=this.keys();return k({next:function(){var r=t.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:e.get(o)}}})},e.prototype.entries=function(){var e=this,t=this.keys();return k({next:function(){var r=t.next(),n=r.done,o=r.value;return{done:n,value:n?void 0:[o,e.get(o)]}}})},e.prototype.forEach=function(e,t){var r=this;this._keysAtom.reportObserved(),this._data.forEach((function(n,o){return e.call(t,r.get(o),o,r)}))},e.prototype.merge=function(e){var t=this;return tr(e)&&(e=e.toJS()),xt((function(){var r=xe(!0);try{h(e)?Object.keys(e).forEach((function(r){return t.set(r,e[r])})):Array.isArray(e)?e.forEach((function(e){var r=M(e,2),n=r[0],o=r[1];return t.set(n,o)})):b(e)?e.constructor!==Map?c("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,r){return t.set(r,e)})):null!=e&&c("Cannot initialize map from "+e)}finally{je(r)}})),this},e.prototype.clear=function(){var e=this;xt((function(){me((function(){e._data.forEach((function(t,r){return e.delete(r)}))}))}))},e.prototype.replace=function(e){
var t=this;return xt((function(){var r=function(e){if(b(e)||tr(e))return e;if(Array.isArray(e))return new Map(e);if(h(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}return c("Cannot convert to map from '"+e+"'")}(e),n=new Map,o=!1;if(w(t._data.keys(),(function(e){if(!r.has(e))if(t.delete(e))o=!0;else{var i=t._data.get(e);n.set(e,i)}})),w(r.entries(),(function(e){var r=M(e,2),i=r[0],a=r[1],s=t._data.has(i);if(t.set(i,a),t._data.has(i)){var u=t._data.get(i);n.set(i,u),s||(o=!0)}})),!o)if(t._data.size!==n.size)t._keysAtom.reportChanged();else for(var i=t._data.keys(),a=n.keys(),s=i.next(),u=a.next();!s.done;){if(s.value!==u.value){t._keysAtom.reportChanged();break}s=i.next(),u=a.next()}t._data=n})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this.forEach((function(r,o){return t["symbol"===n(o)?o:er(o)]=e.get(o)})),t},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+S(this.keys()).map((function(t){return er(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return It(this,e)},e.prototype.intercept=function(e){return Lt(this,e)},e}();function er(e){return e&&e.toString?e.toString():new String(e).toString()}P(Zt.prototype,(function(){return this.entries()})),m(Zt.prototype,x(),"Map");var tr=v("ObservableMap",Zt),rr={},nr=function(){function e(e,t,r){if(void 0===t&&(t=G),void 0===r&&(r="ObservableSet@"+u()),this.name=r,this.$mobx=rr,this._data=new Set,this._atom=D(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,n){return t(e,n,r)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;xt((function(){me((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var r=this;this._atom.reportObserved(),this._data.forEach((function(n){e.call(t,n,n,r)}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((fe(this._atom),Dt(this))&&!(o=Ct(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){xt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var r=Je(),n=Rt(this),o=n||r?{type:"add",object:this,newValue:e}:null;0,n&&Nt(this,o)}return this},e.prototype.delete=function(e){var t=this;if(Dt(this)&&!(o=Ct(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var r=Je(),n=Rt(this),o=n||r?{type:"delete",object:this,oldValue:e}:null;return xt((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&Nt(this,o),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=S(this.keys()),r=S(this.values());return k({next:function(){var n=e;return e+=1,n<r.length?{value:[t[n],r[n]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,r=0;return void 0!==this._data.values?e=S(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),k({next:function(){return r<e.length?{value:t.dehanceValue(e[r++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return or(e)&&(e=e.toJS()),xt((function(){var r=xe(!0);try{Array.isArray(e)||g(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&c("Cannot initialize set from "+e)}finally{je(r)}})),this},e.prototype.observe=function(e,t){return It(this,e)},e.prototype.intercept=function(e){return Lt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){
return this.name+"[ "+S(this.keys()).join(", ")+" ]"},e}();P(nr.prototype,(function(){return this.values()})),m(nr.prototype,x(),"Set");var or=v("ObservableSet",nr),ir=function(){function e(e,t,r){this.target=e,this.name=t,this.defaultEnhancer=r,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,r){var n=this.target;n!==e&&this.illegalAccess(e,t);var o=this.values[t];if(o instanceof De)o.set(r);else{if(Dt(this)){if(!(s=Ct(this,{type:"update",object:n,name:t,newValue:r})))return;r=s.newValue}if((r=o.prepareNewValue(r))!==Ne.UNCHANGED){var i=Rt(this),a=Je(),s=i||a?{type:"update",object:n,oldValue:o.value,name:t,newValue:r}:null;a&&Ze(N(N({},s),{name:this.name,key:t})),o.setNewValue(r),i&&Nt(this,s),a&&tt()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(Dt(this))if(!(i=Ct(this,{object:t,name:e,type:"remove"})))return;try{Fe();var r=Rt(this),n=Je(),o=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var i=r||n?{type:"remove",object:t,oldValue:o,name:e}:null;n&&Ze(N(N({},i),{name:this.name,key:e})),r&&Nt(this,i),n&&tt()}finally{Ve()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return It(this,e)},e.prototype.intercept=function(e){return Lt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new Gt(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Ae})),K,"keys("+this.name+")",!0)),this.keys.slice()},e}();function ar(e,t,r){void 0===t&&(t=""),void 0===r&&(r=G);var n=e.$mobx;return n||(h(e)||(t=(e.constructor.name||"ObservableObject")+"@"+u()),t||(t="ObservableObject@"+u()),m(e,"$mobx",n=new ir(e,t,r)),n)}function sr(e,t,r,n){var o=ar(e);if(Dt(o)){var i=Ct(o,{object:e,name:t,type:"add",newValue:r});if(!i)return;r=i.newValue}r=(o.values[t]=new Ae(r,n,o.name+"."+t,!1)).value,Object.defineProperty(e,t,function(e){return ur[e]||(ur[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),o.keys&&o.keys.push(t),function(e,t,r,n){var o=Rt(e),i=Je(),a=o||i?{type:"add",object:t,name:r,newValue:n}:null;i&&Ze(N(N({},a),{name:e.name,key:r}));o&&Nt(e,a);i&&tt()}(o,e,t,r)}var ur=Object.create(null),cr=Object.create(null);function lr(e){var t=e.$mobx;return t||(H(e),e.$mobx)}var pr=v("ObservableObjectAdministration",ir);function dr(e){return!!f(e)&&(H(e),pr(e.$mobx))}function fr(e,t){if("object"===n(e)&&null!==e){if(Jt(e))return void 0!==t&&c(!1),e.$mobx.atom;if(or(e))return e.$mobx;if(tr(e)){var r=e;return void 0===t?r._keysAtom:((o=r._data.get(t)||r._hasMap.get(t))||c(!1),o)}var o;if(H(e),t&&!e.$mobx&&e[t],dr(e))return t?((o=e.$mobx.values[t])||c(!1),o):c(!1);if(T(e)||Le(e)||$e(e))return e}else if("function"==typeof e&&$e(e.$mobx))return e.$mobx;return c(!1)}function hr(e,t){return e||c("Expecting some object"),void 0!==t?hr(fr(e,t)):T(e)||Le(e)||$e(e)||tr(e)||or(e)?e:(H(e),e.$mobx?e.$mobx:void c(!1))}var yr=Object.prototype.toString;function mr(e,t,r){return void 0===r&&(r=-1),vr(e,t,r)}function vr(e,t,r,o,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=n(e);if("function"!==a&&"object"!==a&&"object"!=n(t))return!1;e=br(e),t=br(t);var s=yr.call(e);if(s!==yr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var u="[object Array]"===s;if(!u){if("object"!=n(e)||"object"!=n(t))return!1;var c=e.constructor,l=t.constructor
;if(c!==l&&!("function"==typeof c&&c instanceof c&&"function"==typeof l&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),i=i||[];for(var p=(o=o||[]).length;p--;)if(o[p]===e)return i[p]===t;if(o.push(e),i.push(t),u){if((p=e.length)!==t.length)return!1;for(;p--;)if(!vr(e[p],t[p],r-1,o,i))return!1}else{var d=Object.keys(e),f=void 0;if(p=d.length,Object.keys(t).length!==p)return!1;for(;p--;)if(!gr(t,f=d[p])||!vr(e[f],t[f],r-1,o,i))return!1}return o.pop(),i.pop(),!0}function br(e){return Jt(e)?e.peek():b(e)||tr(e)||g(e)||or(e)?S(e.entries()):e}function gr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":n(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return Ne.spyListeners.push(e),p((function(){Ne.spyListeners=Ne.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?fr(e,t):dr(e)||tr(e)||or(e)?hr(e):fr(e)).name}},$mobx:"$mobx"})},function(e,t,r){"use strict";var n,o,i,a,s,u,c,l;r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return p})),function(e){e[e.Normal=0]="Normal",e[e.Wide=1]="Wide",e[e.Web=2]="Web",e[e.Mini=3]="Mini",e[e.Full=4]="Full",e[e.Pip=5]="Pip"}(o||(o={})),function(e){e[e.Auto=0]="Auto",e[e.Delay=1]="Delay",e[e.Abort=2]="Abort"}(i||(i={})),function(e){e[e.Ugc=0]="Ugc",e[e.Pgc=1]="Pgc",e[e.Pugv=2]="Pugv"}(a||(a={})),function(e){e[e.Default=0]="Default",e[e.Manager=1]="Manager",e[e.Creator=2]="Creator",e[e.Oneself=3]="Oneself",e[e.Homepage=4]="Homepage",e[e.Homepage_Topic=5]="Homepage_Topic",e[e.Embedded=6]="Embedded"}(s||(s={})),function(e){e[e.All=0]="All",e[e.Core=1]="Core",e[e.Union=2]="Union"}(u||(u={})),function(e){e[e.I_PlayUrl=0]="I_PlayUrl",e[e.I_UserInfo=1]="I_UserInfo",e[e.I_ViewInfo=2]="I_ViewInfo",e[e.I_VideoShot=3]="I_VideoShot",e[e.P_Title=4]="P_Title",e[e.M_Lottie=5]="M_Lottie"}(c||(c={})),function(e){e.ManualAction="ManualAction",e.TimeupdateEvent="TimeupdateEvent",e.SeekingEvent="SeekingEvent"}(l||(l={}));var p=((n={})[1]="播放器初始化...",n[2]="获取视频参数...",n[3]="检查视频参数...",n[4]="获取播放地址...",n[5]="加载视频信息...",n[6]="加载视频内容...",n)},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),o=r(1),i=r(2),a=r(9),s=r(37),u=function(){function e(e){var t=this;this.ppx=a.f,this.spx=a.g,this.cpx=a.a,this.mpx=a.e,this.fpx=a.c,this.ipx=a.d,this.rootStore=e,this.rootPlayer=e.rootPlayer,this.nodes=e.nodes,this.log=this.rootPlayer.log,this.track=this.rootPlayer.track,this.dp={},this.dc={},this.rootPlayer.once(o.b.PLAYER_GRAPH_FLATTEN,(function(){return t.onGraphFlatten()})),this.rootPlayer.once(o.b.PLAYER_STORAGE_BUILD,(function(){return t.onStorageBuild()})),this.rootPlayer.once(o.b.PLAYER_STATE_CREATE,(function(){return t.onStateCreate()})),this.rootPlayer.once(o.b.PLAYER_STATE_CREATED,(function(){return t.onStateCreated()})),this.rootPlayer.once(o.b.PLAYER_STORE_MOUNT,(function(){return t.onMount()})),this.rootPlayer.once(o.b.PLAYER_STORE_MOUNTED,(function(){return t.onMounted()})),this.rootPlayer.on(o.a.Player_Navigate,(function(){return t.onNavigate()})),this.rootPlayer.on(o.a.Player_Committed,(function(){return t.onCommitted()})),this.rootPlayer.on(o.a.Player_Prepared,(function(){return t.onPrepared()})),this.rootPlayer.on(o.b.PLAYER_USER_LOADED,(function(e){return t.onUserLoaded(e)})),this.rootPlayer.on(o.a.Player_Dispose,(function(){return t.onDispose()})),this.rootPlayer.once(o.a.Player_Disconnect,(function(){return t.onDisconnect()}))}return Object.defineProperty(e.prototype,"defaultState",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.changeState=function(e,t){if(Object(s.a)(e)&&Object(s.a)(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==t[r]&&(e[r]=t[r])},
e.prototype.setState=function(e,t){!t&&this.rootStore.isDisposing||this.changeState(this.state,e)},e.prototype.onGraphFlatten=function(){this.rootStore.decomposeSubStores(this)},e.prototype.onStorageBuild=function(){},e.prototype.onStateCreate=function(){var e=this.defaultState;Object(s.a)(e)&&(this.state=i.g.object(e,null,{deep:!1}))},e.prototype.onStateCreated=function(){},e.prototype.onMount=function(){},e.prototype.onMounted=function(){},e.prototype.onNavigate=function(){},e.prototype.onCommitted=function(){},e.prototype.onPrepared=function(){},e.prototype.onUserLoaded=function(e){},e.prototype.onDispose=function(e){var t=this;Object.keys(this.dp).forEach((function(e){return"function"==typeof t.dp[e]&&t.dp[e]()})),this.dp={};var r={},n=this.defaultState;if(n){if(e){var o=Object.keys(n);Object(s.a)(e)&&o.forEach((function(t){e[t]||(r[t]=n[t])}))}else Object.assign(r,n);this.setState(r,!0)}},e.prototype.onDisconnect=function(){var e=this;Object.keys(this.dc).forEach((function(t){return"function"==typeof e.dc[t]&&e.dc[t]()})),this.dc={}},Object(n.c)([i.b],e.prototype,"changeState",null),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){function e(){}return e.USER_LOGOUT=0,e.USER_LIMITED=1,e.USER_REGISTERED=2,e.USER_NORMAL=3,e.USER_VIP=4,e.USER_ADVANCED=5,e.P_ROLE_FREE=0,e.P_ROLE_ASSISTANT=1,e.SEND_POOL_NORMAL=[],e.SEND_POOL_ADMIN=[1,1],e.SEND_FONT_SIZE_LOGOUT=[0,0,0,0,0,0,0],e.SEND_FONT_SIZE_LIMITED=[0,0,1,1,0,0,0],e.SEND_FONT_SIZE_REGISTERED=[0,0,1,1,0,0,0],e.SEND_FONT_SIZE_NORMAL=[0,0,1,1,0,0,0],e.SEND_FONT_SIZE_VIP=[0,1,1,1,1,0,0],e.SEND_FONT_SIZE_ADVANCED=[1,1,1,1,1,1,1],e.SEND_FONT_SIZE_ADMIN=[0,0,1,1,1,0,0],e.SEND_MODE_LOGOUT=[0,0,0,0],e.SEND_MODE_LIMITED=[1,-2,-2,0],e.SEND_MODE_REGISTERED=[1,-2,-2,0],e.SEND_MODE_NORMAL=[1,-2,-2,0],e.SEND_MODE_VIP=[1,1,1,1],e.SEND_MODE_ADVANCED=[1,1,1,1],e.SEND_MODE_LEVEL_LOW=[1,-2,-2,0],e.SEND_MODE_LEVEL_TWO=[1,-2,-2,0],e.SEND_MODE_LEVEL_NORMAL=[1,1,1,0],e.SEND_COLOR_LOGOUT=0,e.SEND_COLOR_LEVEL_LOW=1,e.SEND_COLOR_NORMAL=2,e.SEND_STATUS_LOGOUT=0,e.SEND_STATUS_LEVEL_LOW=1,e.SEND_STATUS_LIMITED=4,e.SEND_STATUS_NORMAL=5,e.SEND_STATUS_TYPING=6,e.SEND_STATUS_BEYOND_WORDS=7,e.SEND_STATUS_SENDING=8,e.SEND_STATUS_SENT=9,e.SEND_STATUS_BLOCKING=11,e.SEND_STATUS_BLOCKED=12,e.SEND_STATUS_CLOSED=13,e.SEND_STATUS_UPDATE=14,e.SEND_ANSWER_STATUS_IN=15,e.SEND_STATUS_CANNOT_BUY=16,e.SEND_STATUS_UP_DM=17,e.SEND_INPUT_LOGOUT=[0,1e5],e.SEND_INPUT_LIMITED=[20,1e4],e.SEND_INPUT_REGISTERED=[20,1e4],e.SEND_INPUT_NORMAL=[100,5e3],e.SEND_INPUT_VIP=[100,1e3],e.SEND_INPUT_ADVANCED=[100,1e3],e.BLOCK_DISABLED=0,e.BLOCK_SCROLL=1,e.BLOCK_REVERSE=2,e.BLOCK_BOTTOM=3,e.BLOCK_TOP=4,e.BLOCK_COLOR=5,e.BLOCK_GUEST=6,e.BLOCK_FONTSIZE=7,e.BLOCK_NORMAL=8,e.BLOCK_SUBTITLE=9,e.BLOCK_SPECIAL=10,e.BLOCK_LIST_USER=11,e.BLOCK_LIST_KEYWORD=12,e.BLOCK_LIST_COLOR=13,e.BLOCK_LIST_REGEXP=14,e.BLOCK_CLOUD_VIDEO=15,e.BLOCK_CLOUD_PARTITION=16,e.BLOCK_CLOUD_ALL=17,e.BLOCK_CLOUD_UP=18,e.PANEL={DM_LIST:"DM_LIST",DM_BLOCK:"DM_BLOCK",DM_ADV:"DM_ADV",DM_BAS:"DM_BAS"},e}()},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;function i(e,t,r){if(!r||n(r.value)!==o.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:o.boolTrue,get:function(){var e=r.value.bind(this);return Object.defineProperty(this,t,{value:e,configurable:o.boolTrue,writable:o.boolTrue}),e}}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.typeOfFunction="function",e.boolTrue=!0}(o||(o={})),t.bind=i,t.default=i},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return T})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return P})),r.d(t,"f",(function(){return _})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return m})),r.d(t,"i",(function(){return y})),
r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return p}));var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var o=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},i=function(e){return e%1?Number(e.toFixed(5)):e},a=/(-)?(\d[\d\.]*)/g,s=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,u=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,c={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},l=n(n({},c),{transform:o(0,1)}),p=n(n({},c),{default:1}),d=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},f=d("deg"),h=d("%"),y=d("px"),m=(d("vh"),d("vw"),n(n({},h),{parse:function(e){return h.parse(e)/100},transform:function(e){return h.transform(100*e)}})),v=o(0,255),b=function(e){return void 0!==e.red},g=function(e){return void 0!==e.hue};var S=function(e){return function(t){if("string"!=typeof t)return t;for(var r={},n=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}(t).replace(/(,|\/)/g," ").split(/ \s*/),o=0;o<4;o++)r[e[o]]=void 0!==n[o]?parseFloat(n[o]):1;return r}},E=n(n({},c),{transform:function(e){return Math.round(v(e))}});function O(e,t){return e.startsWith(t)&&u.test(e)}var w={test:function(e){return"string"==typeof e?O(e,"rgb"):b(e)},parse:S(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha,a=void 0===o?1:o;return function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return"rgba("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:E.transform(t),green:E.transform(r),blue:E.transform(n),alpha:i(l.transform(a))})}},_={test:function(e){return"string"==typeof e?O(e,"hsl"):g(e)},parse:S(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha,a=void 0===o?1:o;return function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return"hsla("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(t),saturation:h.transform(i(r)),lightness:h.transform(i(n)),alpha:i(l.transform(a))})}},P=n(n({},w),{test:function(e){return"string"==typeof e&&O(e,"#")},parse:function(e){var t="",r="",n="";return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),k={test:function(e){return"string"==typeof e&&u.test(e)||b(e)||g(e)},parse:function(e){return w.test(e)?w.parse(e):_.test(e)?_.parse(e):P.test(e)?P.parse(e):e},transform:function(e){return b(e)?w.transform(e):g(e)?_.transform(e):e}},x="${c}",j="${n}",A=function(e){return"number"==typeof e?0:e},T={test:function(e){if("string"!=typeof e||!isNaN(e))return!1;var t=0,r=e.match(a),n=e.match(s);return r&&(t+=r.length),n&&(t+=n.length),t>0},parse:function(e){var t=e,r=[],n=t.match(s);n&&(t=t.replace(s,x),r.push.apply(r,n.map(k.parse)));var o=t.match(a);return o&&r.push.apply(r,o.map(c.parse)),r},createTransformer:function(e){var t=e,r=0,n=e.match(s),o=n?n.length:0;if(n)for(var u=0;u<o;u++)t=t.replace(n[u],x),r++;var c=t.match(a),l=c?c.length:0;if(c)for(u=0;u<l;u++)t=t.replace(c[u],j),r++;return function(e){for(var n=t,a=0;a<r;a++)n=n.replace(a<o?x:j,a<o?k.transform(e[a]):i(e[a]));return n}},getAnimatableNone:function(e){var t=T.parse(e);return T.createTransformer(e)(t.map(A))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(34),o=r.n(n),i=function(){function e(e,t){this.tag="[Http]",this.httpStatus=0,this.log=e.log,this.track=e.track,this.httpCaches=e.httpCaches,this.baseConfig=Object.assign({},t),this.cancelSource=o.a.CancelToken.source(),e.httpRequests&&!this.baseConfig.noStore&&e.httpRequests.add(this)}return Object.defineProperty(e.prototype,"status",{
get:function(){return this.httpStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persistent",{get:function(){return this.baseConfig.persistent},enumerable:!1,configurable:!0}),e.prototype.request=function(e){var t=this,r=Object.assign({cancelToken:this.cancelSource.token},e),n=o.a.create().getUri(r),i=!r.method||/^GET$/i.test(r.method);if(i&&this.baseConfig.memCache){var a=this.getHttpCache(n);if(a)return this.log.i(this.tag,"hit internal cache",n),a}!this.baseConfig.noStore&&this.log.i(this.tag,"request start",n),this.httpStatus=1;var s=o()(r).then((function(e){if(!t.baseConfig.noStore&&t.log.i(t.tag,"request done",e.status,e.statusText,e.config.url),t.httpStatus=2,t.setUrlRelation(e.data,n,i),t.isInvalid(e.data,!0,n)){var r=new Error("response.data is not valid");throw r.response=e,r.config=e.config,r.request=e.request,r.isAxiosError=!1,r.toJSON=function(){return e},r}return e})).catch((function(e){var r,o,i;return!t.baseConfig.noStore&&t.log.w(t.tag,"request fail",null===(r=e.response)||void 0===r?void 0:r.status,null===(o=e.response)||void 0===o?void 0:o.statusText,null===(i=e.config)||void 0===i?void 0:i.url,e.code,e.message),t.httpStatus=3,t.delHttpCache(n),Promise.reject(e)}));return this.setHttpCache(n,s,i),s},e.prototype.setUrlRelation=function(t,r,n){n&&t&&"object"==typeof t&&e.rel.set(t,r)},e.prototype.getUrlRelation=function(t){if(t&&"object"==typeof t)return e.rel.get(t)},e.prototype.setHttpCache=function(e,t,r){r&&this.httpCaches&&e&&!this.baseConfig.noStore&&this.httpCaches.set(e,t)},e.prototype.getHttpCache=function(e){if(this.baseConfig.memCache&&this.httpCaches)return this.httpCaches.get(e)},e.prototype.delHttpCache=function(e){this.httpCaches&&this.httpCaches.delete(e)},e.prototype.isInvalid=function(e,t,r){if(null==e)return this.log.e(this.tag,"Response: falsely"),this.httpStatus=4,this.delHttpCache(r||this.getUrlRelation(e)),!0;if(t)return!1;if(0===e.code)return!1;try{this.log.w(this.tag,"Response",JSON.stringify(e))}catch(e){this.log.w(this.tag,"Unexpected",e&&e.message)}return this.httpStatus=4,this.delHttpCache(r||this.getUrlRelation(e)),!0},e.prototype.isCanceled=function(e){return o.a.isCancel(e)},e.prototype.dispose=function(e){void 0===e&&(e="Canceled by the end-user"),this.log.i(this.tag,"[Dispose]",e),this.cancelSource.cancel(e)},e.rel=new WeakMap,e}()},function(e,t,r){"use strict";r.d(t,"n",(function(){return o})),r.d(t,"p",(function(){return i})),r.d(t,"h",(function(){return a})),r.d(t,"i",(function(){return s})),r.d(t,"m",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"g",(function(){return f})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return y})),r.d(t,"o",(function(){return m})),r.d(t,"l",(function(){return v})),r.d(t,"k",(function(){return b})),r.d(t,"j",(function(){return g})),r.d(t,"t",(function(){return S})),r.d(t,"q",(function(){return E})),r.d(t,"u",(function(){return O})),r.d(t,"v",(function(){return w})),r.d(t,"s",(function(){return _})),r.d(t,"r",(function(){return P}));var n=r(3),o=0,i=1,a=!0,s=!0,u=n.d.Auto,c="bpx-docker",l="bpx-common",p="bpx-player",d="bpx-minor",f="bpx-state",h="bpx-font",y="bpx-icon",m="bpx_player_profile",v="CURRENT_QUALITY",b="CURRENT_FNVAL",g="CURRENT_BLACKGAP",S=/\/core\.(\w+\.)?js(\?.*)?$/,E="Resolve Error: video is encoding.",O="https://s1.hdslb.com/bfs/seed/jinkela/short/mini-login/miniLogin.umd.min.js",w="https://passport.bilibili.com/login",_='Interrupted by "Player_Dispose" event',P='Interrupted by "Player_Disconnect" event'},,function(e,t,r){"use strict";var n=r(74);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,a=n.a||i||Function("return this")();t.a=a},function(e,t,r){"use strict";function n(e){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){var t=n(e);return null!=e&&("object"==t||"function"==t)}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==("undefined"==typeof globalThis?"undefined":r(globalThis))&&globalThis)||n("object"==("undefined"==typeof window?"undefined":r(window))&&window)||n("object"==("undefined"==typeof self?"undefined":r(self))&&self)||n("object"==("undefined"==typeof global?"undefined":r(global))&&global)||function(){return this}()||Function("return this")()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return u}));var n,o=r(0),i=r(269),a=r(6),s=r.n(a);!function(e){e.Flv="Flv",e.Dash="Dash"}(n||(n={}));var u=function(){function e(e,t){this.isAgentReady=!1,this.isQualityReady=!1,this.tag="[BaseAgent]",this.rootStore=e,this.rootPlayer=e.rootPlayer,this.log=this.rootPlayer.log,this.track=this.rootPlayer.track,this.video=t,this.rootStore.decomposeSubStores(this),this.addBaseEvents(),this.isAgentReady=!0}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this.isAgentReady},enumerable:!1,configurable:!0}),e.prototype.getPlayUrl=function(){var e=this.data&&this.data.mediaDataSource;return e&&e.segments&&e.segments[0]&&e.segments[0].url||""},e.prototype.attachSource=function(e){this.log.i(this.tag,"initialize","KernelType: "+this.kind),this.data=e,this.data.seekType||(this.data.seekType="range")},e.prototype.w=function(){this.log.w(this.tag,"[Warning]","kernelPlayer is not destroyed")},e.prototype.setInitQuality=function(){this.isQualityReady||(0===this.qualityStore.state.newQuality?this.qualityStore.setRenderedQuality(null,0):this.qualityStore.setRenderedQuality(null,this.realQuality),this.isQualityReady=!0)},e.prototype.restoreStates=function(){var e=this;if(this.kernelStore.cachedMediaState){var t=this.kernelStore.cachedMediaState.currentTime,r=this.kernelStore.cachedMediaState.paused;if(t){var n=Object(i.a)(t,0,this.video.duration);n&&(this.seek(n),this.log.i(this.tag,"[Restore]: seek action","currentTime:"+t+",paused:"+r))}if(r)this.video.pause();else{var o=this.video.play();o&&o.catch((function(t){e.log.w(e.tag,"[Restore]: play failed",t&&t.message)}))}this.kernelStore.cachedMediaState=null}},e.prototype.addBaseEvents=function(){this.video.addEventListener("loadedmetadata",this.onLoadedmetadata)},e.prototype.removeBaseEvents=function(){this.video.removeEventListener("loadedmetadata",this.onLoadedmetadata)},e.prototype.onLoadedmetadata=function(){this.restoreStates(),this.setInitQuality(),this.errorStore.stopPlayUrlRetry()},e.prototype.resetQualityReadyState=function(){this.log.i(this.tag,"resetQualityReadyState"),this.isQualityReady=!1},e.prototype.dispose=function(){this.log.i(this.tag,"dispose"),this.isAgentReady=!1,this.resetQualityReadyState(),this.removeBaseEvents()},Object(o.c)([s.a],e.prototype,"onLoadedmetadata",null),e}()},function(e,t){t.defaults={},t.set=function(e,r,n){var o=n||{},i=t.defaults,a=o.expires||i.expires,s=o.domain||i.domain,u=void 0!==o.path?o.path:void 0!==i.path?i.path:"/",c=void 0!==o.secure?o.secure:i.secure,l=void 0!==o.httponly?o.httponly:i.httponly,p=void 0!==o.samesite?o.samesite:i.samesite,d=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(d&&d.getTime()>=0?";expires="+d.toUTCString():"")+(s?";domain="+s:"")+(u?";path="+u:"")+(c?";secure":"")+(l?";httponly":"")+(p?";samesite="+p:"")},t.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=")
;if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},t.erase=function(e,r){t.set(e,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}},function(e,t,r){"use strict";var n,o,i=e.exports=r(33),a=r(149);i.codegen=r(263),i.fetch=r(264),i.path=r(265),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t};var s=/\\/g,u=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(s,"\\\\").replace(u,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;n||(n=r(101));var o=new n(t||e.name);return i.decorateRoot.add(o),o.ctor=e,Object.defineProperty(e,"$type",{value:o,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:o,enumerable:!1}),o};var l=0;i.decorateEnum=function(e){if(e.$type)return e.$type;o||(o=r(27));var t=new o("Enum"+l++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},Object.defineProperty(i,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(106)))}})},,,function(e,t,r){var n=r(13),o=r(113),i=r(25),a=r(83),s=r(118),u=r(178),c=o("wks"),l=n.Symbol,p=u?l:l&&l.withoutSetter||a;e.exports=function(e){return i(c,e)||(s&&i(l,e)?c[e]=l[e]:c[e]=p("Symbol."+e)),c[e]}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){return null!=e&&"object"==n(e)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(137),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function u(e){return null!==e&&"object"===n(e)}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!==n(e)&&(e=[e]),a(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){
return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return u(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function r(r,o){"object"===n(t[o])&&"object"===n(r)?t[o]=e(t[o],r):t[o]=r}for(var o=0,i=arguments.length;o<i;o++)l(arguments[o],r);return t},deepMerge:function e(){var t={};function r(r,o){"object"===n(t[o])&&"object"===n(r)?t[o]=e(t[o],r):"object"===n(r)?t[o]=e({},r):t[o]=r}for(var o=0,i=arguments.length;o<i;o++)l(arguments[o],r);return t},extend:function(e,t,r){return l(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";var n=r(11).a.Symbol,o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;var u=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o},c=Object.prototype.toString;var l=function(e){return c.call(e)},p=n?n.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?u(e):l(e)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===r(e)?null!==e:"function"==typeof e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var n=function(){},o=function(){}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=s;var o=r(44);((s.prototype=Object.create(o.prototype)).constructor=s).className="Enum";var i=r(56),a=r(16);function s(e,t,r,i,a){if(o.call(this,e,r),t&&"object"!==n(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=a||{},this.reserved=void 0,t)for(var s=Object.keys(t),u=0;u<s.length;++u)"number"==typeof t[s[u]]&&(this.valuesById[this.values[s[u]]=t[s[u]]]=s[u])}s.fromJSON=function(e,t){var r=new s(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,r){if(!a.isString(e))throw TypeError("name must be a string");if(!a.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},s.prototype.remove=function(e){if(!a.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){
return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return W})),r.d(t,"b",(function(){return re})),r.d(t,"c",(function(){return V})),r.d(t,"d",(function(){return F})),r.d(t,"e",(function(){return U}));var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}var i=r(26),a=r(7),s=r(39);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e,t,r){return Math.min(Math.max(r,e),t)},l=.001;function p(e){var t,r,n=e.duration,o=void 0===n?800:n,a=e.bounce,s=void 0===a?.25:a,u=e.velocity,p=void 0===u?0:u,f=e.mass,h=void 0===f?1:f;Object(i.b)(o<=1e4,"Spring duration must be 10 seconds or less");var y=1-s;y=c(.05,1,y),o=c(.01,10,o/1e3),y<1?(t=function(e){var t=e*y,r=t*o,n=t-p,i=d(e,y),a=Math.exp(-r);return l-n/i*a},r=function(e){var r=e*y*o,n=r*p+p,i=Math.pow(y,2)*Math.pow(e,2)*o,a=Math.exp(-r),s=d(Math.pow(e,2),y);return(-t(e)+l>0?-1:1)*((n-i)*a)/s}):(t=function(e){return Math.exp(-e*o)*((e-p)*o+1)-.001},r=function(e){return Math.exp(-e*o)*(o*o*(p-e))});var m=function(e,t,r){for(var n=r,o=1;o<12;o++)n-=e(n)/t(n);return n}(t,r,5/o);if(isNaN(m))return{stiffness:100,damping:10};var v=Math.pow(m,2)*h;return{stiffness:v,damping:2*y*Math.sqrt(h*v)}}function d(e,t){return e*Math.sqrt(1-t*t)}var f=["duration","bounce"],h=["stiffness","damping","mass"];function y(e,t){return t.some((function(t){return void 0!==e[t]}))}function m(e){var t=e.from,r=void 0===t?0:t,i=e.to,a=void 0===i?1:i,s=e.restSpeed,u=void 0===s?2:s,c=e.restDelta,l=o(e,["from","to","restSpeed","restDelta"]),m={done:!1,value:r},b=function(e){var t=n({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!y(e,h)&&y(e,f)){var r=p(e);(t=n(n(n({},t),r),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(l),g=b.stiffness,S=b.damping,E=b.mass,O=b.velocity,w=b.isResolvedFromDuration,_=v,P=v;function k(){var e=O?-O/1e3:0,t=a-r,n=S/(2*Math.sqrt(g*E)),o=Math.sqrt(g/E)/1e3;if(null!=c||(c=Math.abs(a-r)<=1?.01:.4),n<1){var i=d(o,n);_=function(r){var s=Math.exp(-n*o*r);return a-s*((e+n*o*t)/i*Math.sin(i*r)+t*Math.cos(i*r))},P=function(r){var a=Math.exp(-n*o*r);return n*o*a*(Math.sin(i*r)*(e+n*o*t)/i+t*Math.cos(i*r))-a*(Math.cos(i*r)*(e+n*o*t)-i*t*Math.sin(i*r))}}else if(1===n)_=function(r){return a-Math.exp(-o*r)*(t+(e+o*t)*r)};else{var s=o*Math.sqrt(n*n-1);_=function(r){var i=Math.exp(-n*o*r),u=Math.min(s*r,300);return a-i*((e+n*o*t)*Math.sinh(u)+s*t*Math.cosh(u))/s}}}return k(),{next:function(e){var t=_(e);if(w)m.done=e>=l.duration;else{var r=1e3*P(e),n=Math.abs(r)<=u,o=Math.abs(a-t)<=c;m.done=n&&o}return m.value=m.done?a:t,m},flipTarget:function(){var e;O=-O,r=(e=[a,r])[0],a=e[1],k()}}}m.needsInterpolation=function(e,t){return"string"==typeof e||"string"==typeof t};var v=function(e){return 0},b=function(e,t,r){var n=t-e;return 0===n?1:(r-e)/n},g=function(e,t,r){return-r*e+r*t+e},S=function(e,t,r){var n=e*e,o=t*t;return Math.sqrt(Math.max(0,r*(o-n)+n))},E=[a.e,a.j,a.f],O=function(e){return E.find((function(t){return t.test(e)}))},w=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},_=function(e,t){var r=O(e),o=O(t);Object(i.a)(!!r,w(e)),Object(i.a)(!!o,w(t)),Object(i.a)(r.transform===o.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var s=r.parse(e),u=o.parse(t),c=n({},s),l=r===a.f?g:S;return function(e){
for(var t in c)"alpha"!==t&&(c[t]=l(s[t],u[t],e));return c.alpha=g(s.alpha,u.alpha,e),r.transform(c)}},P=function(e){return"number"==typeof e},k=function(e,t){return function(r){return t(e(r))}},x=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(k)};function j(e,t){return P(e)?function(r){return g(e,t,r)}:a.b.test(e)?_(e,t):L(e,t)}var A=function(e,t){var r=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}(e),n=r.length,o=e.map((function(e,r){return j(e,t[r])}));return function(e){for(var t=0;t<n;t++)r[t]=o[t](e);return r}},T=function(e,t){var r=n(n({},e),t),o={};for(var i in r)void 0!==e[i]&&void 0!==t[i]&&(o[i]=j(e[i],t[i]));return function(e){for(var t in o)r[t]=o[t](e);return r}};function D(e){for(var t=a.c.parse(e),r=t.length,n=0,o=0,i=0,s=0;s<r;s++)n||"number"==typeof t[s]?n++:void 0!==t[s].hue?i++:o++;return{parsed:t,numNumbers:n,numRGB:o,numHSL:i}}var L=function(e,t){var r=a.c.createTransformer(t),n=D(e),o=D(t);return Object(i.a)(n.numHSL===o.numHSL&&n.numRGB===o.numRGB&&n.numNumbers>=o.numNumbers,"Complex values '"+e+"' and '"+t+"' too different to mix. Ensure all colors are of the same type."),x(A(n.parsed,o.parsed),r)},C=function(e,t){return function(r){return g(e,t,r)}};function R(e,t,r){for(var n,o=[],i=r||("number"==typeof(n=e[0])?C:"string"==typeof n?a.b.test(n)?_:L:Array.isArray(n)?A:"object"===u(n)?T:void 0),s=e.length-1,c=0;c<s;c++){var l=i(e[c],e[c+1]);if(t){var p=Array.isArray(t)?t[c]:t;l=x(p,l)}o.push(l)}return o}function I(e,t,r){var n=void 0===r?{}:r,o=n.clamp,a=void 0===o||o,s=n.ease,u=n.mixer,l=e.length;Object(i.a)(l===t.length,"Both input and output ranges must be the same length"),Object(i.a)(!s||!Array.isArray(s)||s.length===l-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[l-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var p=R(t,s,u),d=2===l?function(e,t){var r=e[0],n=e[1],o=t[0];return function(e){return o(b(r,n,e))}}(e,p):function(e,t){var r=e.length,n=r-1;return function(o){var i=0,a=!1;if(o<=e[0]?a=!0:o>=e[n]&&(i=n-1,a=!0),!a){for(var s=1;s<r&&!(e[s]>o||s===n);s++);i=s-1}var u=b(e[i],e[i+1],o);return t[i](u)}}(e,p);return a?function(t){return d(c(e[0],e[l-1],t))}:d}var N=function(e){return function(t){return 1-e(1-t)}},M=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},U=function(e){return e},B=function(e){return function(t){return Math.pow(t,e)}}(2),F=N(B),V=M(B);function H(e,t){return e.map((function(){return t||V})).splice(0,e.length-1)}function q(e){var t=e.from,r=void 0===t?0:t,n=e.to,o=void 0===n?1:n,i=e.ease,a=e.offset,s=e.duration,u=void 0===s?300:s,c={done:!1,value:r},l=Array.isArray(o)?o:[r,o],p=function(e,t){return e.map((function(e){return e*t}))}(a&&a.length===l.length?a:function(e){var t=e.length;return e.map((function(e,r){return 0!==r?r/(t-1):0}))}(l),u);function d(){return I(p,l,{ease:Array.isArray(i)?i:H(l,i)})}var f=d();return{next:function(e){return c.value=f(e),c.done=e>=u,c},flipTarget:function(){l.reverse(),f=d()}}}var z={keyframes:q,spring:m,decay:function(e){var t=e.velocity,r=void 0===t?0:t,n=e.from,o=void 0===n?0:n,i=e.power,a=void 0===i?.8:i,s=e.timeConstant,u=void 0===s?350:s,c=e.restDelta,l=void 0===c?.5:c,p=e.modifyTarget,d={done:!1,value:o},f=a*r,h=o+f,y=void 0===p?h:p(h);return y!==h&&(f=y-o),{next:function(e){var t=-f*Math.exp(-e/u);return d.done=!(t>l||t<-l),d.value=d.done?y:y+t,d},flipTarget:function(){}}}};function G(e,t,r){return void 0===r&&(r=0),e-t-r}var K=function(e){var t=function(t){var r=t.delta;return e(r)};return{start:function(){return s.b.update(t,!0,!0)},stop:function(){return s.a.update(t)}}};function W(e){
var t,r,i,a,s,u=e.from,c=e.autoplay,l=void 0===c||c,p=e.driver,d=void 0===p?K:p,f=e.elapsed,h=void 0===f?0:f,y=e.repeat,v=void 0===y?0:y,b=e.repeatType,g=void 0===b?"loop":b,S=e.repeatDelay,E=void 0===S?0:S,O=e.onPlay,w=e.onStop,_=e.onComplete,P=e.onRepeat,k=e.onUpdate,x=o(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),j=x.to,A=0,T=x.duration,D=!1,L=!0,C=function(e){if(Array.isArray(e.to))return q;if(z[e.type])return z[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?q:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?m:q}(x);(null===(r=(t=C).needsInterpolation)||void 0===r?void 0:r.call(t,u,j))&&(s=I([0,100],[u,j],{clamp:!1}),u=0,j=100);var R=C(n(n({},x),{from:u,to:j}));function N(){A++,"reverse"===g?h=function(e,t,r,n){return void 0===r&&(r=0),void 0===n&&(n=!0),n?G(t+-e,t,r):t-(e-t)+r}(h,T,E,L=A%2==0):(h=G(h,T,E),"mirror"===g&&R.flipTarget()),D=!1,P&&P()}function M(e){if(L||(e=-e),h+=e,!D){var t=R.next(Math.max(0,h));a=t.value,s&&(a=s(a)),D=L?t.done:h<=0}null==k||k(a),D&&(0===A&&(null!=T||(T=h)),A<v?function(e,t,r,n){return n?e>=t+r:e<=-r}(h,T,E,L)&&N():(i.stop(),_&&_()))}return l&&(null==O||O(),(i=d(M)).start()),{stop:function(){null==w||w(),i.stop()}}}var Q=function(e){return e},$=function(e){return void 0===e&&(e=Q),function(t,r,n){var o=r-n,i=-(0-t+1)*(0-e(Math.abs(o)));return o<=0?r+i:r-i}};Math.sqrt;var Y=function(e,t){return 1-3*t+3*e},J=function(e,t){return 3*t-6*e},X=function(e){return 3*e},Z=function(e,t,r){return((Y(t,r)*e+J(t,r))*e+X(t))*e},ee=function(e,t,r){return 3*Y(t,r)*e*e+2*J(t,r)*e+X(t)};var te=.1;function re(e,t,r,n){if(e===t&&r===n)return U;for(var o=new Float32Array(11),i=0;i<11;++i)o[i]=Z(i*te,e,r);function a(t){for(var n=0,i=1;10!==i&&o[i]<=t;++i)n+=te;--i;var a=n+(t-o[i])/(o[i+1]-o[i])*te,s=ee(a,e,r);return s>=.001?function(e,t,r,n){for(var o=0;o<8;++o){var i=ee(t,r,n);if(0===i)return t;t-=(Z(t,r,n)-e)/i}return t}(t,a,e,r):0===s?a:function(e,t,r,n,o){var i,a,s=0;do{(i=Z(a=t+(r-t)/2,n,o)-e)>0?r=a:t=a}while(Math.abs(i)>1e-7&&++s<10);return a}(t,n,n+te,e,r)}return function(e){return 0===e||1===e?e:Z(a(e),t,n)}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(13),i=r(49).f,a=r(35),s=r(52),u=r(80),c=r(172),l=r(116);e.exports=function(e,t){var r,p,d,f,h,y=e.target,m=e.global,v=e.stat;if(r=m?o:v?o[y]||u(y,{}):(o[y]||{}).prototype)for(p in t){if(f=t[p],d=e.noTargetGet?(h=i(r,p))&&h.value:r[p],!l(m?p:y+(v?".":"#")+p,e.forced)&&void 0!==d){if(n(f)===n(d))continue;c(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),s(r,p,f,e)}}},function(e,t,r){var n=r(23);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,r){var n=r(30),o=r(110),i=r(32),a=r(78),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(24);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=t;function i(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function a(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}
return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(146),o.base64=r(254),o.EventEmitter=r(255),o.float=r(256),o.inquire=r(147),o.utf8=r(257),o.pool=r(258),o.LongBits=r(259),o.global="undefined"!=typeof window&&window||"undefined"!=typeof global&&global||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=Boolean(o.global.process&&o.global.process.versions&&o.global.process.versions.node),o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"===n(e)},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==n(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=i,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=a,o.ProtocolError=a("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},function(e,t,r){e.exports=r(233)},function(e,t,r){var n=r(30),o=r(31),i=r(63);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(13);e.exports=n},function(e,t,r){"use strict";var n=r(22),o=r(76),i=r(20),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.a=function(e){if(!Object(i.a)(e)||"[object Object]"!=Object(n.a)(e))return!1;var t=Object(o.a)(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==l}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=l;var o=r(44);((l.prototype=Object.create(o.prototype)).constructor=l).className="Field";var i,a=r(27),s=r(45),u=r(16),c=/^required|optional|repeated$/;function l(e,t,r,n,i,a,l){if(u.isObject(n)?(l=i,a=n,n=i=void 0):u.isObject(i)&&(l=a,a=i,i=void 0),o.call(this,e,a),!u.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!u.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!u.isString(i))throw TypeError("extend must be a string");this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.required="required"===n,
this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!u.Long&&void 0!==s.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),o.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return u.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof a&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof a)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=u.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;u.base64.test(this.typeDefault)?u.base64.decode(this.typeDefault,e=u.newBuffer(u.base64.length(this.typeDefault)),0):u.utf8.write(this.typeDefault,e=u.newBuffer(u.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=u.emptyObject:this.repeated?this.defaultValue=u.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this)},l.d=function(e,t,r,o){return"function"==typeof t?t=u.decorateType(t).name:t&&"object"===n(t)&&(t=u.decorateEnum(t).name),function(n,i){u.decorateType(n.constructor).add(new l(i,e,t,r,{default:o}))}},l._configure=function(e){i=e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"c",(function(){return g}));var n=r(26),o=0,i="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),r=Math.max(0,16.7-(t-o));o=t+r,setTimeout((function(){return e(o)}),r)},a=1/60*1e3,s=!0,u=!1,c=!1,l={delta:0,timestamp:0},p=["read","update","preRender","render","postRender"],d=function(e){return u=e},f=p.reduce((function(e,t){return e[t]=function(e){var t=[],r=[],o=0,i=!1,a=0,s=new WeakSet,u=new WeakSet,c={cancel:function(e){var t=r.indexOf(e);s.add(e),-1!==t&&r.splice(t,1)},process:function(n){var l,p;if(i=!0,t=(l=[r,t])[0],(r=l[1]).length=0,o=t.length)for(a=0;a<o;a++)(p=t[a])(n),!0!==u.has(p)||s.has(p)||(c.schedule(p),e(!0));i=!1},schedule:function(e,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1),Object(n.a)("function"==typeof e,"Argument must be a function");var l=c&&i,p=l?t:r;s.delete(e),a&&u.add(e),-1===p.indexOf(e)&&(p.push(e),l&&(o=t.length))}};return c}(d),e}),{}),h=p.reduce((function(e,t){var r=f[t];return e[t]=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),u||b(),r.schedule(e,t,n),e},e}),{}),y=p.reduce((function(e,t){return e[t]=f[t].cancel,e}),{}),m=function(e){return f[e].process(l)},v=function e(t){u=!1,l.delta=s?a:Math.max(Math.min(t-l.timestamp,40),1),s||(a=l.delta),l.timestamp=t,c=!0,p.forEach(m),c=!1,u&&(s=!1,i(e))},b=function(){u=!0,s=!0,c||i(v)},g=function(){return l};t.b=h},function(e,t,r){
var n,o,i,a=r(112),s=r(13),u=r(24),c=r(35),l=r(25),p=r(81),d=r(82),f=r(65),h=s.WeakMap;if(a){var y=p.state||(p.state=new h),m=y.get,v=y.has,b=y.set;n=function(e,t){return t.facade=e,b.call(y,e,t),t},o=function(e){return m.call(y,e)||{}},i=function(e){return v.call(y,e)}}else{var g=d("state");f[g]=!0,n=function(e,t){return t.facade=e,c(e,g,t),t},o=function(e){return l(e,g)?e[g]:{}},i=function(e){return l(e,g)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},function(e,t,r){var n=r(84),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(179);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(9),o=r(1),i=function(){function e(e){var t=this;this.ppx=n.f,this.spx=n.g,this.cpx=n.a,this.mpx=n.e,this.fpx=n.c,this.ipx=n.d,this.isInstalled=!1,this.rootStore=e,this.rootPlayer=e.rootPlayer,this.nodes=this.rootStore.nodes,this.container=this.nodes.container,this.rootPlayer.minorNode.parentElement&&(this.auxiliary=this.rootPlayer.minorNode),this.log=this.rootPlayer.log,this.track=this.rootPlayer.track,this.dp={},this.dc={},this.rootStore.decomposeSubStores(this),this.rootPlayer.on(o.a.Player_Dispose,(function(){return t.onDispose()})),this.rootPlayer.once(o.a.Player_Disconnect,(function(){return t.onDisconnect()}))}return e.prototype.install=function(){this.isInstalled=!0},e.prototype.onDispose=function(){var e=this;Object.keys(this.dp).forEach((function(t){return"function"==typeof e.dp[t]&&e.dp[t]()})),this.dp={}},e.prototype.onDisconnect=function(){var e=this;Object.keys(this.dc).forEach((function(t){return"function"==typeof e.dc[t]&&e.dc[t]()})),this.dc={}},e}()},function(e,t,r){"use strict";e.exports=i,i.className="ReflectionObject";var n,o=r(16);function i(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}},function(e,t,r){"use strict";var n=t,o=r(16),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,r){"use strict"
;var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}var i,a=r(39),s=r(7),u=r(26),c=function(e){var t=e.onRead,r=e.onRender,n=e.uncachedValues,i=void 0===n?new Set:n,s=e.useCache,u=void 0===s||s;return function(e){void 0===e&&(e={});var n=o(e,[]),s={},c=[],l=!1;function p(e,t){e.startsWith("--")&&(n.hasCSSVariable=!0);var r=s[e];s[e]=t,s[e]!==r&&(-1===c.indexOf(e)&&c.push(e),l||(l=!0,a.b.render(d.render)))}var d={get:function(e,r){return void 0===r&&(r=!1),!r&&u&&!i.has(e)&&void 0!==s[e]?s[e]:t(e,n)},set:function(e,t){if("string"==typeof e)p(e,t);else for(var r in e)p(r,e[r]);return this},render:function(e){return void 0===e&&(e=!1),(l||!0===e)&&(r(s,n,c),l=!1,c.length=0),this}};return d}},l=/([a-z])([A-Z])/g,p=function(e){return e.replace(l,"$1-$2").toLowerCase()},d=new Map,f=new Map,h=["Webkit","Moz","O","ms",""],y=h.length,m="undefined"!=typeof document,v=function(e,t){return f.set(e,p(t))},b=function(e,t){void 0===t&&(t=!1);var r=t?f:d;return r.has(e)||(m?function(e){i=i||document.createElement("div");for(var t=0;t<y;t++){var r=h[t],n=""===r,o=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);if(o in i.style||n){if(n&&"clipPath"===e&&f.has(e))return;d.set(e,o),v(e,(n?"":"-")+p(o))}}}(e):function(e){v(e,e)}(e)),r.get(e)||e},g=["","X","Y","Z"],S=["translate","scale","rotate","skew","transformPerspective"].reduce((function(e,t){return g.reduce((function(e,r){return e.push(t+r),e}),e)}),["x","y","z"]),E=S.reduce((function(e,t){return e[t]=!0,e}),{});function O(e){return!0===E[e]}function w(e,t){return S.indexOf(e)-S.indexOf(t)}var _=new Set(["originX","originY","originZ"]);function P(e){return _.has(e)}var k=n(n({},s.g),{transform:Math.round}),x={color:s.b,backgroundColor:s.b,outlineColor:s.b,fill:s.b,stroke:s.b,borderColor:s.b,borderTopColor:s.b,borderRightColor:s.b,borderBottomColor:s.b,borderLeftColor:s.b,borderWidth:s.i,borderTopWidth:s.i,borderRightWidth:s.i,borderBottomWidth:s.i,borderLeftWidth:s.i,borderRadius:s.i,radius:s.i,borderTopLeftRadius:s.i,borderTopRightRadius:s.i,borderBottomRightRadius:s.i,borderBottomLeftRadius:s.i,width:s.i,maxWidth:s.i,height:s.i,maxHeight:s.i,size:s.i,top:s.i,right:s.i,bottom:s.i,left:s.i,padding:s.i,paddingTop:s.i,paddingRight:s.i,paddingBottom:s.i,paddingLeft:s.i,margin:s.i,marginTop:s.i,marginRight:s.i,marginBottom:s.i,marginLeft:s.i,rotate:s.d,rotateX:s.d,rotateY:s.d,rotateZ:s.d,scale:s.k,scaleX:s.k,scaleY:s.k,scaleZ:s.k,skew:s.d,skewX:s.d,skewY:s.d,distance:s.i,translateX:s.i,translateY:s.i,translateZ:s.i,x:s.i,y:s.i,z:s.i,perspective:s.i,opacity:s.a,originX:s.h,originY:s.h,originZ:s.i,zIndex:k,fillOpacity:s.a,strokeOpacity:s.a,numOctaves:k},j=function(e){return x[e]},A=function(e,t){return t&&"number"==typeof e?t.transform(e):e},T="scrollLeft",D="scrollTop",L=new Set([T,D]),C=new Set([T,D,"transform"]),R={x:"translateX",y:"translateY",z:"translateZ"};function I(e){return"function"==typeof e}function N(e,t,r,n,o,i,a,s){void 0===t&&(t=!0),void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===i&&(i=[]),void 0===a&&(a=!1),void 0===s&&(s=!0);var u=!0,c=!1,l=!1;for(var p in e){var d=e[p],f=j(p),h=A(d,f);O(p)?(c=!0,n[p]=h,i.push(p),u&&(f.default&&d!==f.default||!f.default&&0!==d)&&(u=!1)):P(p)?(o[p]=h,l=!0):C.has(p)&&I(h)||(r[b(p,a)]=h)}return(c||"function"==typeof e.transform)&&(r.transform=function(e,t,r,n,o,i){void 0===i&&(i=!0);var a="",s=!1;r.sort(w);for(var u=r.length,c=0;c<u;c++){var l=r[c];a+=(R[l]||l)+"("+t[l]+") ",s="z"===l||s}return!s&&o?a+="translateZ(0)":a=a.trim(),I(e.transform)?a=e.transform(t,n?"":a):i&&n&&(a="none"),a}(e,n,i,u,t,s)),
l&&(r.transformOrigin=(o.originX||"50%")+" "+(o.originY||"50%")+" "+(o.originZ||0)),r}function M(e){var t=void 0===e?{}:e,r=t.enableHardwareAcceleration,n=void 0===r||r,o=t.isDashCase,i=void 0===o||o,a=t.allowTransformNone,s=void 0===a||a,u={},c={},l={},p=[];return function(e){return p.length=0,N(e,n,u,c,l,p,i,s),u}}var U=c({onRead:function(e,t){var r=t.element,n=t.preparseOutput,o=j(e);if(O(e))return o&&o.default||0;if(L.has(e))return r[e];var i=window.getComputedStyle(r,null).getPropertyValue(b(e,!0))||0;return n&&o&&o.test(i)&&o.parse?o.parse(i):i},onRender:function(e,t,r){var n=t.element,o=t.buildStyles,i=t.hasCSSVariable;if(Object.assign(n.style,o(e)),i)for(var a=r.length,s=0;s<a;s++){var u=r[s];u.startsWith("--")&&n.style.setProperty(u,e[u])}-1!==r.indexOf(T)&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf(D)&&(n.scrollTop=e.scrollTop)},uncachedValues:L});var B=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),F=function(e,t){return s.i.transform(e*t)},V={x:0,y:0,width:0,height:0};function H(e,t,r){return"string"==typeof e?e:s.i.transform(t+r*e)}var q={enableHardwareAcceleration:!1,isDashCase:!1};function z(e,t,r,n,i,a){void 0===t&&(t=V),void 0===n&&(n=M(q)),void 0===i&&(i={style:{}}),void 0===a&&(a=!0);var s=e.attrX,u=e.attrY,c=e.originX,l=e.originY,d=e.pathLength,f=e.pathSpacing,h=void 0===f?1:f,y=e.pathOffset,m=void 0===y?0:y,v=n(o(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var b in v){if("transform"===b)i.style.transform=v[b];else i[a&&!B.has(b)?p(b):b]=v[b]}return(void 0!==c||void 0!==l||v.transform)&&(i.style.transformOrigin=function(e,t,r){return H(t,e.x,e.width)+" "+H(r,e.y,e.height)}(t,void 0!==c?c:.5,void 0!==l?l:.5)),void 0!==s&&(i.x=s),void 0!==u&&(i.y=u),void 0!==r&&void 0!==d&&(i[a?"stroke-dashoffset":"strokeDashoffset"]=F(-m,r),i[a?"stroke-dasharray":"strokeDasharray"]=F(d,r)+" "+F(h,r)),i}function G(e,t,r){void 0===r&&(r=!0);var n={style:{}},o=M(q);return function(i){return z(i,e,t,o,n,r)}}var K=c({onRead:function(e,t){var r=t.element;if(O(e=B.has(e)?e:p(e))){var n=j(e);return n&&n.default||0}return r.getAttribute(e)},onRender:function(e,t){var r=t.element,n=(0,t.buildAttrs)(e);for(var o in n)"style"===o?Object.assign(r.style,n.style):r.setAttribute(o,n[o])}}),W=c({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),Q=new WeakMap,$=function(e,t){var r,i,a,s;return e===window?r=W(e):!function(e){return e instanceof HTMLElement||"function"==typeof e.click}(e)?function(e){return e instanceof SVGElement||"ownerSVGElement"in e}(e)&&(a=function(e){try{return function(e){return"function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}(e)}catch(e){return{x:0,y:0,width:0,height:0}}}(i=e),s=function(e){return"path"===e.tagName}(i)&&i.getTotalLength?i.getTotalLength():void 0,r=K({element:i,buildAttrs:G(a,s)})):r=function(e,t){void 0===t&&(t={});var r=t.enableHardwareAcceleration,i=t.allowTransformNone,a=o(t,["enableHardwareAcceleration","allowTransformNone"]);return U(n({element:e,buildStyles:M({enableHardwareAcceleration:r,allowTransformNone:i}),preparseOutput:!0},a))}(e,t),Object(u.a)(void 0!==r,"No valid node provided. Node must be HTMLElement, SVGElement or window."),Q.set(e,r),r};t.a=function(e,t){return function(e,t){return Q.has(e)?Q.get(e):$(e,t)}("string"==typeof e?document.querySelector(e):e,t)}},function(e,t,r){"use strict";var n=r(231),o=r(232),i=r(136);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";(function(e){var n=r(74);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
var i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(e)&&e&&!e.nodeType&&e,s=a&&a.exports===i&&n.a.process,u=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=u}).call(this,r(98)(e))},function(e,t,r){var n=r(30),o=r(109),i=r(63),a=r(64),s=r(78),u=r(25),c=r(110),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,r){var n=r(13),o=r(35),i=r(25),a=r(80),s=r(111),u=r(40),c=u.get,l=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,s){var u,c=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(u=l(r)).source||(u.source=p.join("string"==typeof t?t:""))),e!==n?(c?!f&&e[t]&&(d=!0):delete e[t],d?e[t]=r:o(e,t,r)):d?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t,r){var n=r(13),o=r(129),i=r(130),a=r(35),s=r(19),u=s("iterator"),c=s("toStringTag"),l=i.values;for(var p in o){var d=n[p],f=d&&d.prototype;if(f){if(f[u]!==l)try{a(f,u,l)}catch(e){f[u]=l}if(f[c]||a(f,c,p),o[p])for(var h in i)if(f[h]!==i[h])try{a(f,h,i[h])}catch(e){f[h]=i[h]}}}},function(e,t,r){"use strict";e.exports=l;var n=r(44);((l.prototype=Object.create(n.prototype)).constructor=l).className="Namespace";var o,i,a,s=r(38),u=r(16);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function l(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=c,l.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>=t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?o.fromJSON:void 0!==t.values?a.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?s.fromJSON:l.fromJSON)(r[n],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof s&&void 0!==e.extend||e instanceof o||e instanceof a||e instanceof i||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),p(this)},l.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},l.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){
if(!((r=r.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else r.add(r=new l(n))}return t&&r.addJSON(t),r},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof l&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof l&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,r){o=e,i=t,a=r}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=new(function(){function e(e){this.ua=e}return Object.defineProperty(e.prototype,"linux",{get:function(){return{alike:/Linux/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tesla",{get:function(){return{alike:/Tesla/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iOS",{get:function(){return{alike:/Mac OS X[\s_\-\/](\d+[.\-_]\d+[.\-_]?\d*)/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"android",{get:function(){return{alike:/Android/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"windowsMobile",{get:function(){return{alike:/Windows Phone/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webkit",{get:function(){return{alike:/AppleWebKit/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gecko",{get:function(){return{alike:/Gecko/i.test(this.ua)&&!/KHTML/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trident",{get:function(){return{alike:/Trident/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msie",{get:function(){return{alike:window.ActiveXObject||"ActiveXObject"in window,ie11:/rv:11/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edge",{get:function(){return{alike:/Edge/i.test(this.ua),build16299:/(\s|^)edge\/16.16299(\s|$)/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"safari",{get:function(){var e=/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(this.ua)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(this.ua);return{alike:e,mseSupported:e&&/version\/1\d/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firefox",{get:function(){return{alike:/Firefox/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chrome",{get:function(){return{alike:/Chrome/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{get:function(){return{alike:/AppleWebKit.*Mobile.*/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iPhone",{get:function(){return{alike:/iPhone/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iPad",{get:function(){return{alike:/iPad/i.test(this.ua)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}},enumerable:!1,configurable:!0}),
Object.defineProperty(e.prototype,"microMessenger",{get:function(){return{alike:/MicroMessenger/i.test(this.ua)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"info",{get:function(){var e=/(chrome)[ \/]([\w.]+)/.exec(this.ua)||{},t=e[5]||e[3]||e[1]||null;return{browser:t,version:t?parseInt(e[4]||e[2]||"0",10):0}},enumerable:!1,configurable:!0}),e}())(navigator.userAgent.toLowerCase())},function(e,t,r){"use strict";var n=r(12),o=r(22),i=r(20);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e){return"symbol"==a(e)||Object(i.a)(e)&&"[object Symbol]"==Object(o.a)(e)},u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,p=/^0o[0-7]+$/i,d=parseInt;t.a=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(Object(n.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(n.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var r=l.test(e);return r||p.test(e)?d(e.slice(2),r?2:8):c.test(e)?NaN:+e}},function(e,t,r){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function s(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function u(e,t){for(var r={},n=[],o=0;o<e.length;o++){var i=e[o],u=t.base?i[0]+t.base:i[0],c=r[u]||0,l="".concat(u," ").concat(c);r[u]=c+1;var p=s(l),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(a[p].references++,a[p].updater(d)):a.push({identifier:l,updater:m(d,t),references:1}),n.push(l)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,p=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,y=0;function m(e,t){var r,n,o;if(t.singleton){var i=y++;r=h||(h=c(t)),n=d.bind(null,r,i,!1),o=d.bind(null,r,i,!0)}else r=c(t),n=f.bind(null,r,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var r=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var o=s(r[n]);a[o].references--}for(var i=u(e,t),c=0;c<r.length;c++){var l=s(r[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}r=i}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){
var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i="object"===("undefined"==typeof Reflect?"undefined":n(Reflect))?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==i&&e.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==t&&(i=function(r){e.removeListener(t,o),n(r)},e.once("error",i)),e.once(t,o)}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+n(e))}function p(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var o,i,a,s;if(l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=p(e))>0&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function y(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):v(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return p(this)},u.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var c=u.length,l=v(u,c);for(r=0;r<c;++r)a(l[r],this,t)}return!0
},u.prototype.addListener=function(e,t){return d(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return d(this,e,t,!0)},u.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var r,n,o,i,a;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},u.prototype.listeners=function(e){return y(this,e,!0)},u.prototype.rawListeners=function(e){return y(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(e,t,r){"use strict";var n=r(29),o=r(13),i=r(116),a=r(52),s=r(67),u=r(86),c=r(88),l=r(24),p=r(23),d=r(122),f=r(89),h=r(180);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),v=y?"set":"add",b=o[e],g=b&&b.prototype,S=b,E={},O=function(e){var t=g[e];a(g,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(i(e,"function"!=typeof b||!(m||g.forEach&&!p((function(){(new b).entries().next()})))))S=r.getConstructor(t,e,y,v),s.REQUIRED=!0;else if(i(e,!0)){var w=new S,_=w[v](m?{}:-0,1)!=w,P=p((function(){w.has(1)})),k=d((function(e){new b(e)})),x=!m&&p((function(){for(var e=new b,t=5;t--;)e[v](t,t);return!e.has(-0)}));k||((S=t((function(t,r){c(t,S,e);var n=h(new b,t,S);return null!=r&&u(r,n[v],{that:n,AS_ENTRIES:y}),n}))).prototype=g,g.constructor=S),(P||x)&&(O("delete"),O("has"),y&&O("get")),(x||_)&&O(v),m&&g.clear&&delete g.clear}return E[e]=S,n({global:!0,forced:S!=b},E),f(S,e),m||r.setStrong(S,e,y),S}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(77),o=r(51);e.exports=function(e){return n(o(e))}},function(e,t){e.exports={}},function(e,t,r){var n=r(36),o=r(13),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(65),i=r(24),a=r(25),s=r(31).f,u=r(83),c=r(177),l=u("meta"),p=0,d=Object.isExtensible||function(){return!0},f=function(e){s(e,l,{value:{objectID:"O"+ ++p,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){
if(!i(e))return"symbol"==n(e)?e:("string"==typeof e?"S":"P")+e;if(!a(e,l)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[l].objectID},getWeakData:function(e,t){if(!a(e,l)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[l].weakData},onFreeze:function(e){return c&&h.REQUIRED&&d(e)&&!a(e,l)&&f(e),e}};o[l]=!0},function(e,t,r){var n=r(51);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(87),o=r(52),i=r(186);n||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,r){var n=r(42),o=r(77),i=r(68),a=r(41),s=r(194),u=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,l=4==e,p=6==e,d=7==e,f=5==e||p;return function(h,y,m,v){for(var b,g,S=i(h),E=o(S),O=n(y,m,3),w=a(E.length),_=0,P=v||s,k=t?P(h,w):r||d?P(h,0):void 0;w>_;_++)if((f||_ in E)&&(g=O(b=E[_],_,S),e))if(t)k[_]=g;else if(g)switch(e){case 3:return!0;case 5:return b;case 6:return _;case 2:u.call(k,b)}else switch(e){case 4:return!1;case 7:u.call(k,b)}return p?-1:c||l?l:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(e,t,r){var n=r(13),o=r(42),i=Function.call;e.exports=function(e,t,r){return o(i,n[e].prototype[t],r)}},function(e,t,r){"use strict";e.exports=a;var n=r(44);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var o=r(38),i=r(16);function a(e,t,r,o){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=o}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},a.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}s(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(57),o=r(9);function i(){return{timeStamp:0,lastUid:0,media:{quality:o.n,volume:o.p,nonzeroVol:o.p,hideBlackGap:!o.i,autoplay:o.h,handoff:o.m},dmSend:{upDm:!1,dmChecked:!0},blockList:[],dmSetting:{status:!0,dmSwitch:!0,aiSwitch:!0,aiLevel:3,preventshade:!1,dmask:!0,density:!1,typeTop:!0,typeScroll:!0,typeBottom:!0,typeColor:!0,typeSpecial:!0,opacity:.8,danmakuArea:50,speedplus:1,fontsize:1,fullscreensync:!0,speedSync:!1,fontfamily:n.a.linux.alike?"'Noto Sans CJK SC DemiLight'":"SimHei, 'Microsoft JhengHei'",bold:!n.a.iOS.alike,fontborder:0},basEditorData:{},audioEffect:null,boceTimes:[],interaction:{rookieGuide:null}}}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o="object"==("undefined"==typeof global?"undefined":n(global))&&global&&global.Object===Object&&global;t.a=o},function(e,t,r){"use strict";(function(e){
var n=r(11),o=r(162);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a="object"==("undefined"==typeof exports?"undefined":i(exports))&&exports&&!exports.nodeType&&exports,s=a&&"object"==i(e)&&e&&!e.nodeType&&e,u=s&&s.exports===a?n.a.Buffer:void 0,c=(u?u.isBuffer:void 0)||o.a;t.a=c}).call(this,r(98)(e))},function(e,t,r){"use strict";var n=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);t.a=n},function(e,t,r){var n=r(23),o=r(50),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,r){var n=r(24);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(13),o=r(24),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(13),o=r(35);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},function(e,t,r){var n=r(13),o=r(80),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},function(e,t,r){var n=r(113),o=r(83),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(32),i=r(117),a=r(41),s=r(42),u=r(119),c=r(121),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var p,d,f,h,y,m,v,b=r&&r.that,g=!(!r||!r.AS_ENTRIES),S=!(!r||!r.IS_ITERATOR),E=!(!r||!r.INTERRUPTED),O=s(t,b,1+g+E),w=function(e){return p&&c(p),new l(!0,e)},_=function(e){return g?(o(e),E?O(e[0],e[1],w):O(e[0],e[1])):E?O(e,w):O(e)};if(S)p=e;else{if("function"!=typeof(d=u(e)))throw TypeError("Target is not iterable");if(i(d)){for(f=0,h=a(e.length);h>f;f++)if((y=_(e[f]))&&y instanceof l)return y;return new l(!1)}p=d.call(e)}for(m=p.next;!(v=m.call(p)).done;){try{y=_(v.value)}catch(e){throw c(p),e}if("object"==n(y)&&y&&y instanceof l)return y}return new l(!1)}},function(e,t,r){var n={};n[r(19)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},function(e,t,r){var n=r(31).f,o=r(25),i=r(19)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n,o=r(32),i=r(182),a=r(85),s=r(65),u=r(126),c=r(79),l=r(82),p=l("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=n?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};s[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=o(e),r=new d,d.prototype=null,r[p]=e):r=h(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(52);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},function(e,t,r){"use strict"
;var n=r(29),o=r(183),i=r(128),a=r(123),s=r(89),u=r(35),c=r(52),l=r(19),p=r(53),d=r(54),f=r(127),h=f.IteratorPrototype,y=f.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",b="values",g="entries",S=function(){return this};e.exports=function(e,t,r,l,f,E,O){o(r,t,l);var w,_,P,k=function(e){if(e===f&&D)return D;if(!y&&e in A)return A[e];switch(e){case v:case b:case g:return function(){return new r(this,e)}}return function(){return new r(this)}},x=t+" Iterator",j=!1,A=e.prototype,T=A[m]||A["@@iterator"]||f&&A[f],D=!y&&T||k(f),L="Array"==t&&A.entries||T;if(L&&(w=i(L.call(new e)),h!==Object.prototype&&w.next&&(p||i(w)===h||(a?a(w,h):"function"!=typeof w[m]&&u(w,m,S)),s(w,x,!0,!0),p&&(d[x]=S))),f==b&&T&&T.name!==b&&(j=!0,D=function(){return T.call(this)}),p&&!O||A[m]===D||u(A,m,D),d[t]=D,f)if(_={values:k(b),keys:E?D:k(v),entries:k(g)},O)for(P in _)(y||j||!(P in A))&&c(A,P,_[P]);else n({target:t,proto:!0,forced:y||j},_);return _}},function(e,t,r){"use strict";var n=r(187).charAt,o=r(40),i=r(92),a="String Iterator",s=o.set,u=o.getterFor(a);i(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=u(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t,r){var n=r(19),o=r(90),i=r(31),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,r){var n=r(50),o=r(13);e.exports="process"==n(o.process)},function(e,t,r){var n=r(30),o=r(23),i=r(25),a=Object.defineProperty,s={},u=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var r=[][e],c=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:u,p=i(t,1)?t[1]:void 0;return s[e]=!!r&&!o((function(){if(c&&!n)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:u}):e[1]=1,r.call(e,l,p)}))}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],o=0;o<t.length;++o)for(var a=t[o],s=a.obj[a.prop],u=Object.keys(s),c=0;c<u.length;++c){var l=u[c],p=s[l];"object"===n(p)&&null!==p&&-1===r.indexOf(p)&&(t.push({obj:s,prop:l}),r.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var o=e;if("symbol"===n(e)?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===r)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",s=0;s<o.length;++s){var u=o.charCodeAt(s);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122?i+=o.charAt(s):u<128?i+=a[u]:u<2048?i+=a[192|u>>6]+a[128|63&u]:u<55296||u>=57344?i+=a[224|u>>12]+a[128|u>>6&63]+a[128|63&u]:(s+=1,u=65536+((1023&u)<<10|1023&o.charCodeAt(s)),i+=a[240|u>>18]+a[128|u>>12&63]+a[128|u>>6&63]+a[128|63&u])}return i},isBuffer:function(e){return!(!e||"object"!==n(e))&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},
merge:function e(t,r,a){if(!r)return t;if("object"!==n(r)){if(i(t))t.push(r);else{if(!t||"object"!==n(t))return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==n(t))return[t].concat(r);var u=t;return i(t)&&!i(r)&&(u=s(t,a)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var s=t[i];s&&"object"===n(s)&&r&&"object"===n(r)?t[i]=e(s,r,a):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,n){var i=r[n];return o.call(t,n)?t[n]=e(t[n],i,a):t[n]=i,t}),u)}}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";e.exports=p;var n,o=r(33),i=o.LongBits,a=o.base64,s=o.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}function d(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=o.Buffer?function(){return(p.create=function(){return new n})()}:function(){return new p},p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},f.prototype=Object.create(u.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(h,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=i.from(e);return this._push(h,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(h,t.length(),t)},p.prototype.bool=function(e){return this._push(d,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(o.isString(e)){var r=p.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},p.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){n=e}},function(e,t,r){"use strict";e.exports=u;var n,o=r(33),i=o.LongBits,a=o.utf8;function s(e,t){
return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")};function p(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=o.Buffer?function(e){return(u.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l,u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){n=e;var t=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,r){"use strict";e.exports=b;var n=r(56);((b.prototype=Object.create(n.prototype)).constructor=b).className="Type";var o=r(27),i=r(72),a=r(38),s=r(102),u=r(103),c=r(105),l=r(100),p=r(99),d=r(16),f=r(150),h=r(151),y=r(152),m=r(153),v=r(154);function b(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,
this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function g(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,c,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),b.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var r=new b(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var c=Object.keys(t.fields),l=0;l<c.length;++l)r.add((void 0!==t.fields[c[l]].keyType?s.fromJSON:a.fromJSON)(c[l],t.fields[c[l]]));if(t.oneofs)for(c=Object.keys(t.oneofs),l=0;l<c.length;++l)r.add(i.fromJSON(c[l],t.oneofs[c[l]]));if(t.nested)for(c=Object.keys(t.nested),l=0;l<c.length;++l){var p=t.nested[c[l]];r.add((void 0!==p.id?a.fromJSON:void 0!==p.fields?b.fromJSON:void 0!==p.values?o.fromJSON:void 0!==p.methods?u.fromJSON:n.fromJSON)(c[l],p))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),g(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),g(this)):n.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),g(this)}
if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),g(this)}return n.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:p,types:t,util:d}),this.decode=h(this)({Reader:l,types:t,util:d}),this.verify=y(this)({types:t,util:d}),this.fromObject=m.fromObject(this)({types:t,util:d}),this.toObject=m.toObject(this)({types:t,util:d});var n=v[e];if(n){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(o),o.toObject=this.toObject,this.toObject=n.toObject.bind(o)}return this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){d.decorateType(t,e)}}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=s;var o=r(38);((s.prototype=Object.create(o.prototype)).constructor=s).className="MapField";var i=r(45),a=r(16);function s(e,t,r,n,i,s){if(o.call(this,e,t,n,void 0,void 0,i,s),!a.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},s.d=function(e,t,r){return"function"==typeof r?r=a.decorateType(r).name:r&&"object"===n(r)&&(r=a.decorateEnum(r).name),function(n,o){a.decorateType(n.constructor).add(new s(o,e,t,r))}}},function(e,t,r){"use strict";e.exports=s;var n=r(56);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var o=r(104),i=r(16),a=r(148);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var r=new s(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(o.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof o?(this.methods[e.name]=e,e.parent=this,
u(this)):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof o){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,r){for(var n,o=new a.Service(e,t,r),s=0;s<this.methodsArray.length;++s){var u=i.lcFirst((n=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");o[u]=i.codegen(["r","c"],i.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return o}},function(e,t,r){"use strict";e.exports=i;var n=r(44);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var o=r(16);function i(e,t,r,i,a,s,u,c){if(o.isObject(a)?(u=a,a=s=void 0):o.isObject(s)&&(u=s,s=void 0),void 0!==t&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(r))throw TypeError("requestType must be a string");if(!o.isString(i))throw TypeError("responseType must be a string");n.call(this,e,u),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=i,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},function(e,t,r){"use strict";e.exports=o;var n=r(33);function o(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},function(e,t,r){"use strict";e.exports=p;var n=r(56);((p.prototype=Object.create(n.prototype)).constructor=p).className="Root";var o,i,a,s=r(38),u=r(27),c=r(72),l=r(16);function p(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}p.fromJSON=function(e,t){return t||(t=new p),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},p.prototype.resolvePath=l.path.resolve,p.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return l.asPromise(e,o,t,r);var s=n===d;function u(e,t){if(n){var r=n;if(n=null,s)throw e;r(e,t)}}function c(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){i.filename=e;var n,a=i(t,o,r),c=0;if(a.imports)for(;c<a.imports.length;++c)(n=o.resolvePath(e,a.imports[c]))&&p(n);if(a.weakImports)for(c=0;c<a.weakImports.length;++c)(n=o.resolvePath(e,a.weakImports[c]))&&p(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){u(e)}s||f||u(null,o)}function p(e,t){var r=e.lastIndexOf("google/protobuf/");if(r>-1){var i=e.substring(r);i in a&&(e=i)}if(!(o.files.indexOf(e)>-1))if(o.files.push(e),e in a)s?c(e,a[e]):(++f,setTimeout((function(){--f,c(e,a[e])})));else if(s){var p;try{p=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||u(e))}c(e,p)}else++f,l.fetch(e,(function(r,i){--f,n&&(r?t?f||u(null,o):u(r):c(e,i))}))}var f=0;l.isString(t)&&(t=[t]);for(var h,y=0;y<t.length;++y)(h=o.resolvePath("",t[y]))&&p(h);if(s)return o;f||u(null,o)},
p.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function h(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new s(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}p.prototype._handleAdd=function(e){if(e instanceof s)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof u)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof o)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},p.prototype._handleRemove=function(e){if(e instanceof s){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof u)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},p._configure=function(e,t,r){o=e,i=t,a=r}},function(e,t,r){"use strict";var n=r(60),o=r.n(n)()((function(e){return e[1]}))
;o.push([e.i,'@-webkit-keyframes bpx-animation-loading{0%{background-position:0 0}6.25%{background-position:-320px 0}12.50%{background-position:-640px 0}18.75%{background-position:-960px 0}25.00%{background-position:-1280px 0}31.25%{background-position:-1600px 0}37.50%{background-position:-1920px 0}43.75%{background-position:-2240px 0}50.00%{background-position:-2560px 0}56.25%{background-position:-2880px 0}62.50%{background-position:-3200px 0}68.75%{background-position:-3520px 0}75.00%{background-position:-3840px 0}81.25%{background-position:-4160px 0}87.50%{background-position:-4480px 0}93.75%{background-position:0 -184px}100.00%{background-position:-320px -184px}}@keyframes bpx-animation-loading{0%{background-position:0 0}6.25%{background-position:-320px 0}12.50%{background-position:-640px 0}18.75%{background-position:-960px 0}25.00%{background-position:-1280px 0}31.25%{background-position:-1600px 0}37.50%{background-position:-1920px 0}43.75%{background-position:-2240px 0}50.00%{background-position:-2560px 0}56.25%{background-position:-2880px 0}62.50%{background-position:-3200px 0}68.75%{background-position:-3520px 0}75.00%{background-position:-3840px 0}81.25%{background-position:-4160px 0}87.50%{background-position:-4480px 0}93.75%{background-position:0 -184px}100.00%{background-position:-320px -184px}}.bpx-docker ol,.bpx-docker ul{list-style:none;outline:none}.bpx-docker table{border-collapse:collapse;border-spacing:0}.bpx-docker a,.bpx-docker input{text-decoration:none;outline:none}.bpx-docker{font-style:normal;font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,sans-serif;font-size:12px;line-height:1}.bpx-common-hidden{display:none!important}.bpx-common-opacity-60{opacity:.6}.bpx-common-opacity-0{opacity:0}.bpx-common-svg-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bpx-common-svg-icon svg{width:100%;height:100%;-webkit-transition:fill .15s ease-in-out;transition:fill .15s ease-in-out}.bpx-docker-major{position:relative;width:100%;height:100%}.bpx-docker-major.bpx-state-light-off:before{content:"";display:block;position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.9;z-index:900}.bpx-docker-major.bpx-state-light-off .bpx-player-container{-webkit-box-shadow:none;box-shadow:none;z-index:910}.bpx-docker-minor{position:relative;width:100%;min-height:46px;background-color:#f4f4f4}.bpx-docker-patch{position:absolute;top:0;left:0;width:0!important;height:0!important}.bpx-player-container{position:relative;width:100%;height:100%;-webkit-box-shadow:0 0 8px #e5e9ef;box-shadow:0 0 8px #e5e9ef}.bpx-player-container.bpx-state-disable-box-shadow{-webkit-box-shadow:none;box-shadow:none}.bpx-player-container.bpx-state-black-gap .bpx-player-video-wrap{border-color:transparent;border-style:solid;border-width:48px 7px}.bpx-player-container[data-screen=full],.bpx-player-container[data-screen=mini],.bpx-player-container[data-screen=web]{z-index:100000!important}.bpx-player-container[data-ctrl-hidden=true] .bpx-player-top-wrap{visibility:hidden;opacity:0}.bpx-player-container[data-ctrl-hidden=false] .bpx-player-top-wrap{visibility:visible;opacity:1}.bpx-player-container[data-screen=mini]{position:fixed!important;width:400px;height:225px;border-radius:4px;overflow:hidden}.bpx-player-primary-area{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.bpx-player-context-area{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;pointer-events:none}.bpx-player-video-area{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#000;background-color:var(--bpx-video-bgcolor,#000);overflow:hidden}.bpx-player-video-area.bpx-player-mouse-event{cursor:pointer}.bpx-player-sending-area[hidden]{display:none}.bpx-player-ending-panel{position:absolute;top:0;left:0;width:100%;height:100%;z-index:54}.bpx-player-ending-panel[hidden]{display:none}.bpx-player-share-panel{position:absolute;top:0;left:0;width:100%;height:100%;z-index:55}.bpx-player-share-panel[hidden]{display:none}.bpx-player-state-wrap{pointer-events:none}.bpx-player-control-wrap{position:absolute;left:0;bottom:0;width:100%;z-index:65}.bpx-player-control-wrap[hidden]{display:none}.bpx-player-sending-bar{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;height:46px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 12px 0 20px;background:#fff}.bpx-player-sending-bar-left{margin-right:10px;width:176px;height:22px;background-color:rgba(0,0,0,.04)}.bpx-player-sending-bar-right{height:22px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;background-color:rgba(0,0,0,.04)}.bpx-player-adv-dm-wrap,.bpx-player-bas-dm-wrap,.bpx-player-row-dm-wrap{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;pointer-events:none;z-index:11;-webkit-mask-position:center;mask-position:center}.bpx-player-top-wrap{display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;top:0;left:0;width:100%;color:#fff;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;pointer-events:none;z-index:45}.bpx-player-container[data-screen=mini] .bpx-player-ending-panel,.bpx-player-container[data-screen=mini] .bpx-player-interaction-hidden,.bpx-player-container[data-screen=mini] .bpx-player-interaction-rookie-guide,.bpx-player-container[data-screen=mini] .bpx-player-interaction-story,.bpx-player-container[data-screen=mini] .bpx-player-share-panel{display:none!important}.bpx-player-loading-panel{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:56}.bpx-player-loading-panel.bpx-state-loading{display:block}.bpx-player-loading-panel-blur{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;pointer-events:none}.bpx-player-loading-panel-blur[hidden]{display:none}.bpx-player-loading-panel-blur:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.3)}.bpx-player-loading-panel-blur-detail{width:320px;height:184px;background:url(//s1.hdslb.com/bfs/static/player/img/ploading.png) no-repeat;-webkit-transform:scale(.5);transform:scale(.5);-webkit-animation:bpx-animation-loading .94s steps(1) infinite;animation:bpx-animation-loading .94s steps(1) infinite}.bpx-player-loading-panel-text{position:absolute;left:12px;right:12px;bottom:56px;color:hsla(0,0%,100%,.6);font-size:12px;line-height:1.6}.bpx-player-loading-panel-text[hidden]{display:none}.bpx-player-loading-panel-text-row{white-space:nowrap}.bpx-player-video-perch{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.bpx-player-video-wrap{display:block;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.bpx-player-video-wrap video{display:block;margin:auto;width:100%;height:100%}.bpx-player-state-buff-icon,.bpx-player-state-buff-text,.bpx-player-state-play{display:none}.bpx-state-paused .bpx-player-state-wrap{position:absolute;right:34px;bottom:50px;cursor:pointer;pointer-events:none;z-index:48}.bpx-state-paused .bpx-player-state-play{display:block;width:64px;height:64px;background:url(//s1.hdslb.com/bfs/static/player/img/play.svg) 50% no-repeat}.bpx-state-paused[data-screen=full] .bpx-player-state-wrap,.bpx-state-paused[data-screen=web] .bpx-player-state-wrap{bottom:80px}.bpx-state-no-cursor .bpx-player-video-perch{cursor:none}.bpx-state-mirror video{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.bpx-state-buff .bpx-player-state-wrap{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;left:0;top:0;width:100%;height:100%;z-index:48}.bpx-state-buff .bpx-player-state-buff-icon{display:block;width:24px;height:24px}.bpx-state-buff .bpx-player-state-buff-text{display:block;line-height:1;font-size:14px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.7);margin-top:8px}',""]),
t.a=o},function(e,t,r){"use strict";var n=r(60),o=r.n(n)()((function(e){return e[1]}));o.push([e.i,".bpx-legacy-browser-container{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;font-size:16px;text-align:center;background-color:#000}.bpx-legacy-browser-image{margin-bottom:1em;width:60%;max-width:300px}.bpx-legacy-browser-text{margin:0;line-height:2}",""]),t.a=o},function(e,t,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},function(e,t,r){var n=r(30),o=r(23),i=r(79);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(81),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},function(e,t,r){var n=r(13),o=r(111),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,r){var n=r(53),o=r(81);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(25),o=r(64),i=r(175).indexOf,a=r(65);e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)!n(a,r)&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(23),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},function(e,t,r){var n=r(19),o=r(54),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,r){var n=r(23);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(e,t,r){var n=r(120),o=r(54),i=r(19)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){var n=r(87),o=r(50),i=r(19)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},function(e,t,r){var n=r(32);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},function(e,t,r){var n=r(19)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},function(e,t,r){var n=r(32),o=r(181);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},function(e,t,r){"use strict";var n=r(31).f,o=r(90),i=r(91),a=r(42),s=r(88),u=r(86),c=r(92),l=r(185),p=r(30),d=r(67).fastKey,f=r(40),h=f.set,y=f.getterFor;e.exports={getConstructor:function(e,t,r,c){var l=e((function(e,n){s(e,l,t),h(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),p||(e.size=0),null!=n&&u(n,e[c],{that:e,AS_ENTRIES:r})})),f=y(t),m=function(e,t,r){var n,o,i=f(e),a=v(e,t);return a?a.value=r:(i.last=a={index:o=d(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),p?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},v=function(e,t){var r,n=f(e),o=d(t)
;if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==t)return r};return i(l.prototype,{clear:function(){for(var e=f(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t=this,r=f(t),n=v(t,e);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),p?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=f(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),i(l.prototype,r?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),p&&n(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",o=y(t),i=y(n);c(e,t,(function(e,t){h(this,{type:n,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){var n=r(114),o=r(85);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,r){var n=r(66);e.exports=n("document","documentElement")},function(e,t,r){"use strict";var n,o,i,a=r(128),s=r(35),u=r(25),c=r(19),l=r(53),p=c("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(n=o):d=!0),null==n&&(n={}),l||u(n,p)||s(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},function(e,t,r){var n=r(25),o=r(68),i=r(82),a=r(184),s=i("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){"use strict";var n=r(64),o=r(94),i=r(54),a=r(40),s=r(92),u="Array Iterator",c=a.set,l=a.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,r){"use strict";var n=r(91),o=r(67).getWeakData,i=r(32),a=r(24),s=r(88),u=r(86),c=r(70),l=r(25),p=r(40),d=p.set,f=p.getterFor,h=c.find,y=c.findIndex,m=0,v=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},g=function(e,t){return h(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,c){var p=e((function(e,n){s(e,p,t),d(e,{type:t,id:m++,frozen:void 0}),null!=n&&u(n,e[c],{that:e,AS_ENTRIES:r})})),h=f(t),y=function(e,t,r){var n=h(e),a=o(i(t),!0);return!0===a?v(n).set(t,r):a[n.id]=r,e};return n(p.prototype,{delete:function(e){var t=h(this);if(!a(e))return!1;var r=o(e)
;return!0===r?v(t).delete(e):r&&l(r,t.id)&&delete r[t.id]},has:function(e){var t=h(this);if(!a(e))return!1;var r=o(e);return!0===r?v(t).has(e):r&&l(r,t.id)}}),n(p.prototype,r?{get:function(e){var t=h(this);if(a(e)){var r=o(e);return!0===r?v(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return y(this,e,t)}}:{add:function(e){return y(this,e,!0)}}),p}}},function(e,t,r){var n=r(204);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(e,t,r){var n=r(220);e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,r){var n=r(19)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,r){"use strict";var n=r(70).forEach,o=r(230),i=r(96),a=o("forEach"),s=i("forEach");e.exports=a&&s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(97),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:a.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},a)},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(21);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var n=r(21),o=r(238),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=r(141)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(i)})),e.exports=u},function(e,t,r){"use strict";var n=r(21),o=r(239),i=r(138),a=r(241),s=r(244),u=r(245),c=r(142);e.exports=function(e){return new Promise((function(t,l){var p=e.data,d=e.headers;n.isFormData(p)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+btoa(h+":"+y)}var m=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),i(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};o(t,l,n),f=null}},f.onabort=function(){
f&&(l(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(c(t,e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var v=r(246),b=(e.withCredentials||u(m))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in f&&n.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===p&&(p=null),f.send(p)}))}},function(e,t,r){"use strict";var n=r(240);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},function(e,t,r){"use strict";var n=r(21);e.exports=function(e,t){t=t||{};var r={},o=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(o,(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(i,(function(o){n.isObject(t[o])?r[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:n.isObject(e[o])?r[o]=n.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])})),n.forEach(a,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var s=o.concat(i).concat(a),u=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return n.forEach(u,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";t.Service=r(262)},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(i.compareFieldsById),u=0;u<s.length;++u){var c=s[u].resolve(),l=e._fieldsArray.indexOf(c),p=c.resolvedType instanceof n?"int32":c.type,d=o.basic[p];t="m"+i.safeProp(c.name),c.map?(r("if(%s!=null&&m.hasOwnProperty(%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|o.mapKey[c.keyType],c.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,p,t),
r("}")("}")):c.repeated?(r("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==o.packed[p]?r("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",p,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===d?a(r,c,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(c.id<<3|d)>>>0,p,t)),r("}")):(c.optional&&r("if(%s!=null&&m.hasOwnProperty(%j))",t,c.name),void 0===d?a(r,c,l,t):r("w.uint32(%i).%s(%s)",(c.id<<3|d)>>>0,p,t))}return r("return w")};var n=r(27),o=r(45),i=r(16);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},function(e,t,r){"use strict";e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var s=e._fieldsArray[r].resolve(),u=s.resolvedType instanceof n?"int32":s.type,c="m"+i.safeProp(s.name);t("case %i:",s.id),s.map?(t("r.skip().pos++")("if(%s===util.emptyObject)",c)("%s={}",c)("k=r.%s()",s.keyType)("r.pos++"),void 0!==o.long[s.keyType]?void 0===o.basic[u]?t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',c,r):t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',c,u):void 0===o.basic[u]?t("%s[k]=types[%i].decode(r,r.uint32())",c,r):t("%s[k]=r.%s()",c,u)):s.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==o.packed[u]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,u)("}else"),void 0===o.basic[u]?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,r):t("%s.push(r.%s())",c,u)):void 0===o.basic[u]?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,r):t("%s=r.%s()",c,u),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",a(l))}return t("return m")};var n=r(27),o=r(45),i=r(16);function a(e){return"missing required '"+e.name+"'"}},function(e,t,r){"use strict";e.exports=function(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var u=0;u<e.fieldsArray.length;++u){var c=e._fieldsArray[u].resolve(),l="m"+o.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",i(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),s(t,c,"k[i]"),a(t,c,u,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",i(c,"array"))("for(var i=0;i<%s.length;++i){",l),a(t,c,u,l+"[i]")("}");else{if(c.partOf){var p=o.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",p)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",p)}a(t,c,u,l)}c.optional&&t("}")}return t("return null")};var n=r(27),o=r(16);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,o){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",o)("default:")("return%j",i(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),s=0;s<a.length;++s)e("case %i:",t.resolvedType.values[a[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,o)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":
e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",i(t,"buffer"))}return e}function s(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}},function(e,t,r){"use strict";var n=t,o=r(27),i=r(16);function a(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(d%s){",n);for(var i=t.resolvedType.values,a=Object.keys(i),s=0;s<a.length;++s)t.repeated&&i[a[s]]===t.typeDefault&&e("default:"),e("case%j:",a[s])("case %i:",i[a[s]])("m%s=%j",n,i[a[s]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function s(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof o?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var s=t[n].resolve(),u=i.safeProp(s.name);s.map?(r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),a(r,s,n,u+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),a(r,s,n,u+"[i]")("}")("}")):(s.resolvedType instanceof o||r("if(d%s!=null){",u),a(r,s,n,u),s.resolvedType instanceof o||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],u=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?n:t[c].map?a:u).push(t[c]);if(n.length){
for(r("if(o.arrays||o.defaults){"),c=0;c<n.length;++c)r("d%s=[]",i.safeProp(n[c].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),c=0;c<a.length;++c)r("d%s={}",i.safeProp(a[c].name));r("}")}if(u.length){for(r("if(o.defaults){"),c=0;c<u.length;++c){var l=u[c],p=i.safeProp(l.name);if(l.resolvedType instanceof o)r("d%s=o.enums===String?%j:%j",p,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",p)("}else")("d%s=o.longs===String?%j:%i",p,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",p,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",p,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",p,p)("}")}else r("d%s=%j",p,l.typeDefault)}r("}")}var f=!1;for(c=0;c<t.length;++c){l=t[c];var h=e._fieldsArray.indexOf(l);p=i.safeProp(l.name);l.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",p,p)("d%s={}",p)("for(var j=0;j<ks2.length;++j){"),s(r,l,h,p+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",p,p)("d%s=[]",p)("for(var j=0;j<m%s.length;++j){",p),s(r,l,h,p+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",p,l.name),s(r,l,h,p),l.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},function(e,t,r){"use strict";var n=t,o=r(105);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+r,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=this.lookup(r);n&&(e=n.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof o){var i=e.$type.toObject(e,t);return i["@type"]=e.$type.fullName,i}return this.toObject(e,t)}}},function(e,t,r){"use strict";e.exports=f;var n=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,i=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,a=/^ *[*/]+ */,s=/^\s*\*?\/*/,u=/\n/g,c=/\s/,l=/\\(.?)/g,p={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return p[t]||""}}))}function f(e,t){e=e.toString();var r=0,l=e.length,p=1,f=null,h=null,y=0,m=!1,v=[],b=null;function g(e){return Error("illegal "+e+" (line "+p+")")}function S(t){return e.charAt(t)}function E(r,n){f=e.charAt(r++),y=p,m=!1;var o,i=r-(t?2:3);do{if(--i<0||"\n"===(o=e.charAt(i))){m=!0;break}}while(" "===o||"\t"===o);for(var c=e.substring(r,n).split(u),l=0;l<c.length;++l)c[l]=c[l].replace(t?s:a,"").trim();h=c.join("\n").trim()}function O(t){var r=w(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function w(e){for(var t=e;t<l&&"\n"!==S(t);)t++;return t}function _(){if(v.length>0)return v.shift();if(b)return function(){var t="'"===b?i:o;t.lastIndex=r-1;var n=t.exec(e);if(!n)throw g("string");return r=t.lastIndex,P(b),b=null,d(n[1])}();var a,s,u,f,h;do{if(r===l)return null;for(a=!1;c.test(u=S(r));)if("\n"===u&&++p,++r===l)return null;if("/"===S(r)){if(++r===l)throw g("comment");if("/"===S(r))if(t){if(f=r,h=!1,O(r)){h=!0;do{if((r=w(r))===l)break;r++}while(O(r))}else r=Math.min(l,w(r)+1);h&&E(f,r),p++,a=!0}else{for(h="/"===S(f=r+1);"\n"!==S(++r);)if(r===l)return null;++r,h&&E(f,r-1),++p,a=!0}else{if("*"!==(u=S(r)))return"/";f=r+1,h=t||"*"===S(f);do{if("\n"===u&&++p,++r===l)throw g("comment");s=u,u=S(r)}while("*"!==s||"/"!==u);++r,h&&E(f,r-2),a=!0}}}while(a);var y=r;if(n.lastIndex=0,!n.test(S(y++)))for(;y<l&&!n.test(S(y));)++y;var m=e.substring(r,r=y);return'"'!==m&&"'"!==m||(b=m),m}function P(e){v.push(e)}function k(){if(!v.length){var e=_();if(null===e)return null;P(e)}return v[0]}return Object.defineProperty({next:_,peek:k,push:P,skip:function(e,t){var r=k();if(r===e)return _(),!0
;if(!t)throw g("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var r=null;return void 0===e?y===p-1&&(t||"*"===f||m)&&(r=h):(y<e&&k(),y!==e||m||!t&&"/"!==f||(r=h)),r}},"line",{get:function(){return p}})}f.unescape=d},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return d}));var n,o=r(0),i=r(4),a=r(2),s=r(168),u=r(37),c=r(1),l=r(28),p=r(46);!function(e){e.weibo="weibo_web",e.tieba="tieba_web",e.qzone="qzone_web",e.qq="qq_web",e.link="copy_web",e.qrcode="weixin_web"}(n||(n={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[ShareStore]",t.config={url:"",title:"",pic:"",description:"",iframeSrc:"",weiboTag:"#bilibili#",hideBackground:!1},t}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{opened:!1,backgroundImage:null}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return-1===this.config.url.indexOf("?")?this.config.url+"?share_source=":this.config.url+"&share_source="},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.config.title.substr(0,120)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pic",{get:function(){return this.config.pic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.config.description.substr(0,120)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iframeSrc",{get:function(){return this.config.iframeSrc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weiboTag",{get:function(){return this.config.weiboTag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBackground",{get:function(){return this.config.hideBackground},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this.config.hideBackground?null:this.state.backgroundImage},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.openedChange=Object(a.i)((function(){return t.state.opened}),(function(e){queueMicrotask((function(){t.rootPlayer.isInitialized&&(e?(t.log.i(t.tag,"Open SharePanel"),t.setBackgroundImage(),Object(l.a)({from:{opacity:0},to:{opacity:1},duration:250,ease:Object(l.b)(.02,.01,.47,1),onPlay:function(){t.nodes.sharePanel.hidden=!e},onUpdate:function(e){Object(p.a)(t.nodes.sharePanel).set(e)}})):(t.log.i(t.tag,"Close SharePanel"),Object(l.a)({from:{opacity:1},to:{opacity:0},duration:250,ease:Object(l.b)(.02,.01,.47,1),onUpdate:function(e){Object(p.a)(t.nodes.sharePanel).set(e)},onComplete:function(){t.nodes.sharePanel.hidden=!e}})),t.rootPlayer.emit(c.a.Player_SharePanel_Change,new CustomEvent(c.a.Player_SharePanel_Change,{detail:{opened:e}})))}))})),this.rootPlayer.on(c.a.Player_Play,(function(){return t.close()})),this.rootPlayer.on(c.a.Player_Seeking,(function(){return t.close()}))},t.prototype.onPrepared=function(){var t;e.prototype.onPrepared.call(this);var r=this.rootPlayer.window.document.title||this.controlStore.title,o=this.rootPlayer.window.location.protocol+"//www.bilibili.com/video/"+this.configStore.bvid,i=(null===(t=document.querySelector('meta[name="description"]'))||void 0===t?void 0:t.getAttribute("content"))||this.controlStore.title,a="//player.bilibili.com/player.html?bvid="+this.configStore.bvid+"&cid="+this.configStore.cid+"&page="+this.configStore.p+"&share_source="+n.link;this.setConfig({url:o,iframeSrc:a}),r&&this.setConfig({title:r}),i&&this.setConfig({description:i})},t.prototype.open=function(e){this.setState({opened:!0}),e&&this.setConfig(e)},t.prototype.close=function(){this.setState({opened:!1})},t.prototype.setBackgroundImage=function(){this.state.backgroundImage||this.setState({backgroundImage:this.apiStore.readFrameAsBlob({width:480}).catch(s.a)})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.close()},t.prototype.setConfig=function(e){
if(Object(u.a)(this.config)&&Object(u.a)(e))for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Object.prototype.hasOwnProperty.call(this.config,t)&&this.config[t]!==e[t]&&(this.config[t]=e[t])},Object(o.c)([a.g],t.prototype,"config",void 0),Object(o.c)([a.e],t.prototype,"url",null),Object(o.c)([a.e],t.prototype,"title",null),Object(o.c)([a.e],t.prototype,"pic",null),Object(o.c)([a.e],t.prototype,"description",null),Object(o.c)([a.e],t.prototype,"iframeSrc",null),Object(o.c)([a.e],t.prototype,"weiboTag",null),Object(o.c)([a.e],t.prototype,"hideBackground",null),Object(o.c)([a.e],t.prototype,"backgroundImage",null),Object(o.c)([a.b],t.prototype,"setConfig",null),t}(i.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return p}));var n,o=r(0),i=r(4),a=r(8),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpAdvVerify]",t.url="//api.bilibili.com/x/dm/adv/state",t}return Object(o.d)(t,e),t.prototype.r=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t=this;return Object(o.e)(this,(function(r){return[2,this.request({url:this.url,params:e,withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=e.data||{};return{hasBuy:t.hasBuy,confirm:t.confirm,accept:t.accept,coins:t.coins}},t}(a.a),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpAdvBuy]",t.url="//api.bilibili.com/x/dm/adv/buy",t}return Object(o.d)(t,e),t.prototype.r=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t=this;return Object(o.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){return e||{}},t}(a.a),c=r(2),l=r(5);!function(e){e[e.Hide=-3]="Hide",e[e.None=-2]="None",e[e.NeedBuy=-1]="NeedBuy",e[e.Request=0]="Request",e[e.Confirm=1]="Confirm",e[e.Verification=2]="Verification",e[e.Reject=3]="Reject"}(n||(n={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{advDm:null,testAdvDm:null,verifyState:n.None}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShow",{get:function(){var e=this.auxiliaryStore.state,t=e.currentMenu,r=e.isListSpread;return t===l.a.PANEL.DM_ADV&&r},enumerable:!1,configurable:!0}),t.prototype.send=function(e){return this.sendStore.send(e)},t.prototype.verify=function(){return new s(this.rootPlayer).r({aid:this.configStore.aid,cid:this.configStore.cid,mode:"sp"})},t.prototype.buyVerify=function(){return new u(this.rootPlayer).r({aid:this.configStore.aid,cid:this.configStore.cid,mode:"sp"})},Object(o.c)([c.e],t.prototype,"isShow",null),t}(i.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return g}));var n,o,i=r(0),a=r(4),s=r(8);!function(e){e[e.Default=0]="Default",e[e.Member=1]="Member",e[e.Manager=2]="Manager"}(o||(o={}));var u,c={image:"https://s1.hdslb.com/bfs/static/player/img/default.png",textColor:"ffffff",shadowColor:"222222",shadowOffsetX:0,shadowOffsetY:0,shadowRadius:0,progressColor:"00a1d6",progressShadowColor:"00a1d6"},l=((n={})[o.Default]="//api.bilibili.com/x/stein/edgeinfo_v2",n[o.Manager]="//manager.bilibili.co/x/stein/edgeinfo_v2/audit",n[o.Member]="//api.bilibili.com/x/stein/edgeinfo_v2/preview",n),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpInteraction]",t.retry=3,t}return Object(i.d)(t,e),t.prototype.r=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(r){return this.params=e,this.url=l[t],[2,this.interactionRequest(this.retry)]}))}))},t.prototype.interactionRequest=function(e){var t=this;return this.request({url:this.url,params:this.params,withCredentials:!0}).then((function(r){window.clearTimeout(t.timer);var n=r.data;return n&&0===n.code||99003===n.code?{body:t.parse(n),
response:r}:e?void(t.timer=window.setTimeout((function(){return t.interactionRequest(--e)}),1e3)):Promise.reject({code:n.code,message:n.message,url:t.url})}),(function(r){if(window.clearTimeout(t.timer),!e)return Promise.reject({code:-404,message:r.response&&r.response.status&&r.response.status.toString()||"",url:t.url});t.timer=window.setTimeout((function(){return t.interactionRequest(--e)}),1e3)}))},t.prototype.parse=function(e){if(0===e.code&&e.data){var t=e.data,r=[],n=[],o=void 0,i=c;if(t.story_list&&Array.isArray(t.story_list)&&t.story_list.map((function(e){r.push({edgeId:e.edge_id,title:e.title,cid:e.cid,cover:e.cover.replace("http:",""),startPos:e.start_pos,cursor:e.cursor,isCurrent:e.is_current})})),t.edges){var a=t.edges;if(a.skin){var s=a.skin;i={image:s.choice_image.replace(/^(https:)?\/\//,"https://"),textColor:s.title_text_color,shadowColor:s.title_shadow_color,shadowOffsetX:s.title_shadow_offset_x,shadowOffsetY:s.title_shadow_offset_y,shadowRadius:s.title_shadow_radius,progressColor:s.progressbar_color,progressShadowColor:s.progressbar_shadow_color}}a.questions&&Array.isArray(a.questions)&&a.questions.map((function(e){var t=[];e.choices&&Array.isArray(e.choices)&&e.choices.map((function(e){t.push({id:e.id,condition:e.condition,nativeAction:e.native_action,platformAction:e.platform_action,option:e.option,cid:e.cid,isDefault:e.is_default,x:e.x,y:e.y,width:e.width,height:e.height,textAlign:e.text_align,customUrl:e.custom_image_url,customWidth:e.custom_image_width,customHeight:e.custom_image_height,customRotate:e.custom_image_rotate,hidden:e.is_hidden,selected:e.selected,submited:e.submited})})),n.push({id:e.id,type:e.type,startTime:e.start_time,startTimeR:e.start_time_r,duration:e.duration,canPause:e.pause_video,title:e.title,color:e.title_color,fontsize:e.title_font_size,choices:t,fadeInTime:e.fade_in_time,fadeOutTime:e.fade_out_time})})),o={dimension:a.dimension,skin:i,questions:n}}return{code:e.code,data:{isLeaf:t.is_leaf,storyList:r,edgeId:t.edge_id,title:t.title,edges:o,buvid:t.buvid,hiddenVars:t.hidden_vars,hiddenVarsPreview:t.hidden_vars_preview,noTutorial:t.no_tutorial,noEvaluation:t.no_evaluation,noBacktracking:t.no_backtracking}}}return{code:e.code}},t.prototype.dispose=function(){e.prototype.dispose.call(this),window.clearTimeout(this.timer)},t}(s.a),d=r(2),f=r(3),h=r(290),y=r(57),m=r(284),v=r(37);!function(e){e[e.StoryList=0]="StoryList",e[e.TimeLine=1]="TimeLine",e[e.Question=2]="Question",e[e.Restart=3]="Restart",e[e.HistoryWatch=4]="HistoryWatch"}(u||(u={}));var b,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[InteractionStore]",t.preloadSymbol=!1,t.preloadAjax=[],t.interactionConfig={isLastPart:!1,portal:0,choiceSet:"",targetId:0,hiddenVars:null},t.hiddenMap={},t.preloadDataMap=new Map,t}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{disabled:!1,graphId:null,graphVersion:null,fetchStatus:null,needReload:!1,storyList:null,currentEdgeId:null,hiddenVars:null,questions:null,skin:null,dimension:null,questionShow:!1,noBacktracking:!1,noTutorial:!1,rookieGuide:!1,ctrl:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderInteractionTPL",{get:function(){return!!this.state.graphVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showStoryList",{get:function(){return this.state.storyList&&!this.state.noBacktracking?this.state.storyList:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHiddenVars",{get:function(){if(this.state.hiddenVars){var e=this.state.hiddenVars.filter((function(e){return e.is_show}));return e.length&&!this.state.noBacktracking?e:null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canPrefetchPlayurl",{get:function(){return this.state.questions&&!this.preloadSymbol?this.mediaStore.state.currentTime:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questions",{get:function(){var e=this.mediaStore.state.duration,t=[],r=null
;if(this.state.questions)for(var n=0;n<this.state.questions.length;n++){var o=this.state.questions[n];if(!o.startTime&&o.startTimeR&&this.mediaStore.state.duration&&(o.startTime=1e3*this.mediaStore.state.duration-o.startTimeR),4!==o.type)0===o.type&&o.duration<=0?r=Object(i.a)(Object(i.a)({},o),{start:e,end:e,autoSkip:!0}):o.duration<=0?r=Object(i.a)(Object(i.a)({},o),{start:e,end:e,autoSkip:!1}):t.push(Object(i.a)(Object(i.a)({},o),{start:1e3*e-o.duration,end:1e3*e,countdown:!0,autoSkip:!1}));else{var a=!1;!o.canPause&&o.duration>0&&(a=!0),t.push(Object(i.a)(Object(i.a)({},o),{start:o.startTime,end:o.startTime+o.duration,countdown:a,autoSkip:!1}))}}return{inEnd:r,inPlay:t}},enumerable:!1,configurable:!0}),t.prototype.onNavigate=function(){e.prototype.onNavigate.call(this),this.apiStore.state.isSameEpisode||this.reset()},t.prototype.onUserLoaded=function(t){var r=this;e.prototype.onUserLoaded.call(this,t);var n=t.interaction;t.mid&&this.clearSessionRecord(),this.state.disabled||((null==n?void 0:n.graph_version)?1==+n.need_reload?this.setState({needReload:!0}):this.setState({graphVersion:n.graph_version}):this.setState({graphVersion:null})),this.dp.fetchInteraction=Object(d.l)((function(){return!!r.state.graphVersion}),(function(){r.state.graphVersion&&r.fetchInteraction()})),this.dp.canPreloadPlayurl=Object(d.i)((function(){return r.canPrefetchPlayurl}),(function(){r.canPrefetchPlayurl&&r.state.questions.map((function(e){var t;4!==e.type&&(null===(t=e.choices)||void 0===t?void 0:t.length)&&r.prefetchPlayurl(e.choices).catch((function(e){return r.log.i(r.tag,e&&e.message)}))}))}))},t.prototype.getInteractionUrlKind=function(){var e;switch(this.configStore.channelKind){case f.a.Creator:e=o.Member;break;case f.a.Manager:e=o.Manager;break;case f.a.Default:default:e=o.Default}return e},t.prototype.getInteractionParams=function(){return{platform:"pc",graph_version:this.state.graphVersion,portal:this.interactionConfig.portal,screen:this.uiStore.screenKind,edge_id:this.state.currentEdgeId,choices:this.interactionConfig.choiceSet,aid:this.configStore.aid}},t.prototype.fetchInteraction=function(){var e=this;new p(this.rootPlayer).r(this.getInteractionParams(),this.getInteractionUrlKind()).then((function(t){var r,n,o;0===(null===(r=null==t?void 0:t.body)||void 0===r?void 0:r.code)&&(null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.data)?(e.parseBody(t.body.data),e.setState({fetchStatus:!0})):99003===(null===(o=null==t?void 0:t.body)||void 0===o?void 0:o.code)?e.setSeamless(!0):e.setState({graphVersion:null,fetchStatus:!1})})).catch((function(t){e.setState({graphVersion:null,fetchStatus:!1})}))},t.prototype.parseBody=function(e){var t=this;this.userStore.info.mid||(this.recordKey="bpx_interaction_"+(this.configStore.bvid||this.configStore.aid),this.setSessionRecord(e));var r=e.noEvaluation,n=e.noBacktracking,o=e.noTutorial,i=e.storyList,a=e.edges,s=e.isLeaf,u=e.hiddenVars,c=e.title;r?this.endingStore.setState({disabled:!0}):this.endingStore.setState({disabled:!1}),this.setState({noBacktracking:!!n,noTutorial:!!o}),Array.isArray(i)&&i.length&&(null===this.state.currentEdgeId&&this.setState({currentEdgeId:+i[0].edgeId}),this.setState({storyList:i})),Array.isArray(u)&&u.length&&(this.setState({hiddenVars:u}),u.map((function(e){t.hiddenMap[e.id_v2]=e.value}))),this.controlStore.setState({majorTitle:Object(h.a)(this.hiddenMap,c)}),Array.isArray(null==a?void 0:a.questions)&&a.questions.length&&this.setState({skin:a.skin,dimension:a.dimension,questions:a.questions}),this.setInteractionConfig({isLastPart:!!s})},t.prototype.setSessionRecord=function(e){try{var t={cid:this.configStore.cid,edgeId:e.edgeId,title:e.title,cover:"//i0.hdslb.com/bfs/steins-gate/"+this.configStore.cid+"_screenshot.jpg",startPos:0,cursor:0},r=this.interactionConfig.targetId,n={graphVersion:this.state.graphVersion,aid:this.configStore.aid,bvid:this.configStore.bvid,list:[]},o=this.getSessionRecord()||n;this.state.graphVersion===o.graphVersion?o.list[r]||(o.list[r]={ptr:r,story:t}):(this.setInteractionConfig({targetId:0}),r=0,o=Object.assign({},n,{list:[{ptr:r,
story:t}]})),this.interactionConfig.hiddenVars?e.hiddenVars=this.interactionConfig.hiddenVars:this.setInteractionConfig({hiddenVars:e.hiddenVars||null}),o.list[r].hiddenVars=this.interactionConfig.hiddenVars,o.list.filter((function(e){if(void 0!==e&&e.story)return e})),e.storyList=o.list.map((function(e){return e.story})),this.saveSessionRecord(o)}catch(e){console.warn(e)}},t.prototype.getSessionRecord=function(){return this.sessionStore.get().interaction[this.recordKey]},t.prototype.saveSessionRecord=function(e){var t;this.sessionStore.set({interaction:(t={},t[this.recordKey]=e,t)})},t.prototype.clearSessionRecord=function(){this.sessionStore.get().interaction[this.recordKey]&&delete this.sessionStore.get().interaction[this.recordKey]},t.prototype.updateSessionRecord=function(){var e,t,r=this;if(0===this.interactionConfig.portal&&!this.userStore.info.mid){var n=this.getSessionRecord(),o=null===(e=null==n?void 0:n.list)||void 0===e?void 0:e.length;if(o&&o>this.interactionConfig.targetId){var i=!0,a=n.list[this.interactionConfig.targetId+1];if(null===(t=null==a?void 0:a.hiddenVars)||void 0===t?void 0:t.length)for(var s=a.hiddenVars,u=0;u<s.length;u++)void 0!==this.hiddenMap[s[u].id_v2]&&this.hiddenMap[s[u].id_v2]===s[u].value||(i=!1);else i=!1;i||n.list.splice(this.interactionConfig.targetId+1,o)}this.saveSessionRecord(n),this.interactionConfig.targetId++,this.interactionConfig.hiddenVars&&this.interactionConfig.hiddenVars.map((function(e){void 0!==r.hiddenMap[e.id_v2]&&(e.value=r.hiddenMap[e.id_v2])}))}},t.prototype.setSeamless=function(e){var t=!!(y.a.msie.alike||y.a.edge.alike||y.a.msie.ie11);this.kernelStore.dashKernel&&!t&&this.kernelStore.dashKernel.setEndOfStreamState(e)},t.prototype.prefetchPlayurl=function(e){var t,r,n,o;return Object(i.b)(this,void 0,void 0,(function(){var a,s,u,c,l,p,d;return Object(i.e)(this,(function(i){switch(i.label){case 0:if(this.preloadSymbol||this.configStore.isChannel(f.a.Manager))return[2,!0];if(!(this.kernelStore.dashKernel&&this.kernelStore.dashKernel.getBufferLength("video")>9||this.mediaStore.state.duration-this.mediaStore.state.currentTime<9))return[3,9];this.preloadSymbol=!0,a=0,i.label=1;case 1:return a<e.length?(s=e[a].cid)?this.preloadDataMap.has(s)?[3,6]:[4,this.kernelStore.prefetchPlayUrl({cid:s,ep_id:this.configStore.episodeId}).promise]:[3,7]:[3,9];case 2:return(u=i.sent())?[4,this.kernelStore.prefetchAVData(u.body)]:[3,6];case 3:return c=i.sent(),(null===(t=c.vbHttp)||void 0===t?void 0:t.xhr)&&this.preloadAjax.push(c.vbHttp.xhr),(null===(r=c.abHttp)||void 0===r?void 0:r.xhr)&&this.preloadAjax.push(c.abHttp.xhr),[4,null===(n=c.vbHttp)||void 0===n?void 0:n.promise];case 4:return l=i.sent(),[4,null===(o=c.abHttp)||void 0===o?void 0:o.promise];case 5:p=i.sent(),d={type:"dash"},l&&(d=Object.assign({},d,{videoUrl:c.videoUrl,videoId:String(c.videoQn),video:l})),p&&(d=Object.assign({},d,{audioUrl:c.audioUrl,audioId:String(c.audioQn),audio:p})),this.preloadDataMap.set(s,{playurlData:u.raw,videoData:d}),i.label=6;case 6:return[3,8];case 7:this.log.e("illegal cid in prefetchPlayurl function"),i.label=8;case 8:return a++,[3,1];case 9:return[2]}}))}))},t.prototype.restart=function(){var e;if(this.state.graphVersion&&(null===(e=this.state.storyList)||void 0===e?void 0:e.length)){var t=this.state.storyList[0];this.callNextEdge({cid:+t.cid,edgeId:+t.edgeId,type:u.Restart},{portal:1,targetId:null,hiddenVars:null,choiceSet:""})}},t.prototype.timeline=function(){return this.state.graphVersion?this.state.storyList:null},t.prototype.isComplete=function(){return this.configStore.isInteraction?!!this.interactionStore.interactionConfig.isLastPart&&this.apiStore.isEnded(!1):null},t.prototype.jump=function(e){var t=this.timeline();if(Array.isArray(t)&&e<t.length){var r=t[e];this.callNextEdge({type:u.TimeLine,cid:r.cid,edgeId:r.edgeId,startPos:r.startPos},{portal:1,targetId:e,hiddenVars:null,choiceSet:""})}},t.prototype.setInteractionConfig=function(e){
if(Object(v.a)(this.interactionConfig)&&Object(v.a)(e))for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Object.prototype.hasOwnProperty.call(this.interactionConfig,t)&&this.interactionConfig[t]!==e[t]&&(this.interactionConfig[t]=e[t])},t.prototype.callNextEdge=function(e,t){var r;return this.log.i(this.tag,"[call next edge]",Object(m.a)(b||(b=Object(i.f)(["from: ",", config: ",", alt: ",""],["from: ",", config: ",", alt: ",""])),e.type,e,t)),this.setState({currentEdgeId:e.edgeId}),t&&this.setInteractionConfig(Object(i.a)({},t)),this.updateSessionRecord(),this.apiStore.reload({aid:this.configStore.aid,bvid:this.configStore.bvid,episodeId:this.configStore.episodeId,cid:e.cid,t:null!==(r=e.startPos/1e3)&&void 0!==r?r:null,stats:this.configStore.stats},{isSameEpisode:!0})},t.prototype.reset=function(){this.setState({currentEdgeId:null}),this.setInteractionConfig({isLastPart:!1,portal:0,choiceSet:"",targetId:0,hiddenVars:null})},t.prototype.onDispose=function(){this.preloadSymbol=!1,this.preloadAjax.length&&(this.preloadAjax.map((function(e){e.abort()})),this.preloadAjax=[]),e.prototype.onDispose.call(this,{rookieGuide:!0,currentEdgeId:!0})},t.prototype.onDisconnect=function(){this.preloadDataMap.clear()},Object(i.c)([d.e],t.prototype,"renderInteractionTPL",null),Object(i.c)([d.e],t.prototype,"showStoryList",null),Object(i.c)([d.e],t.prototype,"showHiddenVars",null),Object(i.c)([d.e],t.prototype,"canPrefetchPlayurl",null),t}(a.a)},function(e,t,r){"use strict";function n(e,t){var r="string"==typeof t?function(e){var t=e.indexOf("?"),r=e.indexOf("#");return-1===t?"":-1===r?e.slice(t,e.length):e.slice(t,r)}(t):self.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=r.substr(1).match(n);if(null!=o)try{return decodeURIComponent(o[2])}catch(e){return null}return null}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if(e)for(;e.lastChild;)e.removeChild(e.lastChild)}r.d(t,"a",(function(){return n}))},function(e,t,r){var n,o,i,a,s;n=r(249),o=r(145).utf8,i=r(250),a=r(145).bin,(s=function e(t,r){t.constructor==String?t=r&&"binary"===r.encoding?a.stringToBytes(t):o.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var s=n.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,p=-1732584194,d=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var h=e._ff,y=e._gg,m=e._hh,v=e._ii;for(f=0;f<s.length;f+=16){var b=c,g=l,S=p,E=d;c=h(c,l,p,d,s[f+0],7,-680876936),d=h(d,c,l,p,s[f+1],12,-389564586),p=h(p,d,c,l,s[f+2],17,606105819),l=h(l,p,d,c,s[f+3],22,-1044525330),c=h(c,l,p,d,s[f+4],7,-176418897),d=h(d,c,l,p,s[f+5],12,1200080426),p=h(p,d,c,l,s[f+6],17,-1473231341),l=h(l,p,d,c,s[f+7],22,-45705983),c=h(c,l,p,d,s[f+8],7,1770035416),d=h(d,c,l,p,s[f+9],12,-1958414417),p=h(p,d,c,l,s[f+10],17,-42063),l=h(l,p,d,c,s[f+11],22,-1990404162),c=h(c,l,p,d,s[f+12],7,1804603682),d=h(d,c,l,p,s[f+13],12,-40341101),p=h(p,d,c,l,s[f+14],17,-1502002290),c=y(c,l=h(l,p,d,c,s[f+15],22,1236535329),p,d,s[f+1],5,-165796510),d=y(d,c,l,p,s[f+6],9,-1069501632),p=y(p,d,c,l,s[f+11],14,643717713),l=y(l,p,d,c,s[f+0],20,-373897302),c=y(c,l,p,d,s[f+5],5,-701558691),d=y(d,c,l,p,s[f+10],9,38016083),p=y(p,d,c,l,s[f+15],14,-660478335),l=y(l,p,d,c,s[f+4],20,-405537848),c=y(c,l,p,d,s[f+9],5,568446438),d=y(d,c,l,p,s[f+14],9,-1019803690),p=y(p,d,c,l,s[f+3],14,-187363961),l=y(l,p,d,c,s[f+8],20,1163531501),c=y(c,l,p,d,s[f+13],5,-1444681467),d=y(d,c,l,p,s[f+2],9,-51403784),p=y(p,d,c,l,s[f+7],14,1735328473),c=m(c,l=y(l,p,d,c,s[f+12],20,-1926607734),p,d,s[f+5],4,-378558),d=m(d,c,l,p,s[f+8],11,-2022574463),p=m(p,d,c,l,s[f+11],16,1839030562),l=m(l,p,d,c,s[f+14],23,-35309556),c=m(c,l,p,d,s[f+1],4,-1530992060),d=m(d,c,l,p,s[f+4],11,1272893353),p=m(p,d,c,l,s[f+7],16,-155497632),l=m(l,p,d,c,s[f+10],23,-1094730640),c=m(c,l,p,d,s[f+13],4,681279174),d=m(d,c,l,p,s[f+0],11,-358537222),p=m(p,d,c,l,s[f+3],16,-722521979),l=m(l,p,d,c,s[f+6],23,76029189),c=m(c,l,p,d,s[f+9],4,-640364487),d=m(d,c,l,p,s[f+12],11,-421815835),
p=m(p,d,c,l,s[f+15],16,530742520),c=v(c,l=m(l,p,d,c,s[f+2],23,-995338651),p,d,s[f+0],6,-198630844),d=v(d,c,l,p,s[f+7],10,1126891415),p=v(p,d,c,l,s[f+14],15,-1416354905),l=v(l,p,d,c,s[f+5],21,-57434055),c=v(c,l,p,d,s[f+12],6,1700485571),d=v(d,c,l,p,s[f+3],10,-1894986606),p=v(p,d,c,l,s[f+10],15,-1051523),l=v(l,p,d,c,s[f+1],21,-2054922799),c=v(c,l,p,d,s[f+8],6,1873313359),d=v(d,c,l,p,s[f+15],10,-30611744),p=v(p,d,c,l,s[f+6],15,-1560198380),l=v(l,p,d,c,s[f+13],21,1309151649),c=v(c,l,p,d,s[f+4],6,-145523070),d=v(d,c,l,p,s[f+11],10,-1120210379),p=v(p,d,c,l,s[f+2],15,718787259),l=v(l,p,d,c,s[f+9],21,-343485551),c=c+b>>>0,l=l+g>>>0,p=p+S>>>0,d=d+E>>>0}return n.endian([c,l,p,d])})._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):n.bytesToHex(r)}},function(e,t,r){"use strict";t.a=function(){return!1}},function(e,t,r){"use strict";(function(e){var n=r(11);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(e)&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.a.Buffer:void 0,u=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(98)(e))},function(e,t,r){"use strict";function n(e,t){t=t||"yyyy-MM-dd hh:mm:ss";var r={"M+":(e=e||new Date).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var n in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,e.getFullYear().toString().substr(4-RegExp.$1.length))),r)if(new RegExp("("+n+")").test(t)){var o=1===RegExp.$1.length?r[n]:("00"+r[n]).substr(r[n].toString().length);t=t.replace(RegExp.$1,o)}return t}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";e.exports=r(251)},function(e){
e.exports=JSON.parse('{"nested":{"bilibili":{"nested":{"community":{"nested":{"service":{"nested":{"dm":{"nested":{"v1":{"nested":{"DmWebViewReply":{"fields":{"state":{"type":"int32","id":1},"text":{"type":"string","id":2},"textSide":{"type":"string","id":3},"dmSge":{"type":"DmSegConfig","id":4},"flag":{"type":"DanmakuFlagConfig","id":5},"specialDms":{"rule":"repeated","type":"string","id":6},"checkBox":{"type":"bool","id":7},"count":{"type":"int64","id":8},"commandDms":{"rule":"repeated","type":"CommandDm","id":9},"dmSetting":{"type":"DanmuWebPlayerConfig","id":10},"reportFilter":{"rule":"repeated","type":"string","id":11}}},"CommandDm":{"fields":{"oid":{"type":"int64","id":2},"mid":{"type":"int64","id":3},"command":{"type":"string","id":4},"content":{"type":"string","id":5},"progress":{"type":"int32","id":6},"ctime":{"type":"string","id":7},"mtime":{"type":"string","id":8},"extra":{"type":"string","id":9},"dmid":{"type":"string","id":10}}},"DmSegConfig":{"fields":{"pageSize":{"type":"int64","id":1},"total":{"type":"int64","id":2}}},"DanmakuFlagConfig":{"fields":{"recFlag":{"type":"int32","id":1},"recText":{"type":"string","id":2},"recSwitch":{"type":"int32","id":3}}},"DmSegMobileReply":{"fields":{"elems":{"rule":"repeated","type":"DanmakuElem","id":1}}},"DanmakuElem":{"fields":{"progress":{"type":"int32","id":2},"mode":{"type":"int32","id":3},"fontsize":{"type":"int32","id":4},"color":{"type":"uint32","id":5},"midHash":{"type":"string","id":6},"content":{"type":"string","id":7},"ctime":{"type":"int64","id":8},"weight":{"type":"int32","id":9},"action":{"type":"string","id":10},"pool":{"type":"int32","id":11},"dmid":{"type":"string","id":12},"attr":{"type":"int32","id":13}}},"DanmuWebPlayerConfig":{"fields":{"dmSwitch":{"type":"bool","id":1},"aiSwitch":{"type":"bool","id":2},"aiLevel":{"type":"int32","id":3},"typeTop":{"type":"bool","id":4},"typeScroll":{"type":"bool","id":5},"typeBottom":{"type":"bool","id":6},"typeColor":{"type":"bool","id":7},"typeSpecial":{"type":"bool","id":8},"preventshade":{"type":"bool","id":9},"dmask":{"type":"bool","id":10},"opacity":{"type":"float","id":11},"dmarea":{"type":"int32","id":12},"speedplus":{"type":"float","id":13},"fontsize":{"type":"float","id":14},"fullscreensync":{"type":"bool","id":15},"speedsync":{"type":"bool","id":16},"fontfamily":{"type":"string","id":17},"bold":{"type":"bool","id":18},"fontborder":{"type":"int32","id":19}}}}}}}}}}}}}}}')},function(e,t,r){"use strict";var n=r(12),o=r(11),i=function(){return o.a.Date.now()},a=r(58),s=Math.max,u=Math.min;t.a=function(e,t,r){var o,c,l,p,d,f,h=0,y=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=o,n=c;return o=c=void 0,h=t,p=e.apply(n,r)}function g(e){return h=e,d=setTimeout(E,t),y?b(e):p}function S(e){var r=e-f;return void 0===f||r>=t||r<0||m&&e-h>=l}function E(){var e=i();if(S(e))return O(e);d=setTimeout(E,function(e){var r=t-(e-f);return m?u(r,l-(e-h)):r}(e))}function O(e){return d=void 0,v&&o?b(e):(o=c=void 0,p)}function w(){var e=i(),r=S(e);if(o=arguments,c=this,f=e,r){if(void 0===d)return g(f);if(m)return clearTimeout(d),d=setTimeout(E,t),b(f)}return void 0===d&&(d=setTimeout(E,t)),p}return t=Object(a.a)(t)||0,Object(n.a)(r)&&(y=!!r.leading,l=(m="maxWait"in r)?s(Object(a.a)(r.maxWait)||0,t):l,v="trailing"in r?!!r.trailing:v),w.cancel=function(){void 0!==d&&clearTimeout(d),h=0,o=f=c=d=void 0},w.flush=function(){return void 0===d?p:O(i())},w}},function(e,t,r){"use strict";t.a=function(){}},function(e,t,r){var n=r(170);e.exports=n},function(e,t,r){r(171),r(69),r(93),r(55);var n=r(36);e.exports=n.Set},function(e,t,r){"use strict";var n=r(62),o=r(124);e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,r){var n=r(25),o=r(173),i=r(49),a=r(31);e.exports=function(e,t){for(var r=o(t),s=a.f,u=i.f,c=0;c<r.length;c++){var l=r[c];n(e,l)||s(e,l,u(t,l))}}},function(e,t,r){var n=r(66),o=r(174),i=r(115),a=r(32);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}
},function(e,t,r){var n=r(114),o=r(85).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){var n=r(64),o=r(41),i=r(176),a=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),l=i(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,r){var n=r(84),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},function(e,t,r){var n=r(23);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(118);e.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,r){var n=r(24),o=r(123);e.exports=function(e,t,r){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(e,a),e}},function(e,t,r){var n=r(24);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,r){var n=r(30),o=r(31),i=r(32),a=r(125);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,u=0;s>u;)o.f(e,r=n[u++],t[r]);return e}},function(e,t,r){"use strict";var n=r(127).IteratorPrototype,o=r(90),i=r(63),a=r(89),s=r(54),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,r){var n=r(23);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,r){"use strict";var n=r(66),o=r(31),i=r(19),a=r(30),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(87),o=r(120);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,r){var n=r(84),o=r(51),i=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,r){var n=r(189);e.exports=n},function(e,t,r){r(190),r(69),r(93),r(55);var n=r(36);e.exports=n.Map},function(e,t,r){"use strict";var n=r(62),o=r(124);e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,r){var n=r(192);e.exports=n},function(e,t,r){r(69),r(193),r(55);var n=r(36);e.exports=n.WeakSet},function(e,t,r){"use strict";r(62)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(131))},function(e,t,r){var n=r(24),o=r(195),i=r(19)("species");e.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},function(e,t,r){var n=r(50);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(197);e.exports=n},function(e,t,r){r(69),r(198),r(55);var n=r(36);e.exports=n.WeakMap},function(e,t,r){"use strict";var n,o=r(13),i=r(91),a=r(67),s=r(62),u=r(131),c=r(24),l=r(40).enforce,p=r(112),d=!o.ActiveXObject&&"ActiveXObject"in o,f=Object.isExtensible,h=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},y=e.exports=s("WeakMap",h,u);if(p&&d){n=u.getConstructor(h,"WeakMap",!0),a.REQUIRED=!0;var m=y.prototype,v=m.delete,b=m.has,g=m.get,S=m.set;i(m,{delete:function(e){if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),v.call(this,e)||t.frozen.delete(e)}return v.call(this,e)},has:function(e){
if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),b.call(this,e)||t.frozen.has(e)}return b.call(this,e)},get:function(e){if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),b.call(this,e)?g.call(this,e):t.frozen.get(e)}return g.call(this,e)},set:function(e,t){if(c(e)&&!f(e)){var r=l(this);r.frozen||(r.frozen=new n),b.call(this,e)?S.call(this,e,t):r.frozen.set(e,t)}else S.call(this,e,t);return this}})}},function(e,t,r){var n=r(200);e.exports=n},function(e,t,r){r(201);var n=r(36);e.exports=n.queueMicrotask},function(e,t,r){var n=r(29),o=r(13),i=r(202),a=r(95),s=o.process;n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=a&&s.domain;i(t?t.bind(e):e)}})},function(e,t,r){var n,o,i,a,s,u,c,l,p=r(13),d=r(49).f,f=r(203).set,h=r(132),y=r(95),m=p.MutationObserver||p.WebKitMutationObserver,v=p.document,b=p.process,g=p.Promise,S=d(p,"queueMicrotask"),E=S&&S.value;E||(n=function(){var e,t;for(y&&(e=b.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},!h&&!y&&m&&v?(s=!0,u=v.createTextNode(""),new m(n).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):g&&g.resolve?(c=g.resolve(void 0),l=c.then,a=function(){l.call(c,n)}):a=y?function(){b.nextTick(n)}:function(){f.call(p,n)}),e.exports=E||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},function(e,t,r){var n,o,i,a=r(13),s=r(23),u=r(42),c=r(126),l=r(79),p=r(132),d=r(95),f=a.location,h=a.setImmediate,y=a.clearImmediate,m=a.process,v=a.MessageChannel,b=a.Dispatch,g=0,S={},E="onreadystatechange",O=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},w=function(e){return function(){O(e)}},_=function(e){O(e.data)},P=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};h&&y||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return S[++g]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(g),g},y=function(e){delete S[e]},d?n=function(e){m.nextTick(w(e))}:b&&b.now?n=function(e){b.now(w(e))}:v&&!p?(i=(o=new v).port2,o.port1.onmessage=_,n=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!s(P)?(n=P,a.addEventListener("message",_,!1)):n=E in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),O(e)}}:function(e){setTimeout(w(e),0)}),e.exports={set:h,clear:y}},function(e,t,r){var n=r(66);e.exports=n("navigator","userAgent")||""},function(e,t,r){var n=r(206);e.exports=n},function(e,t,r){r(93),r(207);var n=r(36);e.exports=n.Array.from},function(e,t,r){var n=r(29),o=r(208);n({target:"Array",stat:!0,forced:!r(122)((function(e){Array.from(e)}))},{from:o})},function(e,t,r){"use strict";var n=r(42),o=r(68),i=r(209),a=r(117),s=r(41),u=r(210),c=r(119);e.exports=function(e){var t,r,l,p,d,f,h=o(e),y="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,b=void 0!==v,g=c(h),S=0;if(b&&(v=n(v,m>2?arguments[2]:void 0,2)),null==g||y==Array&&a(g))for(r=new y(t=s(h.length));t>S;S++)f=b?v(h[S],S):h[S],u(r,S,f);else for(d=(p=g.call(h)).next,r=new y;!(l=d.call(p)).done;S++)f=b?i(p,v,[l.value,S],!0):l.value,u(r,S,f);return r.length=S,r}},function(e,t,r){var n=r(32),o=r(121);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){throw o(e),t}}},function(e,t,r){"use strict";var n=r(78),o=r(31),i=r(63);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},function(e,t,r){var n=r(212);e.exports=n},function(e,t,r){r(213);var n=r(71);e.exports=n("Array","find")},function(e,t,r){"use strict";var n=r(29),o=r(70).find,i=r(94),a=r(96),s="find",u=!0,c=a(s);s in[]&&Array(1).find((function(){u=!1})),n({target:"Array",proto:!0,forced:u||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},function(e,t,r){var n=r(215);e.exports=n},function(e,t,r){r(216);var n=r(71);e.exports=n("Array","findIndex")},function(e,t,r){"use strict";var n=r(29),o=r(70).findIndex,i=r(94),a=r(96),s="findIndex",u=!0,c=a(s);s in[]&&Array(1).findIndex((function(){u=!1})),n({
target:"Array",proto:!0,forced:u||!c},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},function(e,t,r){var n=r(218);e.exports=n},function(e,t,r){r(219);var n=r(71);e.exports=n("String","startsWith")},function(e,t,r){"use strict";var n,o=r(29),i=r(49).f,a=r(41),s=r(133),u=r(51),c=r(134),l=r(53),p="".startsWith,d=Math.min,f=c("startsWith");o({target:"String",proto:!0,forced:!!(l||f||(n=i(String.prototype,"startsWith"),!n||n.writable))&&!f},{startsWith:function(e){var t=String(u(this));s(e);var r=a(d(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return p?p.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){var n=r(24),o=r(50),i=r(19)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,r){var n=r(222);e.exports=n},function(e,t,r){r(223);var n=r(71);e.exports=n("String","endsWith")},function(e,t,r){"use strict";var n,o=r(29),i=r(49).f,a=r(41),s=r(133),u=r(51),c=r(134),l=r(53),p="".endsWith,d=Math.min,f=c("endsWith");o({target:"String",proto:!0,forced:!!(l||f||(n=i(String.prototype,"endsWith"),!n||n.writable))&&!f},{endsWith:function(e){var t=String(u(this));s(e);var r=arguments.length>1?arguments[1]:void 0,n=a(t.length),o=void 0===r?n:d(a(r),n),i=String(e);return p?p.call(t,i,o):t.slice(o-i.length,o)===i}})},function(e,t,r){var n=r(225);e.exports=n},function(e,t,r){r(226);var n=r(36);e.exports=n.Object.assign},function(e,t,r){var n=r(29),o=r(227);n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,r){"use strict";var n=r(30),o=r(23),i=r(125),a=r(115),s=r(109),u=r(68),c=r(77),l=Object.assign,p=Object.defineProperty;e.exports=!l||o((function(){if(n&&1!==l({b:1},l(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||i(l({},t)).join("")!=o}))?function(e,t){for(var r=u(e),o=arguments.length,l=1,p=a.f,d=s.f;o>l;)for(var f,h=c(arguments[l++]),y=p?i(h).concat(p(h)):i(h),m=y.length,v=0;m>v;)f=y[v++],n&&!d.call(h,f)||(r[f]=h[f]);return r}:l},function(e,t,r){r(229),r(55);var n=r(130),o=r(135);e.exports={keys:n.keys,values:n.values,entries:n.entries,iterator:n.values,forEach:o}},function(e,t,r){var n=r(13),o=r(129),i=r(135),a=r(35);for(var s in o){var u=n[s],c=u&&u.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(e){c.forEach=i}}},function(e,t,r){"use strict";var n=r(23);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(97),i=r(136),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,u(t)?t:[t])},p=Date.prototype.toISOString,d=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},h=function e(t,r,i,a,s,c,p,d,h,y,m,v,b){var g,S=t;if("function"==typeof p?S=p(r,S):S instanceof Date?S=y(S):"comma"===i&&u(S)&&(S=o.maybeMap(S,(function(e){return e instanceof Date?y(e):e})).join(",")),null===S){if(a)return c&&!v?c(r,f.encoder,b,"key"):r;S=""}if("string"==typeof(g=S)||"number"==typeof g||"boolean"==typeof g||"symbol"===n(g)||"bigint"==typeof g||o.isBuffer(S))return c?[m(v?r:c(r,f.encoder,b,"key"))+"="+m(c(S,f.encoder,b,"value"))]:[m(r)+"="+m(String(S))];var E,O=[];if(void 0===S)return O;if(u(p))E=p;else{var w=Object.keys(S);E=d?w.sort(d):w}for(var _=0;_<E.length;++_){var P=E[_],k=S[P];if(!s||null!==k){
var x=u(S)?"function"==typeof i?i(r,P):r:r+(h?"."+P:"["+P+"]");l(O,e(k,x,i,a,s,c,p,d,h,y,m,v,b))}}return O};e.exports=function(e,t){var r,o=e,c=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=f.filter;return("function"==typeof e.filter||u(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof c.filter?o=(0,c.filter)("",o):u(c.filter)&&(r=c.filter);var p,d=[];if("object"!==n(o)||null===o)return"";p=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var y=s[p];r||(r=Object.keys(o)),c.sort&&r.sort(c.sort);for(var m=0;m<r.length;++m){var v=r[m];c.skipNulls&&null===o[v]||l(d,h(o[v],v,y,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var b=d.join(c.delimiter),g=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),b.length>0?g+b:""}},function(e,t,r){"use strict";var n=r(97),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,l=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var p=0;r.depth>0&&null!==(s=a.exec(i))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:u(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=o:a[c]=o:a={0:o}}o=a}return o}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,
allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,p),f=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?h="utf-8":"utf8=%26%2310003%3B"===d[r]&&(h="iso-8859-1"),f=r,r=d.length);for(r=0;r<d.length;++r)if(r!==f){var y,m,v=d[r],b=v.indexOf("]="),g=-1===b?v.indexOf("="):b+1;-1===g?(y=t.decoder(v,a.decoder,h,"key"),m=t.strictNullHandling?null:""):(y=t.decoder(v.slice(0,g),a.decoder,h,"key"),m=n.maybeMap(u(v.slice(g+1),t),(function(e){return t.decoder(e,a.decoder,h,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=s(m)),v.indexOf("[]=")>-1&&(m=i(m)?[m]:m),o.call(c,y)?c[y]=n.combine(c[y],m):c[y]=m}return c}(e,r):e,p=r.plainObjects?Object.create(null):{},d=Object.keys(l),f=0;f<d.length;++f){var h=d[f],y=c(h,l[h],r,"string"==typeof e);p=n.merge(p,y,r)}return n.compact(p)}},function(e,t,r){"use strict";var n=r(21),o=r(137),i=r(234),a=r(143);function s(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var u=s(r(140));u.Axios=i,u.create=function(e){return s(a(u.defaults,e))},u.Cancel=r(144),u.CancelToken=r(247),u.isCancel=r(139),u.all=function(e){return Promise.all(e)},u.spread=r(248),e.exports=u,e.exports.default=u},function(e,t,r){"use strict";var n=r(21),o=r(138),i=r(235),a=r(236),s=r(143);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){"use strict";var n=r(21);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,r){"use strict";var n=r(21),o=r(237),i=r(139),a=r(140);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),
e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(21);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var n=r(21);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(142);e.exports=function(e,t,r){var o=r.config.validateStatus;!o||o(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(242),o=r(243);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(21),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},function(e,t,r){"use strict";var n=r(21);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(21);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(144);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},
endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(o>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(e.charAt(n))>>>6-2*o);return t}},e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=e.exports=r(252);n.build="full",n.tokenize=r(155),n.parse=r(266),n.common=r(267),n.Root._configure(n.Type,n.parse,n.common)},function(e,t,r){"use strict";var n=e.exports=r(253);n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(150),n.decoder=r(151),n.verifier=r(152),n.converter=r(153),n.ReflectionObject=r(44),n.Namespace=r(56),n.Root=r(106),n.Enum=r(27),n.Type=r(101),n.Field=r(38),n.OneOf=r(72),n.MapField=r(102),n.Service=r(103),n.Method=r(104),n.Message=r(105),n.wrappers=r(154),n.types=r(45),n.util=r(16),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},function(e,t,r){"use strict";var n=t;function o(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=r(99),n.BufferWriter=r(260),n.Reader=r(100),n.BufferReader=r(261),n.util=r(33),n.rpc=r(148),n.roots=r(149),n.configure=o,n.Writer._configure(n.BufferWriter),o()},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),i=new Array(123),a=0;a<64;)i[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(e,t,r){for(var n,i=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=o[c>>2],n=(3&c)<<4,u=1;break;case 1:a[s++]=o[n|c>>4],n=(15&c)<<2,u=2;break;case 2:a[s++]=o[n|c>>6],a[s++]=o[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=o[n],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var s="invalid encoding";n.decode=function(e,t,r){for(var n,o=r,a=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&a>1)break;if(void 0===(c=i[c]))throw Error(s);switch(a){case 0:n=c,a=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[r++]=(3&n)<<6|c,a=0}}if(1===a)throw Error(s);return r-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},
n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,a),e.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,o,i+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,a,0,4),e.readDoubleBE=r.bind(null,s,4,0)}(),e}function o(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,
t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},function(e,t,r){"use strict";e.exports=o;var n=r(33);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=a;var n=r(99);(a.prototype=Object.create(n.prototype)).constructor=a;var o=r(33),i=o.Buffer;function a(){n.call(this)}a.alloc=function(e){return(a.alloc=o._Buffer_allocUnsafe)(e)};var s=i&&i.prototype instanceof Uint8Array&&"set"===i.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]};function u(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write(e,r)}a.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s,t,e),this},a.prototype.string=function(e){var t=i.byteLength(e);return this.uint32(t),t&&this._push(u,t,e),this}},function(e,t,r){"use strict";e.exports=i;var n=r(100);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(33);function i(e){n.call(this,e)}o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice),i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,r){"use strict";e.exports=o;var n=r(33);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(e,s,t,r,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)
}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";function n(e,t){"string"==typeof e&&(t=e,e=void 0);var r=[];function o(e){if("string"!=typeof e){var t=i();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),s=new Array(a.length+1),u=new Array(a.length),c=0;c<a.length;)s[c]=a[c],u[c]=e[a[c++]];return s[c]=t,Function.apply(null,s).apply(null,u)}return Function(t)()}for(var l=new Array(arguments.length-1),p=0;p<l.length;)l[p]=arguments[++p];if(p=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[p++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),p!==l.length)throw Error("parameter count mismatch");return r.push(e),o}function i(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return o.toString=i,o}e.exports=n,n.verbose=!1},function(e,t,r){"use strict";e.exports=i;var n=r(146),o=r(147)("fs");function i(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&o&&o.readFile?o.readFile(e,(function(n,o){return n&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?o:o.toString("utf8"))})):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var o=0;o<n.responseText.length;++o)e.push(255&n.responseText.charCodeAt(o))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},function(e,t,r){"use strict";var n=t,o=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=o(e),n="";r&&(n=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return n+t.join("/")};n.resolve=function(e,t,r){return r||(t=i(t)),o(t)?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},function(e,t,r){"use strict";e.exports=_,_.filename=null,_.defaults={keepCase:!1};var n=r(155),o=r(106),i=r(101),a=r(38),s=r(102),u=r(72),c=r(27),l=r(103),p=r(104),d=r(45),f=r(16),h=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,g=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,E=/^[a-zA-Z_][a-zA-Z_0-9]*$/,O=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,w=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function _(e,t,r){t instanceof o||(r=t,t=new o),r||(r=_.defaults);var P,k,x,j,A,T=n(e,r.alternateCommentMode||!1),D=T.next,L=T.push,C=T.peek,R=T.skip,I=T.cmnt,N=!0,M=!1,U=t,B=r.keepCase?function(e){return e}:f.camelCase;function F(e,t,r){var n=_.filename;return r||(_.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+T.line+")")}function V(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw F(e);t.push(D()),R(e),e=C()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=D();switch(t){case"'":case'"':return L(t),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(h.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(b.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw F(e,"number",t)}(t,!0)}catch(r){if(e&&O.test(t))return t;throw F(t,"value")}}function q(e,t){var r,n;do{
!t||'"'!==(r=C())&&"'"!==r?e.push([n=z(D()),R("to",!0)?z(D()):n]):e.push(V())}while(R(",",!0));R(";")}function z(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw F(e,"id");if(y.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(g.test(e))return parseInt(e,8);throw F(e,"id")}function G(){if(void 0!==P)throw F("package");if(P=D(),!O.test(P))throw F(P,"name");U=U.define(P),R(";")}function K(){var e,t=C();switch(t){case"weak":e=x||(x=[]),D();break;case"public":D();default:e=k||(k=[])}t=V(),R(";"),e.push(t)}function W(){if(R("="),j=V(),!(M="proto3"===j)&&"proto2"!==j)throw F(j,"syntax");R(";")}function Q(e,t){switch(t){case"option":return J(e,t),R(";"),!0;case"message":return function(e,t){if(!E.test(t=D()))throw F(t,"type name");var r=new i(t);$(r,(function(e){if(!Q(r,e))switch(e){case"map":!function(e){R("<");var t=D();if(void 0===d.mapKey[t])throw F(t,"type");R(",");var r=D();if(!O.test(r))throw F(r,"type");R(">");var n=D();if(!E.test(n))throw F(n,"name");R("=");var o=new s(B(n),z(D()),t,r);$(o,(function(e){if("option"!==e)throw F(e);J(o,e),R(";")}),(function(){ee(o)})),e.add(o)}(r);break;case"required":case"optional":case"repeated":Y(r,e);break;case"oneof":!function(e,t){if(!E.test(t=D()))throw F(t,"name");var r=new u(B(t));$(r,(function(e){"option"===e?(J(r,e),R(";")):(L(e),Y(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":q(r.extensions||(r.extensions=[]));break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:if(!M||!O.test(e))throw F(e);L(e),Y(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!E.test(t=D()))throw F(t,"name");var r=new c(t);$(r,(function(e){switch(e){case"option":J(r,e),R(";");break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!E.test(t))throw F(t,"name");R("=");var r=z(D(),!0),n={};$(n,(function(e){if("option"!==e)throw F(e);J(n,e),R(";")}),(function(){ee(n)})),e.add(t,r,n.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!E.test(t=D()))throw F(t,"service name");var r=new l(t);$(r,(function(e){if(!Q(r,e)){if("rpc"!==e)throw F(e);!function(e,t){var r=t;if(!E.test(t=D()))throw F(t,"name");var n,o,i,a,s=t;R("("),R("stream",!0)&&(o=!0);if(!O.test(t=D()))throw F(t);n=t,R(")"),R("returns"),R("("),R("stream",!0)&&(a=!0);if(!O.test(t=D()))throw F(t);i=t,R(")");var u=new p(s,r,n,i,o,a);$(u,(function(e){if("option"!==e)throw F(e);J(u,e),R(";")})),e.add(u)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!O.test(t=D()))throw F(t,"reference");var r=t;$(null,(function(t){switch(t){case"required":case"repeated":case"optional":Y(e,t,r);break;default:if(!M||!O.test(t))throw F(t);L(t),Y(e,"optional",r)}}))}(e,t),!0}return!1}function $(e,t,r){var n=T.line;if(e&&(e.comment=I(),e.filename=_.filename),R("{",!0)){for(var o;"}"!==(o=D());)t(o);R(";",!0)}else r&&r(),R(";"),e&&"string"!=typeof e.comment&&(e.comment=I(n))}function Y(e,t,r){var n=D();if("group"!==n){if(!O.test(n))throw F(n,"type");var o=D();if(!E.test(o))throw F(o,"name");o=B(o),R("=");var s=new a(o,z(D()),n,t,r);$(s,(function(e){if("option"!==e)throw F(e);J(s,e),R(";")}),(function(){ee(s)})),e.add(s),M||!s.repeated||void 0===d.packed[n]&&void 0!==d.basic[n]||s.setOption("packed",!1,!0)}else!function(e,t){var r=D();if(!E.test(r))throw F(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r));R("=");var o=z(D()),s=new i(r);s.group=!0;var u=new a(n,o,r,t);u.filename=_.filename,$(s,(function(e){switch(e){case"option":J(s,e),R(";");break;case"required":case"optional":case"repeated":Y(s,e);break;default:throw F(e)}})),e.add(s).add(u)}(e,t)}function J(e,t){var r=R("(",!0);if(!O.test(t=D()))throw F(t,"name");var n=t;r&&(R(")"),n="("+n+")",t=C(),w.test(t)&&(n+=t,D())),R("="),X(e,n)}function X(e,t){if(R("{",!0))do{if(!E.test(A=D()))throw F(A,"name");"{"===C()?X(e,t+"."+A):(R(":"),"{"===C()?X(e,t+"."+A):Z(e,t+"."+A,H(!0))),R(",",!0)}while(!R("}",!0));else Z(e,t,H(!0))}function Z(e,t,r){e.setOption&&e.setOption(t,r)}function ee(e){if(R("[",!0)){do{J(e,"option")}while(R(",",!0))
;R("]")}return e}for(;null!==(A=D());)switch(A){case"package":if(!N)throw F(A);G();break;case"import":if(!N)throw F(A);K();break;case"syntax":if(!N)throw F(A);W();break;case"option":if(!N)throw F(A);J(U,A),R(";");break;default:if(Q(U,A)){N=!1;continue}throw F(A)}return _.filename=null,{package:P,imports:k,weakImports:x,syntax:j,root:t}}},function(e,t,r){"use strict";e.exports=i;var n,o=/\/|\./;function i(e,t){o.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),i[e]=t}i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),i("duration",{Duration:n={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),i("timestamp",{Timestamp:n}),i("empty",{Empty:{fields:{}}}),i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),i("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),i.get=function(e){return i[e]||null}},function(e,t,r){"use strict";r.r(t);var n=r(275);var o=function(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){return t.reject(r)}))}))};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(e){return new this((function(t,r){if(!e||void 0===e.length)return r(new TypeError(i(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function a(e,r){if(r&&("object"===i(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(t){a(e,t)}),(function(r){n[e]={status:"rejected",reason:r},0==--o&&t(n)}))}n[e]={status:"fulfilled",value:r},0==--o&&t(n)}for(var s=0;s<n.length;s++)a(s,n[s])}))};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=setTimeout;function c(e){return Boolean(e&&void 0!==e.length)}function l(){}function p(e){if(!(this instanceof p))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function d(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,p._immediateFn((function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void h(t.promise,e)}f(t.promise,n)}else(1===e._state?f:h)(t.promise,e._value)}))):e._deferreds.push(t)}function f(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===s(t)||"function"==typeof t)){var r=t.then;if(t instanceof p)return e._state=3,e._value=t,void y(e);if("function"==typeof r)return void v((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,y(e)}catch(t){h(e,t)}var n,o}function h(e,t){e._state=2,e._value=t,y(e)}
function y(e){2===e._state&&0===e._deferreds.length&&p._immediateFn((function(){e._handled||p._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)d(e,e._deferreds[t]);e._deferreds=null}function m(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function v(e,t){var r=!1;try{e((function(e){r||(r=!0,f(t,e))}),(function(e){r||(r=!0,h(t,e))}))}catch(e){if(r)return;r=!0,h(t,e)}}p.prototype.catch=function(e){return this.then(null,e)},p.prototype.then=function(e,t){var r=new this.constructor(l);return d(this,new m(e,t,r)),r},p.prototype.finally=o,p.all=function(e){return new p((function(t,r){if(!c(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function i(e,a){try{if(a&&("object"===s(a)||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(t){i(e,t)}),r)}n[e]=a,0==--o&&t(n)}catch(e){r(e)}}for(var a=0;a<n.length;a++)i(a,n[a])}))},p.allSettled=a,p.resolve=function(e){return e&&"object"===s(e)&&e.constructor===p?e:new p((function(t){t(e)}))},p.reject=function(e){return new p((function(t,r){r(e)}))},p.race=function(e){return new p((function(t,r){if(!c(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,o=e.length;n<o;n++)p.resolve(e[n]).then(t,r)}))},p._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){u(e,0)},p._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var b=p,g=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof g.Promise?g.Promise=b:g.Promise.prototype.finally?g.Promise.allSettled||(g.Promise.allSettled=a):g.Promise.prototype.finally=o;r(169),r(188),r(191),r(196),r(199),r(205),r(211),r(214),r(217),r(221),r(224),r(228);var S=r.e(9).then(r.t.bind(null,454,7)),E=r(59),O=r.n(E),w=r(107),_={attributes:{"data-injector":"nano"},insert:"head",singleton:!1},P=(O()(w.a,_),w.a.locals,r(47)),k=r.n(P),x=r(34),j=r.n(x),A=r(15),T=r.n(A);var D=r(2),L=r(0),C=r(1),R=r(3),I=Object.freeze({name:"@jsc/nano",version:"3.1.4",revision:"8e4ce27f",lastCompiled:"2021-10-11T11:14:21+08:00"}),N="__NANO_UNIQUE_IDENTIFIER__";function M(){return("number"!=typeof document[N]||isNaN(document[N]))&&(document[N]=0),++document[N]}function U(e){var t=Object.assign({width:null,height:null,aspectRatio:"16:9"},e),r=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};if(!r(t.width)&&!r(t.height))throw new TypeError('One of "width" and "height" MUST be an integer');var n=t.aspectRatio.split(":"),o=+n[0],i=+n[1];if(!(o>0&&i>0))throw new Error('Invalid "aspectRatio" format');var a=o/i,s=!!t.width;t.width?t.height=Math.round(t.width/a):t.width=Math.round(t.height/(1/a));var u=t.width,c=t.height,l=t.width/t.height;return l>a&&(s?c+=1:u-=1),l<a&&(s?c-=1:u+=1),Math.abs(l-a)>Math.abs(u/c-a)&&(t.width=u,t.height=c),t}var B=r(61);function F(){try{return"function"==typeof ResizeObserver&&"function"==typeof ResizeObserver.prototype.observe}catch(e){return!1}}var V=r(9),H=r(43),q=r(276),z=r(160),G=r(277),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delay=1500,t.delayTimer=null,t.maxItems=50,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"isLoadStart",{get:function(){return!this.apiStore.state.isSameEpisode&&this.eventStore.isCommitted},enumerable:!1,configurable:!0}),t.prototype.install=function(){var t=this;e.prototype.install.call(this);var r=this.spx+"-loading";this.loadNode=this.container.querySelector("."+this.ppx+"-loading-panel"),this.textNode=this.container.querySelector("."+this.ppx+"-loading-panel-text"),this.blurNode=this.container.querySelector("."+this.ppx+"-loading-panel-blur"),this.dc.isCommitted=Object(D.c)((function(){t.isLoadStart&&(t.createDelayTimer(),t.loadNode.classList.add(r))})),
this.dc.isLoaded=Object(D.c)((function(){t.eventStore.isLoaded&&(t.clearDelayTimer(),t.loadNode.classList.remove(r))})),this.dc.renderStages=Object(D.c)((function(){if(t.loadingStore.stages.length){if(Object(q.a)(t.textNode,t.renderFragment()),t.textNode)for(;t.textNode.children.length>t.maxItems;)t.textNode.firstChild&&t.textNode.removeChild(t.textNode.firstChild)}else Object(z.a)(t.textNode)}))},t.prototype.createDelayTimer=function(){var e=this;this.clearDelayTimer(),this.delayTimer=self.setTimeout((function(){e.textNode&&(e.textNode.hidden=!1),e.blurNode&&(e.blurNode.hidden=!1)}),this.delay)},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.renderFragment=function(){var e,t,r="";try{for(var n=Object(L.i)(this.loadingStore.stages),o=n.next();!o.done;o=n.next()){var i=o.value;r+='\n                <div class="'+this.ppx+'-loading-panel-text-row">\n                    <span>'+i.message+"</span>\n                    "+(i.status?"<span>"+i.status+"</span>":"")+"\n                    "+(i.contextMessage?'<span class="'+this.cpx+'-opacity-60">'+i.contextMessage+"</span>":"")+"\n                </div>\n            "}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return Object(G.a)(r)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.clearDelayTimer(),this.textNode&&(this.textNode.hidden=!0),this.blurNode&&(this.blurNode.hidden=!0)},Object(L.c)([D.e],t.prototype,"isLoadStart",null),t}(H.a),W=r(271),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lagSpeedShowTimer=0,t.lagSpeedUpdateTimer=0,t}return Object(L.d)(t,e),t.prototype.install=function(){var t=this;e.prototype.install.call(this);var r=this.spx+"-buff";this.dc.playing=Object(D.c)((function(){t.assetStore.lottie&&(t.videoStore.state.buffering||(t.container.classList.remove(r),t.getBuffAnimation().goToAndStop(Math.floor(t.getBuffAnimation().totalFrames/2),!0),t.clearLagSpeed()))})),this.dc.waiting=Object(D.c)((function(){t.assetStore.lottie&&t.videoStore.state.buffering&&t.assetStore.lottie&&(t.container.classList.add(r),t.getBuffAnimation().play(),t.showLagSpeed())}),{delay:500})},t.prototype.createBuffAnimation=function(e){e&&(this.buffAnimation&&this.buffAnimation.destroy(),this.buffAnimation=this.assetStore.lottie.loadAnimation({container:this.nodes.buffIcon,renderer:"svg",loop:!0,autoplay:!0,animationData:e}))},t.prototype.getBuffAnimation=function(){return this.buffAnimation||this.createBuffAnimation(W),this.buffAnimation},t.prototype.showLagSpeed=function(){var e=this;this.lagSpeedShowTimer||(this.lagSpeedShowTimer=self.setTimeout((function(){e.lagSpeedShowTimer&&e.updateLagSpeed()}),1e3))},t.prototype.updateLagSpeed=function(){var e=this,t=this.calcAverageThroughput();this.nodes.buffSpeed&&(this.nodes.buffSpeed.textContent=this.adjustSpeedUnit(t)),this.lagSpeedUpdateTimer||(this.lagSpeedUpdateTimer=self.setInterval((function(){if(e.lagSpeedUpdateTimer){var r=e.calcAverageThroughput();r!==t&&(e.nodes.buffSpeed&&(e.nodes.buffSpeed.textContent=e.adjustSpeedUnit(r)),t=r)}}),1e3))},t.prototype.calcAverageThroughput=function(){var e=0;return this.kernelStore.baseAgent&&(e=this.kernelStore.baseAgent.lastSecondThroughput),e},t.prototype.adjustSpeedUnit=function(e){return isNaN(e)?"":e>=1024?(e/1024).toFixed(2)+"MB/s":e.toFixed(2)+"KB/s"},t.prototype.clearLagSpeed=function(){clearTimeout(this.lagSpeedShowTimer),clearInterval(this.lagSpeedUpdateTimer),this.lagSpeedShowTimer=0,this.lagSpeedUpdateTimer=0,this.nodes.buffSpeed&&(this.nodes.buffSpeed.textContent="")},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.clearLagSpeed()},t}(H.a),$=r(281);var Y=r(278),J=r(279),X=r(280),Z=r(6),ee=r.n(Z),te=r(168),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[PlayerView]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"dblClickDisabled",{get:function(){return this.rootPlayer.hasFeature("noDoubleClick")},enumerable:!1,configurable:!0
}),Object.defineProperty(t.prototype,"isPauseAction",{get:function(){return!!this.eventStore.isLoaded&&((!this.mediaStore.state.ended||!this.configStore.isInteraction)&&(this.mediaStore.state.paused&&!this.videoStore.state.seeking))},enumerable:!1,configurable:!0}),t.prototype.install=function(){var t=this;e.prototype.install.call(this);var r=this.spx+"-paused";this.dc.playAction=Object(D.c)((function(){t.mediaStore.state.paused||t.container.classList.remove(r)})),this.dc.pauseAction=Object(D.c)((function(){if(t.isPauseAction){if(t.configStore.controlsList.has("noPlaybackClue"))return;t.container.classList.add(r)}}),{delay:100}),this.dc.mirror=Object(D.c)((function(){var e=t.spx+"-mirror";t.clientStore.state.mirror?t.container.classList.add(e):t.container.classList.remove(e)})),this.dc.aspectRatio=Object(D.c)((function(){var e=t.clientStore.state.aspectRatio,r=t.nodes.videoWrap;if("0:0"!==e){if(r){var n=r.clientWidth,o=r.clientHeight,i=r.getBoundingClientRect(),a=function(e){var t={width:0,height:0,wRatio:0,hRatio:0},r=e.aspectRatio.split(":"),n=+r[0],o=+r[1];return n>0&&o>0&&(e.width/n>e.height/o?(t.width=e.height/o*n,t.height=e.height):(t.width=e.width,t.height=e.width/n*o),t.wRatio=t.width/e.width,t.hRatio=t.height/e.height),t}({width:t.uiStore.state.videoAreaWidth-(i.width-n),height:t.uiStore.state.videoAreaHeight-(i.height-o),aspectRatio:e});a.wRatio>0&&a.hRatio>0?(t.nodes.videoWrap.style.setProperty("width",100*a.wRatio+"%"),t.nodes.videoWrap.style.setProperty("height",100*a.hRatio+"%"),t.videoStore.video.style.setProperty("object-fit","fill"),t.container.setAttribute("data-aspect-ratio",e)):t.resetAspectRatio()}}else t.resetAspectRatio()})),this.dc.lightOff=Object(D.c)((function(){var e=t.spx+"-light-off";t.clientStore.state.lightOff?t.rootPlayer.majorNode.classList.add(e):t.rootPlayer.majorNode.classList.remove(e)})),this.dc.blackGap=Object(D.c)((function(){var e=t.spx+"-black-gap";t.uiStore.hasBlackGap?t.container.classList.add(e):t.container.classList.remove(e)})),this.dc.isFullView=Object(D.c)((function(){var e=t.nodes.sendingArea,r=t.nodes.sendingBar;if(t.uiStore.isFullView){var n=t.configStore.mntAuxSender;n&&r.parentElement!==n&&n.appendChild(r)}else r.parentElement!==e&&e.appendChild(r)})),this.dc.screenChanged=Object(D.c)((function(){var e=t.uiStore.screenKind,r=t.apiStore.getScreenKind(!0);t.container.setAttribute("data-screen",R.g[r].toLowerCase());var n=[t.nodes.topWrap,t.nodes.stateWrap,t.nodes.toastWrap,t.nodes.sendingArea,t.nodes.controlWrap];e===R.g.Mini?(t.nodes.container.style.right=t.uiStore.state.miniScreenRight+"px",t.nodes.container.style.bottom=t.uiStore.state.miniScreenBottom+"px",Y.a.apply(void 0,Object(L.h)(n))):(t.nodes.container.style.right="",t.nodes.container.style.bottom="",J.a.apply(void 0,Object(L.h)(n)))})),this.dc.ctrlHidden=Object(D.c)((function(){t.container.setAttribute("data-ctrl-hidden",t.controlStore.ctrlHidden.toString())})),this.dc.mouseHidden=Object(D.c)((function(){var e=t.spx+"-no-cursor";t.controlStore.mouseHidden?t.container.classList.add(e):t.container.classList.remove(e)})),this.addEvents()},t.prototype.addEvents=function(){this.nodes.videoPerch&&(this.nodes.videoPerch.addEventListener("click",this.onClick),this.nodes.videoPerch.addEventListener("dblclick",this.onDblClick)),this.rootPlayer.on(C.a.Player_Perch_Click,this.onPerchClick,1)},t.prototype.removeEvents=function(){this.nodes.videoPerch&&(this.nodes.videoPerch.removeEventListener("click",this.onClick),this.nodes.videoPerch.removeEventListener("dblclick",this.onDblClick)),this.rootPlayer.off(C.a.Player_Perch_Click,this.onPerchClick,1)},t.prototype.onClick=function(){var e=this;clearTimeout(this.clickTimer),this.dblClickDisabled?this.rootPlayer.emit(C.a.Player_Perch_Click,new CustomEvent(C.a.Player_Perch_Click,{cancelable:!0})):this.clickTimer=self.setTimeout((function(){e.rootPlayer.emit(C.a.Player_Perch_Click,new CustomEvent(C.a.Player_Perch_Click,{cancelable:!0}))}),200)},t.prototype.onDblClick=function(){if(clearTimeout(this.clickTimer),!this.dblClickDisabled){var e=Date.now()-this.clickTimestamp
;e<2e3&&this.log.i(this.tag,"[ClickDiff]",e),e<=500&&this.rootPlayer.emit(C.a.Player_Perch_Click,new CustomEvent(C.a.Player_Perch_Click,{cancelable:!0}));var t=this.apiStore.getScreenKind()!==R.g.Full?R.g.Full:null;this.apiStore.requestScreen(t).catch(te.a),this.track.e(X.a.Double_Fullscreen,{val:+(t===R.g.Full)})}},t.prototype.onPerchClick=function(e){this.clickTimestamp=Date.now(),e.defaultPrevented||this.videoStore.video.controls||(this.apiStore.isPaused()?(this.apiStore.play({initiator:R.e.ManualAction}).catch(te.a),this.track.e(X.a.Screen_Play)):(this.apiStore.pause({initiator:R.e.ManualAction}),this.track.e(X.a.Screen_Pause)))},t.prototype.resetAspectRatio=function(){this.nodes.videoWrap.style.removeProperty("width"),this.nodes.videoWrap.style.removeProperty("height"),this.videoStore.video.style.removeProperty("object-fit"),this.container.removeAttribute("data-aspect-ratio")},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),clearTimeout(this.clickTimer)},Object(L.c)([D.e],t.prototype,"isPauseAction",null),Object(L.c)([ee.a],t.prototype,"onClick",null),Object(L.c)([ee.a],t.prototype,"onDblClick",null),Object(L.c)([ee.a],t.prototype,"onPerchClick",null),t}(H.a),ne=function(){function e(e){var t=this;this.spx=V.g,this.rootStore=e,this.rootPlayer=e.rootPlayer,this.container=this.getPreprocessContainer(),this.videoArea=this.rootStore.nodes.videoArea,this.rootPlayer.majorNode.appendChild(this.container),this.rootStore.uiStore.resize(!0,!0),F()?this.addResizeObserver():this.resizeEventsDisposer=this.addResizeEvents(),new re(this.rootStore).install(),new K(this.rootStore).install(),this.rootPlayer.hasFeature("noBufferView")||new Q(this.rootStore).install(),this.rootPlayer.on(C.a.Player_Disconnect,(function(){return t.disconnect()}))}return e.prototype.getPreprocessContainer=function(){var e=this.rootStore,t=e.configStore,r=e.nodes,n=t.isService(R.h.Core),o=t.isChannel(R.a.Homepage)||t.isChannel(R.a.Homepage_Topic),i=r.videoWrap,a=e.videoStore.video;return(n||t.hideBoxShadow)&&r.container.classList.add(this.spx+"-disable-box-shadow"),(n||o)&&r.sendingArea&&(r.sendingArea.hidden=!0),i&&!a.parentElement&&i.appendChild(a),this.rootStore.nodes.container},e.prototype.addResizeEvents=function(){var e=this,t=Object($.a)((function(){return e.rootStore.uiStore.resize()}),150);return t(),this.rootPlayer.window.addEventListener("resize",t),function(){e.rootPlayer.window.removeEventListener("resize",t),t.cancel()}},e.prototype.removeResizeEvents=function(){"function"==typeof this.resizeEventsDisposer&&this.resizeEventsDisposer()},e.prototype.addResizeObserver=function(){var e=this;this.resizeObserver=new ResizeObserver((function(t,r){var n,o,i={};try{for(var a=Object(L.i)(t),s=a.next();!s.done;s=a.next()){var u=s.value,c=u.contentRect;if(c){var l=Math.round(c.width),p=Math.round(c.height);switch(u.target){case e.container:i.containerWidth=l,i.containerHeight=p;break;case e.videoArea:i.videoAreaWidth=l,i.videoAreaHeight=p;break;case e.rootStore.videoStore.video:i.videoNodeWidth=l,i.videoNodeHeight=p}}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}e.rootStore.uiStore.setState(i)})),this.resizeObserver.observe(this.container,{box:"border-box"}),this.resizeObserver.observe(this.videoArea,{box:"border-box"}),this.resizeObserver.observe(this.rootStore.videoStore.video,{box:"border-box"})},e.prototype.removeResizeObserver=function(){this.resizeObserver&&this.resizeObserver.disconnect()},e.prototype.disconnect=function(){if(this.removeResizeEvents(),this.removeResizeObserver(),this.container){var e=this.container.parentElement;e&&e.removeChild(this.container)}},e}(),oe=r(282);var ie,ae,se=r(4),ue=r(283),ce=r(284),le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[UiStore]",t.timeMap=new Map,t.loopTimer=null,t.boundingRectTimer=null,t.loadedTimeoutClock=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isLoaded:!1,isLoadedTimeout:!1,kind:R.c.Ugc,mainScreen:R.g.Normal,
sideScreen:null,pageHidden:!1,pipWindowWidth:0,pipWindowHeight:0,videoNodeWidth:0,videoNodeHeight:0,videoAreaWidth:0,videoAreaHeight:0,containerWidth:0,containerHeight:0,mouseClientX:0,mouseClientY:0,miniScreenRight:84,miniScreenBottom:48}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTinyView",{get:function(){return this.mediaStore.isTinyView()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFullView",{get:function(){return this.mediaStore.isFullView()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasBlackGap",{get:function(){return this.mediaStore.isBlackGap()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenKind",{get:function(){return this.apiStore.getScreenKind()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kind",{get:function(){return this.state.kind},enumerable:!1,configurable:!0}),t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this),this.visibilityChangeHandler()},t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.screenChanged=Object(D.i)((function(){return t.screenKind}),(function(e){t.uiStore.resize(!1,!1),t.rootPlayer.emit(C.a.Player_Screen_Changed,new CustomEvent(C.a.Player_Screen_Changed))})),this.dc.isLoaded=Object(D.i)((function(){return t.eventStore.isLoaded}),(function(e){queueMicrotask((function(){e?t.rootPlayer.emit(C.a.Player_Leave_Loading,new CustomEvent(C.a.Player_Leave_Loading)):t.rootPlayer.emit(C.a.Player_Enter_Loading,new CustomEvent(C.a.Player_Enter_Loading))}))}),{fireImmediately:!0}),this.dc.containerResize=Object(D.i)((function(){return{w:t.state.containerWidth,h:t.state.containerHeight}}),(function(){t.rootPlayer.emit(C.a.Player_Container_Resize,new CustomEvent(C.a.Player_Container_Resize))})),this.dc.videoNodeResize=Object(D.i)((function(){return{w:t.state.videoNodeWidth,h:t.state.videoNodeHeight}}),(function(){t.rootPlayer.emit(C.a.Media_Element_Resize,new CustomEvent(C.a.Media_Element_Resize))})),this.dc.timeMap=Object(D.c)((function(){if(t.state.pageHidden){if(t.timeMap.size){var e=performance.now();t.timeMap.forEach((function(t){t.previousHiddenTime=e}))}}else if(t.timeMap.size){var r=performance.now();t.timeMap.forEach((function(e){e.accumulativeHiddenTime+=r-e.previousHiddenTime||0}))}})),this.dc.loadedChecker=Object(D.c)((function(){t.state.pageHidden?t.loadedTimeoutClock&&t.loadedTimeoutClock.suspend():t.loadedTimeoutClock&&t.loadedTimeoutClock.resume()})),this.registerEventEmitter(),this.registerEventListener(),this.addVisibilityChangeEvents()},t.prototype.timeStarting=function(e){var t=performance.now();this.timeMap.set(e,{startingTime:t,previousHiddenTime:this.state.pageHidden?t:NaN,accumulativeHiddenTime:0})},t.prototype.timeFinished=function(e){var t=performance.now(),r=this.timeMap.get(e),n={duration:NaN,hiddenDuration:NaN,visibleDuration:NaN};return r&&(n.duration=t-r.startingTime,this.state.pageHidden&&(r.accumulativeHiddenTime+=t-r.previousHiddenTime||0),n.hiddenDuration=r.accumulativeHiddenTime,n.visibleDuration=n.duration-n.hiddenDuration),this.timeMap.delete(e),n},t.prototype.complete=function(){this.stopLoadedChecker(),this.setState({isLoaded:!0})},t.prototype.startLoadedChecker=function(){var e=this,t="[LoadedChecker]",r=15e3,n=Math.min(3500,r),o=!1;this.stopLoadedChecker(),this.loadedTimeoutClock=new ue.a((function(r,i){if(i>=r)e.log.w(t,"已经超时了","强制解除视频的加载状态"),e.setState({isLoadedTimeout:!0});else if(!o&&r-i<n){var a=((r-i)/1e3).toFixed(1);e.log.i(t,"快要超时了","剩余"+a+"秒"),e.loadingStore.ready({message:"收到一条消息...",status:"[警告]",contextMessage:"加载即将超时(15s)，"+a+"秒后强制解除视频的加载状态"}),o=!0}}),r,500)},t.prototype.stopLoadedChecker=function(){this.dc.loadedChecker&&this.dc.loadedChecker(),this.loadedTimeoutClock&&(this.loadedTimeoutClock.abort(),this.loadedTimeoutClock=null)},t.prototype.registerEventEmitter=function(){var e=this;this.dc.committed=Object(D.i)((function(){return e.eventStore.isCommitted}),(function(t){t&&e.rootPlayer.emit(C.a.Player_Committed,new CustomEvent(C.a.Player_Committed))}),{
fireImmediately:!0}),this.dc.prepared=Object(D.i)((function(){return e.eventStore.isPrepared}),(function(t){t&&e.rootPlayer.emit(C.a.Player_Prepared,new CustomEvent(C.a.Player_Prepared))}),{fireImmediately:!0}),this.dc.connectDeferred=Object(D.i)((function(){return e.eventStore.isLoaded}),(function(t){t&&e.rootPlayer.connectDeferred&&e.rootPlayer.connectDeferred.resolve()}),{fireImmediately:!0})},t.prototype.registerEventListener=function(){var e=this;this.rootPlayer.on(C.a.Player_Loop_Signal,(function(t){t.defaultPrevented||(e.loopTimer=self.setTimeout((function(){e.apiStore.seek(0,{initiator:"Loop:Seek"}).then((function(){return e.apiStore.play({initiator:"Loop:Autoplay"})})).catch((function(t){e.log.w(e.tag,"[loop autoplay]",Object(ce.a)(ie||(ie=Object(L.f)(["failed, ",""],["failed, ",""])),t))}))}),1))}),1),this.rootPlayer.on(C.a.Player_Play,this.leavePlayerEndedHandler).on(C.a.Player_TimeUpdate,this.leavePlayerEndedHandler).on(C.a.Player_Seeking,this.leavePlayerEndedHandler),this.rootPlayer.window.addEventListener("mousemove",this.onMouseMove)},t.prototype.leavePlayerEndedHandler=function(){this.apiStore.isEnded(!0)||this.mediaStore.setState({ended:!1})},t.prototype.addVisibilityChangeEvents=function(){document.addEventListener("visibilitychange",this.visibilityChangeHandler),self.addEventListener("pagehide",this.visibilityChangeHandler)},t.prototype.removeVisibilityChangeEvents=function(){document.removeEventListener("visibilitychange",this.visibilityChangeHandler),self.removeEventListener("pagehide",this.visibilityChangeHandler)},t.prototype.visibilityChangeHandler=function(){switch(document.visibilityState){case"hidden":this.setState({pageHidden:!0});break;case"visible":this.setState({pageHidden:!1});break;default:null!=document.hidden&&this.setState({pageHidden:document.hidden})}},t.prototype.boundingRectHandler=function(){var e={},t=this.rootStore.nodes.container,r=this.rootStore.nodes.videoArea;e.videoNodeWidth=Math.round(this.videoStore.video.offsetWidth),e.videoNodeHeight=Math.round(this.videoStore.video.offsetHeight),r&&(e.videoAreaWidth=Math.round(r.offsetWidth),e.videoAreaHeight=Math.round(r.offsetHeight)),t&&(e.containerWidth=Math.round(t.offsetWidth),e.containerHeight=Math.round(t.offsetHeight)),this.setState(e)},t.prototype.resize=function(e,t){var r=this;e?t?this.boundingRectHandler():(cancelAnimationFrame(this.boundingRectTimer),this.boundingRectTimer=requestAnimationFrame((function(){return r.boundingRectHandler()}))):F()||this.resize(!0,t)},t.prototype.onMouseMove=function(e){this.setState({mouseClientX:e.clientX||0,mouseClientY:e.clientY||0})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,{kind:!0,mainScreen:!0,sideScreen:!0,pageHidden:!0,pipWindowWidth:!0,pipWindowHeight:!0,videoNodeWidth:!0,videoNodeHeight:!0,videoAreaWidth:!0,videoAreaHeight:!0,containerWidth:!0,containerHeight:!0,mouseClientX:!0,mouseClientY:!0,miniScreenRight:!0,miniScreenBottom:!0})},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),clearTimeout(this.loopTimer),cancelAnimationFrame(this.boundingRectTimer),this.stopLoadedChecker(),this.removeVisibilityChangeEvents(),this.rootPlayer.window.removeEventListener("mousemove",this.onMouseMove)},Object(L.c)([D.e],t.prototype,"isTinyView",null),Object(L.c)([D.e],t.prototype,"isFullView",null),Object(L.c)([D.e],t.prototype,"hasBlackGap",null),Object(L.c)([D.e],t.prototype,"screenKind",null),Object(L.c)([ee.a],t.prototype,"leavePlayerEndedHandler",null),Object(L.c)([ee.a],t.prototype,"visibilityChangeHandler",null),Object(L.c)([ee.a],t.prototype,"onMouseMove",null),t}(se.a),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[MediaStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{ended:!1,paused:!0,duration:NaN,remoteDuration:NaN,currentTime:0,progressTime:0,bufferedTime:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){switch(this.configStore.state.ips){case 2:return!1;case 1:return!0;default:
return!this.episodeStore.isFirst||this.clientStore.state.autoplay}},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){e.prototype.onMount.call(this),this.addEvents()},t.prototype.addEvents=function(){var e=this;this.rootPlayer.on(C.a.Player_DurationChange,(function(){e.setState({duration:e.apiStore.getDuration(),remoteDuration:e.apiStore.getDuration(!0)})})).on(C.a.Player_TimeUpdate,(function(){e.setState({currentTime:e.apiStore.getCurrentTime()})})).on(C.a.Player_Progress,(function(){e.setState({bufferedTime:e.getBufferRange()[1]})})).on(C.a.Player_ProgressBar_Change,(function(t){e.setState({progressTime:t.detail.progressTime})}))},t.prototype.getBufferRange=function(e){var t=this.videoStore.video,r=t.buffered,n=t.currentTime;if(r&&r.length){if(e)return[r.start(r.length-1),r.end(r.length-1)];for(var o=0,i=1/0,a=0;a<r.length;a++){var s=r.start(a),u=r.end(a);if(s<=n&&u>=n)return[r.start(a),r.end(a)];var c=Math.min(Math.abs(n-s),Math.abs(n-u));i>c&&(o=a,i=c)}return[r.start(o),r.end(o)]}return[0,0]},t.prototype.isTinyView=function(){return this.uiStore.state.mainScreen===R.g.Mini||(this.uiStore.state.containerWidth<=480||this.uiStore.state.containerHeight<=320)},t.prototype.isFullView=function(){return this.uiStore.state.sideScreen===R.g.Full||this.uiStore.state.mainScreen===R.g.Web},t.prototype.isBlackGap=function(){return this.apiStore.getScreenKind()===R.g.Normal&&!this.clientStore.state.hideBlackGap},t.prototype.internalSeek=function(e){var t=this.videoStore.video;this.rootPlayer.emit(C.b.PLAYER_BEFORE_SEEKING,t.currentTime,e),this.kernelStore.baseAgent?this.kernelStore.baseAgent.seek(e):t.currentTime=e},t}(se.a),de=r(57),fe=function(e){function t(t){var r=e.call(this,t)||this;return r.tag="[VideoStore]",r.lagLoadTimer=null,r.bufferingDetails={timer:-1,interval:250,previousTime:0},r.fallbackToMuted=!0,r.element=document.createElement("video"),r.element.crossOrigin="anonymous",r}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{seeking:!1,buffering:!1,isMetadataLoaded:!1,isInternalWaiting:!1,isCheckingBuffer:!1,autoplayExhausted:!1,autoplayPlanB:!1,autoplayNotAllowed:!1,lagLastSeekTime:-1,firstPlay:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.addMediaEvents(),this.dc.checkBuffering=Object(D.i)((function(){return t.state.isCheckingBuffer}),(function(e){t.dirtyBufferingChecker(!e)}),{fireImmediately:!0}),this.dc.playingAndWaiting=Object(D.i)((function(){return{paused:t.mediaStore.state.paused,waiting:t.state.isInternalWaiting}}),(function(e){queueMicrotask((function(){e.paused||(e.waiting?t.rootPlayer.emit(C.b.MEDIA_WAITING):t.rootPlayer.emit(C.b.MEDIA_PLAYING))}))}),{fireImmediately:!0}),this.dc.isMetadataLoaded=Object(D.i)((function(){return t.state.isMetadataLoaded}),(function(e){e&&t.loadingStore.ready({kind:5,endState:1},{kind:6})}),{fireImmediately:!0}),this.dc.buffering=Object(D.i)((function(){return t.state.buffering}),(function(e){t.hackBuffering(e)}))},t.prototype.isSameProgressTime=function(){return this.video.currentTime===this.mediaStore.state.progressTime},t.prototype.clearLagLoadTimer=function(){clearTimeout(this.lagLoadTimer),this.lagLoadTimer=null},t.prototype.hackBuffering=function(e){var t=this;e?this.lagLoadTimer||(this.lagLoadTimer=window.setTimeout((function(){if(t.apiStore.excludedBuffering(!0))t.hackBuffering(!1);else if(t.state.lagLastSeekTime!==t.apiStore.getCurrentTime()||0===t.state.lagLastSeekTime){var e=t.apiStore.getCurrentTime(),r=e+.5;de.a.safari.alike&&e<1?r=1:t.video.buffered&&t.video.buffered.length&&e<t.video.buffered.start(0)&&(r=t.video.buffered.start(0)),t.log.w(t.tag,"[Lag:Rescue]","currentTime:"+e+",seekTime:"+r),t.mediaStore.internalSeek(r),t.setState({lagLastSeekTime:e})}else t.rootPlayer.emit(C.b.PLAYER_PLAYBACK_LAG)}),5e3)):this.clearLagLoadTimer()},t.prototype.dirtyBufferingChecker=function(e){var t=this
;if(e)return clearInterval(this.bufferingDetails.timer),void this.setState({buffering:!1});clearInterval(this.bufferingDetails.timer),this.bufferingDetails.timer=self.setInterval((function(){if(t.videoStore.video){var e=t.bufferingDetails.previousTime===t.videoStore.video.currentTime&&!t.apiStore.excludedBuffering();t.state.buffering!==e&&t.setState({buffering:e,isInternalWaiting:e}),e||(t.bufferingDetails.previousTime=t.videoStore.video.currentTime)}}),this.bufferingDetails.interval)},t.prototype.firstPlayback=function(e,t){var r=this;this.log.i(this.tag,"[autoplay]","start"),this.apiStore.play({initiator:"Initial:Autoplay"}).then((function(){r.log.i(r.tag,"[autoplay]","done"),r.setState({autoplayExhausted:!0,autoplayPlanB:!!t})})).catch((function(n){if(e&&!r.video.muted)return r.log.i(r.tag,"[autoplay]","fallback"),r.video.muted=!0,r.firstPlayback(!1,!0);switch(t&&r.video.muted&&(r.log.i(r.tag,"[autoplay]","reset HTMLMediaElement.muted"),r.video.muted=!1),r.log.w(r.tag,"[autoplay]","fail:",n&&n.message),n&&n.name){case"NotAllowedError":r.setState({autoplayNotAllowed:!0}),r.rootPlayer.emit(C.a.Media_Autoplay_Not_Allowed,new CustomEvent(C.a.Media_Autoplay_Not_Allowed))}}))},t.prototype.getInternalAutoplay=function(e){if(!e)return!1;switch(this.configStore.state.ips){case 2:return!1;case 1:case 0:default:return!0}},t.prototype.startAutoPlayback=function(){var e=!1;null!=this.configStore.t&&(this.configStore.t>0&&this.configStore.t<this.video.duration&&(this.log.i(this.tag,"[Config.t]","Seek to "+this.configStore.t+"s"),this.mediaStore.internalSeek(this.configStore.t),e=!0),this.configStore.remove("t")),this.state.autoplayExhausted||(this.mediaStore.autoplay||this.getInternalAutoplay(e))&&this.firstPlayback(this.fallbackToMuted)},t.prototype.addMediaEvents=function(){this.video&&(this.video.addEventListener("loadstart",this.onLoadStart),this.video.addEventListener("loadedmetadata",this.onLoadedmetadata),this.video.addEventListener("loadeddata",this.onLoadedData),this.video.addEventListener("canplay",this.onCanplay),this.video.addEventListener("error",this.onError),this.video.addEventListener("abort",this.onAbort),this.video.addEventListener("emptied",this.onEmptied),this.video.addEventListener("seeking",this.onSeeking),this.video.addEventListener("seeked",this.onSeeked),this.video.addEventListener("ended",this.onEnded),this.video.addEventListener("play",this.onPlay),this.video.addEventListener("pause",this.onPause),this.video.addEventListener("stalled",this.onStalled),this.video.addEventListener("progress",this.onProgress),this.video.addEventListener("suspend",this.onSuspend),this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("ratechange",this.onRateChange),this.video.addEventListener("volumechange",this.onVolumeChange),this.video.addEventListener("durationchange",this.onDurationChange))},t.prototype.removeMediaEvents=function(){this.video&&(this.video.removeEventListener("loadstart",this.onLoadStart),this.video.removeEventListener("loadedmetadata",this.onLoadedmetadata),this.video.removeEventListener("loadeddata",this.onLoadedData),this.video.removeEventListener("canplay",this.onCanplay),this.video.removeEventListener("error",this.onError),this.video.removeEventListener("abort",this.onAbort),this.video.removeEventListener("emptied",this.onEmptied),this.video.removeEventListener("seeking",this.onSeeking),this.video.removeEventListener("seeked",this.onSeeked),this.video.removeEventListener("ended",this.onEnded),this.video.removeEventListener("play",this.onPlay),this.video.removeEventListener("pause",this.onPause),this.video.removeEventListener("stalled",this.onStalled),this.video.removeEventListener("progress",this.onProgress),this.video.removeEventListener("suspend",this.onSuspend),this.video.removeEventListener("timeupdate",this.onTimeUpdate),this.video.removeEventListener("ratechange",this.onRateChange),this.video.removeEventListener("volumechange",this.onVolumeChange),this.video.removeEventListener("durationchange",this.onDurationChange))},t.prototype.onLoadStart=function(){
this.perfStore.setStageTiming(5),this.log.i(this.tag,"LoadStart"),this.setState({isCheckingBuffer:!1}),this.rootPlayer.emit(C.b.MEDIA_LOADSTART)},t.prototype.onLoadedmetadata=function(){this.perfStore.setStageTiming(6),this.log.i(this.tag,"Loadedmetadata"),this.startAutoPlayback(),this.setState({isMetadataLoaded:!0}),this.rootPlayer.emit(C.b.MEDIA_LOADEDMETADATA)},t.prototype.onLoadedData=function(){this.perfStore.setStageTiming(7),this.log.i(this.tag,"LoadedData"),this.uiStore.complete(),this.rootPlayer.emit(C.b.MEDIA_LOADEDDATA)},t.prototype.onCanplay=function(){this.perfStore.setStageTiming(8),this.uiStore.complete(),this.rootPlayer.emit(C.b.MEDIA_CANPLAY)},t.prototype.onError=function(e){this.loadingStore.ready({kind:5,endState:2,contextMessage:e&&e.message}),this.rootPlayer.emit(C.b.MEDIA_ERROR)},t.prototype.onAbort=function(){this.rootPlayer.emit(C.b.MEDIA_ABORT)},t.prototype.onEmptied=function(){this.rootPlayer.emit(C.b.MEDIA_EMPTIED)},t.prototype.onSeeking=function(){this.setState({seeking:!0}),this.rootPlayer.emit(C.b.MEDIA_SEEKING),this.isSameProgressTime()||this.rootPlayer.emit(C.a.Player_ProgressBar_Change,new CustomEvent(C.a.Player_ProgressBar_Change,{detail:{progressTime:this.video.currentTime,initiator:R.e.SeekingEvent}}))},t.prototype.onSeeked=function(){this.setState({seeking:!1}),this.rootPlayer.emit(C.b.MEDIA_SEEKED)},t.prototype.onStalled=function(){this.rootPlayer.emit(C.b.MEDIA_STALLED)},t.prototype.onProgress=function(){this.rootPlayer.emit(C.b.MEDIA_PROGRESS)},t.prototype.onSuspend=function(){this.rootPlayer.emit(C.b.MEDIA_SUSPEND)},t.prototype.onTimeUpdate=function(){this.rootPlayer.emit(C.b.MEDIA_TIMEUPDATE),this.isSameProgressTime()||this.rootPlayer.emit(C.a.Player_ProgressBar_Change,new CustomEvent(C.a.Player_ProgressBar_Change,{detail:{progressTime:this.video.currentTime,initiator:R.e.TimeupdateEvent}}))},t.prototype.onRateChange=function(){this.clientStore.setState({playbackRate:this.video.playbackRate}),this.rootPlayer.emit(C.b.MEDIA_RATECHANGE)},t.prototype.onVolumeChange=function(){this.clientStore.setState({muted:this.video.muted,volume:this.video.volume}),this.rootPlayer.emit(C.b.MEDIA_VOLUMECHANGE)},t.prototype.onDurationChange=function(){this.rootPlayer.emit(C.b.MEDIA_DURATIONCHANGE)},t.prototype.onEnded=function(){this.setState({isCheckingBuffer:!1}),this.rootPlayer.emit(C.b.MEDIA_ENDED)},t.prototype.onPlay=function(){this.state.firstPlay||this.setState({firstPlay:Date.now()}),this.setState({isCheckingBuffer:!0}),this.rootPlayer.emit(C.b.MEDIA_PLAY)},t.prototype.onPause=function(){this.setState({isCheckingBuffer:!1}),this.rootPlayer.emit(C.b.MEDIA_PAUSE)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.dirtyBufferingChecker(!0),this.clearLagLoadTimer()},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.removeMediaEvents()},Object(L.c)([ee.a],t.prototype,"onLoadStart",null),Object(L.c)([ee.a],t.prototype,"onLoadedmetadata",null),Object(L.c)([ee.a],t.prototype,"onLoadedData",null),Object(L.c)([ee.a],t.prototype,"onCanplay",null),Object(L.c)([ee.a],t.prototype,"onError",null),Object(L.c)([ee.a],t.prototype,"onAbort",null),Object(L.c)([ee.a],t.prototype,"onEmptied",null),Object(L.c)([ee.a],t.prototype,"onSeeking",null),Object(L.c)([ee.a],t.prototype,"onSeeked",null),Object(L.c)([ee.a],t.prototype,"onStalled",null),Object(L.c)([ee.a],t.prototype,"onProgress",null),Object(L.c)([ee.a],t.prototype,"onSuspend",null),Object(L.c)([ee.a],t.prototype,"onTimeUpdate",null),Object(L.c)([ee.a],t.prototype,"onRateChange",null),Object(L.c)([ee.a],t.prototype,"onVolumeChange",null),Object(L.c)([ee.a],t.prototype,"onDurationChange",null),Object(L.c)([ee.a],t.prototype,"onEnded",null),Object(L.c)([ee.a],t.prototype,"onPlay",null),Object(L.c)([ee.a],t.prototype,"onPause",null),t}(se.a);function he(e){return{storageKey:e.storageKey,element:e.element,auxiliary:e.auxiliary,mntAuxSender:e.mntAuxSender,mntAuxConfig:e.mntAuxConfig,screenKind:e.screenKind,channelKind:e.channelKind,serviceKind:e.serviceKind,hideBoxShadow:e.hideBoxShadow,prefetch:e.prefetch,
muted:e.muted,quality:e.quality,featureList:e.featureList}}!function(e){e.BlackGap="setBlackGap"}(ae||(ae={}));var ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.codecTypeKey="bilibili_player_codec_prefer_type",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{loop:!1,muted:!1,mirror:!1,lightOff:!1,autoplay:V.h,hideBlackGap:!V.i,volume:V.p,playbackRate:1,aspectRatio:"0:0",codecType:0,handoff:V.m}},enumerable:!1,configurable:!0}),t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this),this.rootPlayer.hasFeature("blackGap")?this.setState({hideBlackGap:this.localStore.get().media.hideBlackGap}):this.setState({hideBlackGap:!0}),this.setState({codecType:this.getLocalCodecType()})},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.setBlackGapCookie(!0),this.addReactions()},t.prototype.onMounted=function(){e.prototype.onMounted.call(this);var t=this.localStore.get().media;this.apiStore.setVolume(t.volume),this.apiStore.setAutoplay(t.autoplay),this.apiStore.setHandoff(t.handoff)},t.prototype.setBlackGapCookie=function(e){var t=String(+!this.state.hideBlackGap);(e||T.a.get(V.j)!==t)&&T.a.set(V.j,t)},t.prototype.addReactions=function(){var e=this;this.dc.loopAndEnded=Object(D.i)((function(){return e.state.loop}),(function(t){t?e.mediaStore.setState({ended:!1}):e.mediaStore.setState({ended:e.apiStore.isEnded(!0)}),e.rootPlayer.emit(C.a.Player_LoopChange,new CustomEvent(C.a.Player_LoopChange))})),this.dc.mirror=Object(D.i)((function(){return e.state.mirror}),(function(t){e.rootPlayer.emit(C.a.Player_MirrorChange,new CustomEvent(C.a.Player_MirrorChange))})),this.dc.aspectRatio=Object(D.i)((function(){return e.state.aspectRatio}),(function(t){e.uiStore.resize(!1,!1),e.rootPlayer.emit(C.a.Player_AspectRatioChange,new CustomEvent(C.a.Player_AspectRatioChange))})),this.dc.lightOff=Object(D.i)((function(){return e.state.lightOff}),(function(t){e.rootPlayer.emit(C.a.Player_LightOffChange,new CustomEvent(C.a.Player_LightOffChange))})),this.dc.hideBlackGap=Object(D.i)((function(){return e.state.hideBlackGap}),(function(t){e.uiStore.resize(!1,!1),e.localStore.set({media:{hideBlackGap:t}}),e.rootPlayer.fn(ae.BlackGap,!1,{blackGap:!t,screenKind:e.apiStore.getScreenKind()}),e.setBlackGapCookie(!0),e.rootPlayer.emit(C.a.Player_BlackGapChange,new CustomEvent(C.a.Player_BlackGapChange,{detail:{blackGap:!t,screenKind:e.apiStore.getScreenKind()}}))})),this.dc.autoplay=Object(D.i)((function(){return e.state.autoplay}),(function(t){e.localStore.set({media:{autoplay:t}}),e.rootPlayer.emit(C.a.Player_AutoplayChange,new CustomEvent(C.a.Player_AutoplayChange))})),this.dc.handoff=Object(D.i)((function(){return e.state.handoff}),(function(t){e.localStore.set({media:{handoff:t}}),e.rootPlayer.emit(C.a.Player_HandoffChange,new CustomEvent(C.a.Player_HandoffChange))})),this.dc.volume=Object(D.i)((function(){return e.state.volume}),(function(t){t?e.localStore.set({media:{volume:t,nonzeroVol:t}}):e.localStore.set({media:{volume:t}})})),this.dc.codecType=Object(D.i)((function(){return e.state.codecType}),(function(t){e.setLocalCodecType(t),e.rootPlayer.emit(C.a.Player_PreferCodecChange,new CustomEvent(C.a.Player_PreferCodecChange))}))},t.prototype.getLocalCodecType=function(){var e=+function(e){try{return localStorage.getItem(e)}catch(e){return null}}(this.codecTypeKey);switch(e){case 0:case 1:case 2:return e;default:return 0}},t.prototype.setLocalCodecType=function(e){!function(e,t){try{localStorage.setItem(e,t)}catch(e){}}(this.codecTypeKey,String(e))},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,{muted:1,mirror:1,lightOff:1,autoplay:1,hideBlackGap:1,volume:1,playbackRate:1,aspectRatio:1,codecType:1,handoff:1})},t}(se.a);function me(){return!(de.a.safari.alike&&!de.a.safari.mseSupported)&&(window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))}var ve=r(273),be=r(285),ge=r(161),Se=r.n(ge);function Ee(e){return e.toLowerCase()}
var Oe=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],we=/[^A-Z0-9]+/gi;function _e(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function Pe(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?Oe:r,o=t.stripRegexp,i=void 0===o?we:o,a=t.transform,s=void 0===a?Ee:a,u=t.delimiter,c=void 0===u?" ":u,l=_e(_e(e,n,"$1\0$2"),i,"\0"),p=0,d=l.length;"\0"===l.charAt(p);)p++;for(;"\0"===l.charAt(d-1);)d--;return l.slice(p,d).split("\0").map(s).join(c)}(e,Object(L.a)({delimiter:"."},t))}var ke=r(22),xe=r(12);var je,Ae=function(e){if(!Object(xe.a)(e))return!1;var t=Object(ke.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Te=r(11),De=Te.a["__core-js_shared__"],Le=(je=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+je:"";var Ce=function(e){return!!Le&&Le in e},Re=Function.prototype.toString;var Ie=function(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ne=/^\[object .+?Constructor\]$/,Me=Function.prototype,Ue=Object.prototype,Be=Me.toString,Fe=Ue.hasOwnProperty,Ve=RegExp("^"+Be.call(Fe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var He=function(e){return!(!Object(xe.a)(e)||Ce(e))&&(Ae(e)?Ve:Ne).test(Ie(e))};var qe=function(e,t){return null==e?void 0:e[t]};var ze=function(e,t){var r=qe(e,t);return He(r)?r:void 0},Ge=ze(Te.a,"DataView"),Ke=ze(Te.a,"Map"),We=ze(Te.a,"Promise"),Qe=ze(Te.a,"Set"),$e=ze(Te.a,"WeakMap"),Ye="[object Map]",Je="[object Promise]",Xe="[object Set]",Ze="[object WeakMap]",et="[object DataView]",tt=Ie(Ge),rt=Ie(Ke),nt=Ie(We),ot=Ie(Qe),it=Ie($e),at=ke.a;(Ge&&at(new Ge(new ArrayBuffer(1)))!=et||Ke&&at(new Ke)!=Ye||We&&at(We.resolve())!=Je||Qe&&at(new Qe)!=Xe||$e&&at(new $e)!=Ze)&&(at=function(e){var t=Object(ke.a)(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ie(r):"";if(n)switch(n){case tt:return et;case rt:return Ye;case nt:return Je;case ot:return Xe;case it:return Ze}return t});var st=at,ut=r(20);var ct=function(e){return Object(ut.a)(e)&&"[object Set]"==st(e)};var lt=function(e){return function(t){return e(t)}},pt=r(48),dt=pt.a&&pt.a.isSet,ft=dt?lt(dt):ct,ht=function(e){function t(t){var r=e.call(this,t)||this;return r.tag="[ConfigStore]",r.tmp={},r.themeKeys=new Set,r.validKeys=new Set(["p","aid","cid","bvid","seasonId","episodeId"]),r.debug={},r.reload={},r.primary={},r.debug=r.rootPlayer.searchParam,r.tmp.mseSupported=me(),(de.a.iPad.alike||de.a.tesla.alike)&&r.pointingDevice.set(2),r.setSessionConfig(),r.setPrimaryConfig(),r.injectSinkTheme(),r}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{ips:0,ctrl:0,isRequestId:!1,isCompleteIdEnded:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.primary.storageKey||V.o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.primary.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auxiliary",{get:function(){return this.primary.auxiliary||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mntAuxSender",{get:function(){if(this.primary.mntAuxSender){if("string"==typeof this.primary.mntAuxSender){var e=this.rootStore.nodes.container.querySelector(this.primary.mntAuxSender);return e&&(this.primary.mntAuxSender=e),e}return this.primary.mntAuxSender}return this.isService(R.h.Union)?null:this.rootStore.nodes.controlBottomCenter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mntAuxConfig",{get:function(){return this.primary.mntAuxConfig?this.primary.mntAuxConfig:this.primary.mntAuxConfig={}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenKind",{get:function(){var e;return null!==(e=this.primary.screenKind)&&void 0!==e?e:R.g.Normal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"channelKind",{get:function(){
var e;return null!==(e=this.primary.channelKind)&&void 0!==e?e:R.a.Default},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceKind",{get:function(){var e;return null!==(e=this.primary.serviceKind)&&void 0!==e?e:R.h.Union},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBoxShadow",{get:function(){return!!this.primary.hideBoxShadow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return null!=this.ndb.autoplay?this.ndb.autoplay?1:2:null==this.reload.autoplay?0:this.reload.autoplay?1:2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.primary.muted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.getParsedQuality(this.primary.quality)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kind",{get:function(){var e;return null!==(e=this.reload.kind)&&void 0!==e?e:R.c.Ugc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"p",{get:function(){return+this.reload.p||1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"t",{get:function(){return null!=this.ndb.t?+this.ndb.t:null==this.reload.t?null:+this.reload.t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aid",{get:function(){return+this.reload.aid||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cid",{get:function(){return+this.reload.cid||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bvid",{get:function(){return this.reload.bvid||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seasonId",{get:function(){return+this.reload.seasonId||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"episodeId",{get:function(){return+this.reload.episodeId||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stats",{get:function(){return this.reload.stats?this.reload.stats:this.reload.stats={}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fromDid",{get:function(){return this.reload.replyDid?this.reload.replyDid:this.reload.fromDid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"replyDid",{get:function(){return this.reload.replyDid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpQuery",{get:function(){return this.reload.httpQuery?this.reload.httpQuery:this.reload.httpQuery={}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controlsList",{get:function(){return ft(this.reload.controlsList)?this.reload.controlsList:this.reload.controlsList=new Set},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seasonType",{get:function(){return+this.reload.seasonType||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ndb",{get:function(){return this.debug},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pid",{get:function(){return this.tmp.pid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"session",{get:function(){return this.tmp.session},set:function(e){e&&(this.tmp.session=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mseSupported",{get:function(){return this.tmp.mseSupported},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointingDevice",{get:function(){return this.tmp.pointingDevice||(this.tmp.pointingDevice=new ve.a(3)),this.tmp.pointingDevice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spmId",{get:function(){return this.stats.spmId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spmIdFrom",{get:function(){return this.stats.spmIdFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bSource",{get:function(){return this.stats.bSource},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"referrer",{get:function(){return"string"==typeof this.stats.referrer?this.stats.referrer:document.referrer},enumerable:!1,configurable:!0}),
Object.defineProperty(t.prototype,"isPreLogin",{get:function(){return!!T.a.get("DedeUserID")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInteraction",{get:function(){return this.userStore.info?!!this.userStore.info.interaction:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onlyTouchMode",{get:function(){return this.pointingDevice.isOnlyAllow(2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noDanmaku",{get:function(){return Boolean(this.rootPlayer.input.noDanmaku)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activityKey",{get:function(){return Boolean(this.rootPlayer.input.activityKey)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"watchlater",{get:function(){return Boolean(this.rootPlayer.input.watchlater)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playlistId",{get:function(){return Number(this.rootPlayer.input.playlistId)},enumerable:!1,configurable:!0}),t.getRandomString=function(){return(T.a.get("buvid3")||Math.floor(1e5*Math.random()).toString(16))+Date.now()},t.prototype.setSessionConfig=function(){this.tmp.pid=M(),this.tmp.session=Se()(t.getRandomString())},t.prototype.injectSinkTheme=function(){var e=this;if(this.rootPlayer.theme){var t=this.rootPlayer.theme,r=[];Object.keys(t).filter((function(e){var n,o;"string"==typeof e&&/^bpx.+/i.test(e)&&"string"==typeof t[e]&&r.push([(n=e,void 0===o&&(o={}),Pe(n,Object(L.a)({delimiter:"-"},o))),t[e]])})),r.forEach((function(t){e.themeKeys.add("--"+t[0]),e.rootPlayer.majorNode.style.setProperty("--"+t[0],t[1]),e.rootPlayer.minorNode.style.setProperty("--"+t[0],t[1]),e.rootPlayer.patchNode.style.setProperty("--"+t[0],t[1])}))}},t.prototype.removeSinkTheme=function(){var e=this;this.themeKeys.forEach((function(t){e.rootPlayer.majorNode&&e.rootPlayer.majorNode.style.removeProperty(t),e.rootPlayer.minorNode&&e.rootPlayer.minorNode.style.removeProperty(t),e.rootPlayer.patchNode&&e.rootPlayer.patchNode.style.removeProperty(t)})),this.themeKeys.clear()},t.prototype.setPrimaryConfig=function(){this.primary=he(this.rootPlayer.input)},t.prototype.onStateCreate=function(){e.prototype.onStateCreate.call(this)},t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this),this.setReloadConfig();var t=this.quality;this.qualityStore.setState({nowQuality:t.value,newQuality:t.value,reqQuality:t.value,isExtQuality:t.isExt}),this.auxiliaryStore.setState({isListSpread:!!this.mntAuxConfig.isTabListOpen,disableListSwitch:!!this.mntAuxConfig.isUserSwitchingDisabled}),this.apiStore.requestScreen(this.screenKind).catch(te.a),null!=this.muted&&this.apiStore.setMuted(this.muted),null!=this.debug.ctrl&&this.setState({ctrl:this.debug.ctrl%2?2:1}),this.attachBaseNode()},t.prototype.setReloadConfig=function(){var e;this.reload={kind:(e=this.rootPlayer.input).kind,aid:e.aid,cid:e.cid,bvid:e.bvid,seasonId:e.seasonId,episodeId:e.episodeId,p:e.p,t:e.t,fromDid:e.fromDid,replyDid:e.replyDid,stats:e.stats,seasonType:e.seasonType,httpQuery:e.httpQuery,controlsList:e.controlsList,autoplay:e.autoplay},this.uiStore.setState({kind:this.kind}),null!=this.autoplay&&(this.log.i(this.tag,"[InitialPlaybackState]",this.autoplay),this.setState({ips:this.autoplay}))},t.prototype.cleanSessionConfig=function(e){if(this.rootPlayer.input&&"object"==typeof this.rootPlayer.input){var t={kind:this.reload.kind,seasonType:this.reload.seasonType,controlsList:this.reload.controlsList,autoplay:this.reload.autoplay};Object.assign(this.rootPlayer.input,{kind:null,p:null,t:null,aid:null,cid:null,bvid:null,seasonId:null,episodeId:null,seasonType:null,stats:null,fromDid:null,replyDid:null,httpQuery:null,controlsList:null,autoplay:null},t,e)}},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.injectFnVal()},t.prototype.onCommitted=function(){e.prototype.onCommitted.call(this),this.cleanPrefetchData(),this.injectGlobalPlayer(),this.fetchCompleteId()},t.prototype.has=function(e){return null!=this.rootPlayer.input[e]},t.prototype.remove=function(e){switch(e){case"t":
case"cid":this.reload[e]=null;break;default:0}},t.prototype.isChannel=function(e){return this.channelKind===e},t.prototype.isService=function(e){return this.serviceKind===e},t.prototype.startReloadParser=function(e){this.cleanSessionConfig(e),this.setSessionConfig(),this.setReloadConfig()},t.prototype.fetchCompleteId=function(){var e=this,t=this.httpStore.getViewKind();t.isFatalError&&(this.log.e(this.tag,"视频参数异常"),this.loadingStore.ready({kind:3,endState:2})),this.perfStore.setStageTiming(1),t.isMissing?(this.loadingStore.ready({kind:2}),this.httpStore.fetchViewInfo(!0).then((function(t){t&&t.body&&e.fillCompleteId(t.body),e.loadingStore.ready({kind:2,endState:1}),e.setCompleteIdEnded()})).catch((function(t){e.loadingStore.ready({kind:2,endState:2,contextMessage:t&&t.message}),e.setCompleteIdEnded()})),this.setState({isRequestId:!0})):(this.log.i(this.tag,"视频参数正常"),this.setCompleteIdEnded())},t.prototype.setCompleteIdEnded=function(){this.perfStore.setStageTiming(2),this.setState({isCompleteIdEnded:!0})},t.prototype.fillCompleteId=function(e){var t=this;e&&Object.keys(e).forEach((function(r){t.validKeys.has(r)&&(t.reload[r]=e[r])}))},t.prototype.getParsedQuality=function(e){var t=be.a.normalize(e);if(null==e||isNaN(t)){var r=+T.a.get(V.l);return(e=be.a.normalize(r)||V.n)>be.a.gtnMseSupported&&!this.configStore.mseSupported&&(e=be.a.gtnMseSupported),!this.configStore.isPreLogin&&e>be.a.gtnLogin&&(e=V.n),{value:e,isExt:!1}}return{value:t,isExt:!0}},t.prototype.attachBaseNode=function(){this.element&&!this.rootPlayer.majorNode.parentElement&&(Object(z.a)(this.element),this.element.appendChild(this.rootPlayer.majorNode)),this.auxiliary&&!this.rootPlayer.minorNode.parentElement&&(Object(z.a)(this.auxiliary),this.auxiliary.appendChild(this.rootPlayer.minorNode))},t.prototype.detachBaseNode=function(){this.rootPlayer.majorNode&&this.rootPlayer.majorNode.parentElement&&this.rootPlayer.majorNode.parentElement.removeChild(this.rootPlayer.majorNode),this.rootPlayer.minorNode&&this.rootPlayer.minorNode.parentElement&&this.rootPlayer.minorNode.parentElement.removeChild(this.rootPlayer.minorNode),this.rootPlayer.patchNode&&this.rootPlayer.patchNode.parentElement&&this.rootPlayer.patchNode.parentElement.removeChild(this.rootPlayer.patchNode)},t.prototype.cleanPrefetchData=function(){if(this.ndb.nocache){for(var e in this.rootPlayer.cd)Object.prototype.hasOwnProperty.call(this.rootPlayer.cd,e)&&delete this.rootPlayer.cd[e];return console.warn(this.tag,"Prefetch data has been disabled"),!0}return!1},t.prototype.injectGlobalPlayer=function(e){void 0===e&&(e=100);var t=this.debug.player,r=0;if(t&&isNaN(+t)){for(;null!=self[t]&&!(++r>e);)t=this.debug.player+r;null==self[t]?(self[t]=this.rootPlayer,this.tmp.gpn=t,console.log(this.tag,"GlobalPlayerName:",t,this.element)):console.warn(this.tag,"Inject Failed")}},t.prototype.injectFnVal=function(){T.a.set(V.k,80..toString())},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,{ctrl:1})},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.tmp.gpn&&delete self[this.tmp.gpn],this.removeSinkTheme(),this.detachBaseNode()},Object(L.c)([D.g.shallow],t.prototype,"debug",void 0),Object(L.c)([D.g.shallow],t.prototype,"reload",void 0),Object(L.c)([D.g.shallow],t.prototype,"primary",void 0),Object(L.c)([D.b],t.prototype,"setPrimaryConfig",null),Object(L.c)([D.b],t.prototype,"setReloadConfig",null),t}(se.a);var yt=function(){this.__data__=[],this.size=0};var mt=function(e,t){return e===t||e!=e&&t!=t};var vt=function(e,t){for(var r=e.length;r--;)if(mt(e[r][0],t))return r;return-1},bt=Array.prototype.splice;var gt=function(e){var t=this.__data__,r=vt(t,e);return!(r<0)&&(r==t.length-1?t.pop():bt.call(t,r,1),--this.size,!0)};var St=function(e){var t=this.__data__,r=vt(t,e);return r<0?void 0:t[r][1]};var Et=function(e){return vt(this.__data__,e)>-1};var Ot=function(e,t){var r=this.__data__,n=vt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function wt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}
wt.prototype.clear=yt,wt.prototype.delete=gt,wt.prototype.get=St,wt.prototype.has=Et,wt.prototype.set=Ot;var _t=wt;var Pt=function(){this.__data__=new _t,this.size=0};var kt=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var xt=function(e){return this.__data__.get(e)};var jt=function(e){return this.__data__.has(e)},At=ze(Object,"create");var Tt=function(){this.__data__=At?At(null):{},this.size=0};var Dt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Lt=Object.prototype.hasOwnProperty;var Ct=function(e){var t=this.__data__;if(At){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Lt.call(t,e)?t[e]:void 0},Rt=Object.prototype.hasOwnProperty;var It=function(e){var t=this.__data__;return At?void 0!==t[e]:Rt.call(t,e)};var Nt=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=At&&void 0===t?"__lodash_hash_undefined__":t,this};function Mt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Mt.prototype.clear=Tt,Mt.prototype.delete=Dt,Mt.prototype.get=Ct,Mt.prototype.has=It,Mt.prototype.set=Nt;var Ut=Mt;var Bt=function(){this.size=0,this.__data__={hash:new Ut,map:new(Ke||_t),string:new Ut}};function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Vt=function(e){var t=Ft(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ht=function(e,t){var r=e.__data__;return Vt(t)?r["string"==typeof t?"string":"hash"]:r.map};var qt=function(e){var t=Ht(this,e).delete(e);return this.size-=t?1:0,t};var zt=function(e){return Ht(this,e).get(e)};var Gt=function(e){return Ht(this,e).has(e)};var Kt=function(e,t){var r=Ht(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Wt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wt.prototype.clear=Bt,Wt.prototype.delete=qt,Wt.prototype.get=zt,Wt.prototype.has=Gt,Wt.prototype.set=Kt;var Qt=Wt;var $t=function(e,t){var r=this.__data__;if(r instanceof _t){var n=r.__data__;if(!Ke||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qt(n)}return r.set(e,t),this.size=r.size,this};function Yt(e){var t=this.__data__=new _t(e);this.size=t.size}Yt.prototype.clear=Pt,Yt.prototype.delete=kt,Yt.prototype.get=xt,Yt.prototype.has=jt,Yt.prototype.set=$t;var Jt=Yt,Xt=function(){try{var e=ze(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Zt=function(e,t,r){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var er=function(e,t,r){(void 0!==r&&!mt(e[t],r)||void 0===r&&!(t in e))&&Zt(e,t,r)};var tr=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===r(i[u],u,i))break}return t}}(),rr=r(163),nr=Te.a.Uint8Array;var or=function(e){var t=new e.constructor(e.byteLength);return new nr(t).set(new nr(e)),t};var ir=function(e,t){var r=t?or(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var ar=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},sr=Object.create,ur=function(){function e(){}return function(t){if(!Object(xe.a)(t))return{};if(sr)return sr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),cr=r(76),lr=Object.prototype;var pr=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lr)};var dr=function(e){return"function"!=typeof e.constructor||pr(e)?{}:ur(Object(cr.a)(e))};var fr=function(e){return Object(ut.a)(e)&&"[object Arguments]"==Object(ke.a)(e)},hr=Object.prototype,yr=hr.hasOwnProperty,mr=hr.propertyIsEnumerable,vr=fr(function(){return arguments}())?fr:function(e){return Object(ut.a)(e)&&yr.call(e,"callee")&&!mr.call(e,"callee")},br=Array.isArray;var gr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Sr=function(e){return null!=e&&gr(e.length)&&!Ae(e)}
;var Er=function(e){return Object(ut.a)(e)&&Sr(e)},Or=r(75),wr=r(37),_r={};_r["[object Float32Array]"]=_r["[object Float64Array]"]=_r["[object Int8Array]"]=_r["[object Int16Array]"]=_r["[object Int32Array]"]=_r["[object Uint8Array]"]=_r["[object Uint8ClampedArray]"]=_r["[object Uint16Array]"]=_r["[object Uint32Array]"]=!0,_r["[object Arguments]"]=_r["[object Array]"]=_r["[object ArrayBuffer]"]=_r["[object Boolean]"]=_r["[object DataView]"]=_r["[object Date]"]=_r["[object Error]"]=_r["[object Function]"]=_r["[object Map]"]=_r["[object Number]"]=_r["[object Object]"]=_r["[object RegExp]"]=_r["[object Set]"]=_r["[object String]"]=_r["[object WeakMap]"]=!1;var Pr=function(e){return Object(ut.a)(e)&&gr(e.length)&&!!_r[Object(ke.a)(e)]},kr=pt.a&&pt.a.isTypedArray,xr=kr?lt(kr):Pr;var jr=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Ar=Object.prototype.hasOwnProperty;var Tr=function(e,t,r){var n=e[t];Ar.call(e,t)&&mt(n,r)&&(void 0!==r||t in e)||Zt(e,t,r)};var Dr=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?Zt(r,s,u):Tr(r,s,u)}return r};var Lr=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rr=/^(?:0|[1-9]\d*)$/;var Ir=function(e,t){var r=Cr(e);return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Rr.test(e))&&e>-1&&e%1==0&&e<t},Nr=Object.prototype.hasOwnProperty;var Mr=function(e,t){var r=br(e),n=!r&&vr(e),o=!r&&!n&&Object(Or.a)(e),i=!r&&!n&&!o&&xr(e),a=r||n||o||i,s=a?Lr(e.length,String):[],u=s.length;for(var c in e)!t&&!Nr.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ir(c,u))||s.push(c);return s};var Ur=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Br=Object.prototype.hasOwnProperty;var Fr=function(e){if(!Object(xe.a)(e))return Ur(e);var t=pr(e),r=[];for(var n in e)("constructor"!=n||!t&&Br.call(e,n))&&r.push(n);return r};var Vr=function(e){return Sr(e)?Mr(e,!0):Fr(e)};var Hr=function(e){return Dr(e,Vr(e))};var qr=function(e,t,r,n,o,i,a){var s=jr(e,r),u=jr(t,r),c=a.get(u);if(c)er(e,r,c);else{var l=i?i(s,u,r+"",e,t,a):void 0,p=void 0===l;if(p){var d=br(u),f=!d&&Object(Or.a)(u),h=!d&&!f&&xr(u);l=u,d||f||h?br(s)?l=s:Er(s)?l=ar(s):f?(p=!1,l=Object(rr.a)(u,!0)):h?(p=!1,l=ir(u,!0)):l=[]:Object(wr.a)(u)||vr(u)?(l=s,vr(s)?l=Hr(s):Object(xe.a)(s)&&!Ae(s)||(l=dr(u))):p=!1}p&&(a.set(u,l),o(l,u,n,i,a),a.delete(u)),er(e,r,l)}};var zr=function e(t,r,n,o,i){t!==r&&tr(r,(function(a,s){if(i||(i=new Jt),Object(xe.a)(a))qr(t,r,s,n,e,o,i);else{var u=o?o(jr(t,s),a,s+"",t,r,i):void 0;void 0===u&&(u=a),er(t,s,u)}}),Vr)};var Gr=function(e){return e};var Kr=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Wr=Math.max;var Qr=function(e,t,r){return t=Wr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Wr(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),Kr(e,this,s)}};var $r=function(e){return function(){return e}},Yr=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:$r(t),writable:!0})}:Gr,Jr=Date.now;var Xr=function(e){var t=0,r=0;return function(){var n=Jr(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Yr);var Zr=function(e,t){return Xr(Qr(e,t,Gr),e+"")};function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tn=function(e,t,r){if(!Object(xe.a)(r))return!1;var n=en(t)
;return!!("number"==n?Sr(r)&&Ir(t,r.length):"string"==n&&t in r)&&mt(r[t],e)};var rn=function(e){return Zr((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&tn(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}((function(e,t,r){zr(e,t,r)})),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),t.prototype.onStorageBuild=function(){e.prototype.onStorageBuild.call(this),this.setStorage(),this.storageKey=this.configStore.storageKey,this.available=this.checkAvailability(),this.getBuffer()},t.prototype.getBuffer=function(){try{this.buffer=Object.assign({},JSON.parse(this.storage.getItem(this.storageKey)))}catch(e){this.buffer=Object.assign({},this.buffer),this.log.w(this.tag,e&&e.message)}this.autoSyncMixinBuffer()},t.prototype.autoSyncMixinBuffer=function(){this.mixinBuffer=rn({},this.defProfile,this.buffer)},t.prototype.getSerializedBuffer=function(){return JSON.stringify(Object.assign(this.buffer,{timeStamp:Date.now()}))},t.prototype.checkAvailability=function(){try{var e="__storage_test__";this.storage.setItem(e,e);var t=this.storage.getItem(e)===e;return this.storage.removeItem(e),!t&&this.log.i(this.tag,"Storage is disabled"),t}catch(e){var r="An error occurred while detecting Storage";return e?this.log.w(this.tag,r,e.code,e.name,e.message):this.log.w(this.tag,r),e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==this.storage.length}},t.prototype.get=function(e,t){var r={},n=t?this.buffer:this.mixinBuffer;if(null==e)Object.assign(r,n);else if("string"==typeof e||Array.isArray(e)){(Array.isArray(e)?e:[e]).forEach((function(e){r[e]=n[e]}))}else Object.keys(e).forEach((function(t){var o=n[t];null!=o?r[t]=o:e.hasOwnProperty(t)&&(r[t]=e[t])}));return r},t.prototype.set=function(e,t){var r=this;Object.keys(e).forEach((function(n){t?r.buffer[n]=e[n]:r.buffer[n]&&"object"==typeof r.buffer[n]&&e[n]&&"object"==typeof e[n]?r.buffer[n]=Object.assign(r.buffer[n],e[n]):r.buffer[n]=e[n]})),this.autoSyncMixinBuffer();try{return this.storage.setItem(this.storageKey,this.getSerializedBuffer()),!0}catch(e){return this.log.w(this.tag,"set",e&&e.message),!1}},t.prototype.remove=function(e){var t=this;(Array.isArray(e)?e:[e]).forEach((function(e){t.buffer.hasOwnProperty(e)&&delete t.buffer[e]})),this.autoSyncMixinBuffer();try{return this.storage.setItem(this.storageKey,this.getSerializedBuffer()),!0}catch(e){return this.log.w(this.tag,"remove",e&&e.message),!1}},t}(se.a),on=r(73),an=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[LocalStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defProfile",{get:function(){return Object(on.a)()},enumerable:!1,configurable:!0}),t.prototype.setStorage=function(){this.storage=self.localStorage},t}(nn);var sn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[SessionStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defProfile",{get:function(){return{timeStamp:0,interaction:{}}},enumerable:!1,configurable:!0}),t.prototype.setStorage=function(){this.storage=self.sessionStorage},t}(nn),un=r(5);function cn(e,t){return void 0===t&&(t=self),new Promise((function(r,n){var o=t.document.createElement("script");o.onload=r,o.onerror=n,o.type="text/javascript",o.async=!0,o.crossOrigin="anonymous",o.src=e,t.document.head.appendChild(o)}))}var ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[UserStore]",t.defLoginLevel=3,t.info=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isUserPrepared:!1}},enumerable:!1,configurable:!0}),t.prototype.setUserInfo=function(e){e&&(this.setLevel(e),this.setVIPInfo(e),this.setMemberRole(e),this.setDMPermission(e)),this.info=e},t.prototype.onPrepared=function(){e.prototype.onPrepared.call(this),this.fetchUserDetails().catch(te.a)},
t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.infoLoaded=Object(D.i)((function(){return{info:t.info,isUserPrepared:t.state.isUserPrepared}}),(function(e){e.isUserPrepared&&e.info&&t.rootPlayer.emit(C.b.PLAYER_USER_LOADED,e.info)}))},t.prototype.tryDelayUserResolved=function(){return Object(L.b)(this,void 0,void 0,(function(){var e,t=this;return Object(L.e)(this,(function(r){return this.configStore.isChannel(R.a.Homepage)||this.configStore.isChannel(R.a.Homepage_Topic)?(e=Object(D.l)((function(){return t.eventStore.isLoaded||t.uiStore.state.isLoadedTimeout})),this.dp.delayUserResolved&&this.dp.delayUserResolved(),this.dp.delayUserResolved=function(){return e.cancel()},[2,e]):[2]}))}))},t.prototype.fetchUserDetails=function(){return Object(L.b)(this,void 0,void 0,(function(){var e,t,r=this;return Object(L.e)(this,(function(n){switch(n.label){case 0:return e=Object(D.l)((function(){return r.eventStore.isPrepared})),this.dp.isPrepared&&this.dp.isPrepared(),this.dp.isPrepared=function(){return e.cancel()},[4,e];case 1:return n.sent(),t=this.httpStore.fetchUserInfo(!1),[4,this.tryDelayUserResolved()];case 2:return n.sent(),[2,new Promise((function(e,n){r.dp.isUserPrepared&&r.dp.isUserPrepared(),r.dp.isUserPrepared=Object(D.l)((function(){return r.kernelStore.state.isPlayUrlEnded}),(function(){t.then((function(t){var o=t.body;if(0===t.response.data.code)return r.setUserInfo(o),r.setState({isUserPrepared:!0}),void e(o);r.setUserInfo({err:new Error("Unknown error")}),r.setState({isUserPrepared:!0}),n(new Error("Unknown error"))})).catch((function(e){r.setUserInfo({err:e||new Error("Unknown error")}),r.setState({isUserPrepared:!0}),r.emitErrorCodeSignal(e),n(e)}))}))}))]}}))}))},t.prototype.requestQuickLogin=function(){this.requestQuickLoginPromise().catch(te.a)},t.prototype.requestQuickLoginPromise=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){if(de.a.mobile.alike&&!de.a.iPad.alike)throw this.rootStore.parent.location.href=V.v,new Error("Redirect to login page");return this.mediaStore.isFullView()&&this.apiStore.requestScreen(null).catch(te.a),[2,this.getQuickLoginScript("MiniLogin",V.u).then((function(){return new Promise((function(t,r){var n=new e.rootStore.parent.MiniLogin,o=function(){n&&(n.removeEventListener("success",i),n.removeEventListener("cancel",a))},i=function(){o(),queueMicrotask((function(){e.fetchUserDetails().then(t).catch(r)}))},a=function(){o(),r(new Error("User cancelled"))};n.showComponent(),n.addEventListener("success",i),n.addEventListener("cancel",a)}))})).then((function(){e.rootPlayer.emit(C.a.Player_Access_Changed,new CustomEvent(C.a.Player_Access_Changed))})).catch((function(t){return e.log.w(e.tag,t&&t.message),Promise.reject(t)}))]}))}))},t.prototype.getQuickLoginScript=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(r){return this.rootStore.parent[e]?[2]:[2,cn(t,this.rootStore.parent)]}))}))},t.prototype.emitErrorCodeSignal=function(e){if(!j.a.isCancel(e)){var t=e&&e.response&&e.response.status,r=e&&e.response&&e.response.data,n=e&&e.config&&e.config.url;t>=200&&t<300?r&&0===r.code||this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,1,1103,"form error,url:"+n):this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,1,1101,"status:"+t+",url:"+n)}},t.prototype.setLevel=function(e){var t;if(e.err)e.level=this.defLoginLevel;else{var r=null===(t=e.levelInfo)||void 0===t?void 0:t.current_level;null==r?e.mid?e.level=this.defLoginLevel:e.level=null:e.level=+r}},t.prototype.setVIPInfo=function(e){this.configStore.isChannel(R.a.Manager)&&(e.vipType=2,e.vipStatus=1)},t.prototype.setMemberRole=function(e){if(e.err)e.memberRole=un.a.USER_NORMAL;else if(e.mid)if("string"==typeof e.permission){var t=e.permission.split(",");0===t.length||-1!==t.indexOf("9999")?e.memberRole=un.a.USER_LIMITED:-1!==t.indexOf("5000")?e.memberRole=un.a.USER_REGISTERED:-1!==t.indexOf("20000")?e.memberRole=un.a.USER_ADVANCED:-1!==t.indexOf("32000")||-1!==t.indexOf("31300")?(e.memberRole=un.a.USER_ADVANCED,
e.isSystemAdmin=!0):-1!==t.indexOf("30000")||-1!==t.indexOf("25000")?e.memberRole=un.a.USER_VIP:e.memberRole=un.a.USER_NORMAL}else e.memberRole=un.a.USER_NORMAL;else e.memberRole=un.a.USER_LOGOUT},t.prototype.setDMPermission=function(e){var t,r,n=e.level,o={pool:un.a.SEND_POOL_NORMAL,mode:un.a.SEND_MODE_LOGOUT,color:un.a.SEND_COLOR_LOGOUT,input:un.a.SEND_INPUT_LOGOUT,fontsize:un.a.SEND_FONT_SIZE_LOGOUT,initStatus:un.a.SEND_STATUS_NORMAL};switch((e.isOwner||e.isSystemAdmin)&&(o.pool=un.a.SEND_POOL_ADMIN,r=un.a.SEND_FONT_SIZE_ADMIN),e.memberRole){case un.a.USER_LIMITED:o.fontsize=un.a.SEND_FONT_SIZE_LIMITED,o.mode=un.a.SEND_MODE_LIMITED,o.initStatus=un.a.SEND_STATUS_LIMITED,o.input=un.a.SEND_INPUT_LIMITED;break;case un.a.USER_REGISTERED:o.fontsize=un.a.SEND_FONT_SIZE_REGISTERED,o.mode=un.a.SEND_MODE_REGISTERED,o.input=un.a.SEND_INPUT_REGISTERED;break;case un.a.USER_NORMAL:o.fontsize=un.a.SEND_FONT_SIZE_NORMAL,o.mode=un.a.SEND_MODE_NORMAL,o.input=un.a.SEND_INPUT_NORMAL;break;case un.a.USER_VIP:o.pool=un.a.SEND_POOL_ADMIN,o.fontsize=un.a.SEND_FONT_SIZE_VIP,o.mode=un.a.SEND_MODE_VIP,o.input=un.a.SEND_INPUT_VIP;break;case un.a.USER_ADVANCED:o.pool=un.a.SEND_POOL_ADMIN,o.fontsize=un.a.SEND_FONT_SIZE_ADVANCED,o.mode=un.a.SEND_MODE_ADVANCED,o.input=un.a.SEND_INPUT_ADVANCED;break;case un.a.USER_LOGOUT:}switch(!0){case 0===n:t=un.a.SEND_MODE_LEVEL_LOW,o.color=un.a.SEND_COLOR_LEVEL_LOW,o.initStatus=un.a.SEND_STATUS_LEVEL_LOW;break;case 1===n:t=un.a.SEND_MODE_LEVEL_LOW,o.color=un.a.SEND_COLOR_LEVEL_LOW;break;case 2===n:t=un.a.SEND_MODE_LEVEL_TWO,o.color=un.a.SEND_COLOR_NORMAL;break;case n>=3:t=un.a.SEND_MODE_LEVEL_NORMAL,o.color=un.a.SEND_COLOR_NORMAL}e.blockTime>0&&(o.initStatus=un.a.SEND_STATUS_BLOCKING),e.blockTime<0&&(o.initStatus=un.a.SEND_STATUS_BLOCKED),2===e.pugvSeasonStatus&&1===e.pugvPayStatus&&(o.initStatus=un.a.SEND_STATUS_CANNOT_BUY),2!==e.answerStatus||n||(o.initStatus=un.a.SEND_ANSWER_STATUS_IN),e.mid||e.err||(o.color=un.a.SEND_COLOR_LOGOUT,o.initStatus=un.a.SEND_STATUS_LOGOUT),r&&o.fontsize.forEach((function(e,t,n){n[t]=n[t]||r[t]})),t&&o.mode.forEach((function(e,r,n){n[r]=1===t[r]||1===n[r]?1:n[r]})),e.dmRights=o},Object(L.c)([D.g.shallow],t.prototype,"info",void 0),Object(L.c)([D.b],t.prototype,"setUserInfo",null),t}(se.a),pn=r(8),dn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpUpMid]",t.url="//api.bilibili.com/x/web-interface/relation",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,params:e,withCredentials:!0}).then((function(e){var r;return{body:t.convertResult(null===(r=e.data)||void 0===r?void 0:r.data),response:e}}))]}))}))},t.prototype.convertResult=function(e){var t=(null==e?void 0:e.relation)||{};return{attribute:t.attribute,mid:t.mid,mtime:t.mtime,special:t.special,tag:t.tag}},t}(pn.a),fn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpUpFollow]",t.url="//api.bilibili.com/x/relation/modify",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),hn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[UpStore]",t.midIo={},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isCoin:null,isCollect:null,isElec:null,isFollow:null,isLike:null,staffs:null}},enumerable:!1,configurable:!0}),t.prototype.onPrepared=function(){e.prototype.onPrepared.call(this)},t.prototype.onMount=function(){e.prototype.onMount.call(this)},t.prototype.setUpInfo=function(e){var t=Object(L.a)(Object(L.a)({},this.state),e);if(e.staffs)try{t.staffs=JSON.parse(e.staffs)}catch(e){}this.setState(t)},t.prototype.getRelation=function(e){if(!this.midIo[e]){var t=new dn(this.rootPlayer);this.midIo[e]=t.r({mid:e})}
return this.midIo[e]},t.prototype.upFollow=function(e,t,r){var n={act:t?2:1,fid:e,re_src:245};if(!this.rootPlayer.fn("setFollow",!0)||r)return new fn(this.rootPlayer).r({act:t?2:1,fid:e,re_src:245});this.rootPlayer.fn("setFollow",!1,n)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.midIo={}},t}(se.a),yn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stages=[],t}return Object(L.d)(t,e),t.prototype.onCommitted=function(){e.prototype.onCommitted.call(this),this.ready({kind:1,endState:1,contextMessage:this.apiStore.metadata.version+"-"+this.apiStore.metadata.revision})},t.prototype.ready=function(e,t,r){var n,o,i;if(r&&(this.stages.length=0),!this.uiStore.state.isLoaded){var a=((n={})[0]="",n[1]="[成功]",n[2]="[失败]",n),s=function(e){if(!e)return"continue";var t=e.kind||0,r={kind:t,message:e.message||R.f[t]||"",contextMessage:e.contextMessage||"",status:e.status||a[e.endState]||a[0]};if(e.endState){var n=u.stages.slice(0).reverse().findIndex((function(t){return t.kind===e.kind})),o=u.stages.length-1-n;o>-1&&o<u.stages.length?(r.contextMessage=r.contextMessage||u.stages[o].contextMessage,u.stages[o]=r):u.stages.push(r)}else u.stages.push(r)},u=this;try{for(var c=Object(L.i)([e,t]),l=c.next();!l.done;l=c.next()){s(l.value)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.ready(null,null,!0)},Object(L.c)([D.g],t.prototype,"stages",void 0),Object(L.c)([D.b],t.prototype,"ready",null),t}(se.a);function mn(e,t,r){var n=null,o=null,i=document.createElement("canvas"),a=i.getContext("2d");return t&&(n=Math.floor(t)),r&&(o=Math.floor(r)),n&&!o&&(o=Math.floor(t/e.videoWidth*e.videoHeight)),!n&&o&&(n=Math.floor(r/e.videoHeight*e.videoWidth)),n||(n=Math.floor(e.videoWidth)),o||(o=Math.floor(e.videoHeight)),i.width=n,i.height=o,a.drawImage(e,0,0,n,o),i}var vn=r(269),bn=r(274),gn=r(286),Sn=r(58),En=1/0;var On=function(e){return e?(e=Object(Sn.a)(e))===En||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var wn=function(e){var t=On(e),r=t%1;return t==t?r?t-r:t:0};var _n,Pn,kn,xn,jn,An,Tn,Dn=function(e){return"number"==typeof e&&e==wn(e)},Ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[ApiStore]",t.reloadReferrer={},t.reloadDeferred=null,t.seekDeferred=null,t.qualityDeferred=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{iSeek:null,iPlay:null,iPause:null,isRenewal:!1,isSameEpisode:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return I},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"agentKind",{get:function(){return this.kernelStore.baseAgent?this.kernelStore.baseAgent.kind:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iSeekOnce",{get:function(){var e=this.state.iSeek;return this.setState({iSeek:null}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iPlayOnce",{get:function(){var e=this.state.iPlay;return this.setState({iPlay:null}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iPauseOnce",{get:function(){var e=this.state.iPause;return this.setState({iPause:null}),e},enumerable:!1,configurable:!0}),t.prototype.getScreenKind=function(e){var t=this.uiStore.state.mainScreen,r=this.uiStore.state.sideScreen;return e?null!=r&&r!==R.g.Pip?r:t:null!=r?r:t},t.prototype.getPastScreenDetails=function(e){var t=this,r=this.screenStore.rollbackPath[null!=e?e:this.apiStore.getScreenKind()].map((function(e){return{kind:e,timeStamp:t.screenStore.lastChanged[e]}})).sort((function(e,t){return t.timeStamp-e.timeStamp}))[0];return r?{kind:r.kind,isTrusted:!0}:{kind:R.g.Normal,isTrusted:!1}},t.prototype.getPlayUrl=function(){return this.kernelStore.baseAgent?this.kernelStore.baseAgent.getPlayUrl():""},t.prototype.hasFocus=function(){return!!this.nodes.container.contains(document.activeElement)||this.controlStore.state.containerFocus},
t.prototype.hasEditableFocus=function(){var e=[this.rootStore.window.document];if(this.rootStore.isEmbedSOP)try{e.push(this.rootStore.parent.document)}catch(e){}return e.some((function(e){if(e.activeElement){switch(e.activeElement.tagName){case"INPUT":switch(e.activeElement.type){case"button":case"reset":case"submit":case"hidden":case"radio":case"checkbox":case"image":case"file":case"range":return!1;default:return!0}case"TEXTAREA":return!0}if(e.activeElement.isContentEditable)return!0}return!1}))},t.prototype.excludedBuffering=function(e){var t=this.videoStore.video;return e?!!(t.ended||t.paused||t.error||t.networkState===t.NETWORK_EMPTY||t.networkState===t.NETWORK_NO_SOURCE||t.readyState===t.HAVE_NOTHING):!!(t.ended||t.paused||t.error)},t.prototype.isEnded=function(e){return e?this.videoStore.video.ended:!this.clientStore.state.loop&&this.mediaStore.state.ended},t.prototype.isPaused=function(){return this.mediaStore.state.paused},t.prototype.isSeeking=function(){return this.videoStore.video.seeking},t.prototype.isMuted=function(){return this.getMuted()||0===this.getVolume()},t.prototype.isSameSeason=function(){if(this.reloadReferrer)if(this.configStore.state.isCompleteIdEnded){if(this.configStore.seasonId&&this.reloadReferrer.seasonId)return this.configStore.seasonId===this.reloadReferrer.seasonId;if(this.configStore.aid&&this.reloadReferrer.aid)return this.configStore.aid===this.reloadReferrer.aid;if(this.configStore.bvid&&this.reloadReferrer.bvid)return this.configStore.bvid===this.reloadReferrer.bvid}else this.log.e(this.tag,"Illegal call isSameSeason method");return null},t.prototype.getManifest=function(){return{p:this.configStore.p,aid:this.configStore.aid,cid:this.configStore.cid,pid:this.configStore.pid,bvid:this.configStore.bvid,seasonId:this.configStore.seasonId,episodeId:this.configStore.episodeId,kind:this.uiStore.kind,screenKind:this.getScreenKind(),channelKind:this.configStore.channelKind,seasonType:this.configStore.seasonType,hasPrev:this.episodeStore.state.hasPrev,hasNext:this.episodeStore.state.hasNext,hasPipFn:this.screenStore.hasPipFn,hasFullscreenFn:this.screenStore.hasFullscreenFn}},t.prototype.getUserInfo=function(){var e;return{mid:(null===(e=this.userStore.info)||void 0===e?void 0:e.mid)||null}},t.prototype.getMediaInfo=function(){return{playUrl:this.getPlayUrl(),absolutePlayTime:this.trackStore.getAbsolutePlayTime(),relativePlayTime:this.trackStore.getRelativePlayTime()}},t.prototype.getUserParams=function(){return rn({},{input:this.rootPlayer.input,theme:this.rootPlayer.theme})},t.prototype.getStates=function(){return{initError:this.errorStore.state.initError,pipEnabled:this.screenStore.pipEnabled,fullscreenEnabled:this.screenStore.fullscreenEnabled,majorCtrlHidden:this.controlStore.isCtrlHidden(),mainScreen:this.uiStore.state.mainScreen,sideScreen:this.uiStore.state.sideScreen}},t.prototype.getElements=function(){var e=this.rootStore.nodes;return{container:e.container,videoArea:e.videoArea,controlWrap:e.controlWrap,topTitle:e.topTitle,topFollow:e.topFollow,subtitle:e.subtitleWrap,endingPanel:e.endingPanel}},t.prototype.canPlayType=function(e){var t=this.assetStore.dash;return"string"!=typeof e?null:/^HEVC$/i.test(e)&&t&&"function"==typeof t.isHEVCTypeSupported?t.isHEVCTypeSupported():/^HEVC_HDR10$/i.test(e)&&t&&"function"==typeof t.isHEVCHDR10TypeSupported?t.isHEVCHDR10TypeSupported():null},t.prototype.readFrameAsBlob=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t,r;return Object(L.e)(this,(function(n){return t=Object.assign({},e),r=mn(this.videoStore.video,t.width,t.height),[2,new Promise((function(e,t){try{r.toBlob(e,"image/jpeg",.9)}catch(e){t(e)}}))]}))}))},t.prototype.readFrameAsDataURL=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t;return Object(L.e)(this,(function(r){return t=Object.assign({},e),[2,mn(this.videoStore.video,t.width,t.height).toDataURL("image/jpeg",.9)]}))}))},t.prototype.getQuality=function(){return{oldQ:this.qualityStore.state.oldQuality,nowQ:this.qualityStore.state.nowQuality,newQ:this.qualityStore.state.newQuality,
realQ:this.qualityStore.realQ}},t.prototype.getCurrentTime=function(){var e=this.videoStore.video,t=this.mediaStore.state.currentTime;return isNaN(e.duration)?t:this.videoStore.video.currentTime},t.prototype.getDuration=function(e){var t=this.videoStore.video,r=this.kernelStore.state.suspectDuration,n=this.mediaStore.state.duration;return e?isNaN(t.duration)?n+r:t.duration+r:isNaN(t.duration)?n:t.duration},t.prototype.setLoop=function(e,t){this.clientStore.setState({loop:!!e})},t.prototype.getLoop=function(){return this.clientStore.state.loop},t.prototype.setMuted=function(e,t){this.videoStore.video.muted=!!e},t.prototype.getMuted=function(){return this.videoStore.video.muted},t.prototype.setVolume=function(e,t){this.videoStore.video.volume=Object(vn.a)(e,0,1)},t.prototype.getVolume=function(){return this.videoStore.video.volume},t.prototype.setPlaybackRate=function(e,t){var r=Object(vn.a)(e,.25,4);this.videoStore.video.playbackRate=r,this.videoStore.video.defaultPlaybackRate=r},t.prototype.getPlaybackRate=function(){return this.videoStore.video.playbackRate},t.prototype.setMirror=function(e,t){this.clientStore.setState({mirror:!!e})},t.prototype.getMirror=function(){return this.clientStore.state.mirror},t.prototype.setAspectRatio=function(e,t){if("string"!=typeof e||!/^\d+(\.\d+)?:\d+(\.\d+)?$/.test(e))throw new TypeError("Illegal argument");this.clientStore.setState({aspectRatio:e})},t.prototype.getAspectRatio=function(){return this.clientStore.state.aspectRatio},t.prototype.setLightOff=function(e,t){this.rootPlayer.isEmbed||this.clientStore.setState({lightOff:!!e})},t.prototype.getLightOff=function(){return this.clientStore.state.lightOff},t.prototype.setBlackGap=function(e,t){this.rootPlayer.hasFeature("blackGap")&&this.clientStore.setState({hideBlackGap:!e})},t.prototype.getBlackGap=function(){return!this.clientStore.state.hideBlackGap},t.prototype.setAutoplay=function(e,t){this.clientStore.setState({autoplay:!!e})},t.prototype.getAutoplay=function(){return this.clientStore.state.autoplay},t.prototype.setHandoff=function(e,t){switch(e){case R.d.Auto:case R.d.Delay:case R.d.Abort:this.clientStore.setState({handoff:e});break;default:throw new TypeError("Illegal argument")}},t.prototype.getHandoff=function(){return this.clientStore.state.handoff},t.prototype.setPreferCodec=function(e){switch(e){case 0:case 1:case 2:this.clientStore.setState({codecType:e});break;default:throw new TypeError("Illegal argument")}},t.prototype.getPreferCodec=function(){return this.clientStore.state.codecType},t.prototype.goto=function(e,t,r,n){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(o){if(!Dn(e))throw new TypeError("The first argument MUST be an integer");return this.rootPlayer.emit(C.a.Player_Handoff_Signal,new CustomEvent(C.a.Player_Handoff_Signal,{detail:{offset:e,absolute:t,config:r,alt:n}})),[2]}))}))},t.prototype.prev=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(r){switch(r.label){case 0:return[4,this.goto(-1,!1,e,t)];case 1:return r.sent(),[2]}}))}))},t.prototype.next=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(r){switch(r.label){case 0:return[4,this.goto(1,!1,e,t)];case 1:return r.sent(),[2]}}))}))},t.prototype.reload=function(e,t,r){return Object(L.b)(this,void 0,void 0,(function(){var n=this;return Object(L.e)(this,(function(o){switch(o.label){case 0:return this.log.i(this.tag,"[reload]",Object(ce.a)(_n||(_n=Object(L.f)(["config:",",alt:",""],["config:",",alt:",""])),e,r)),clearTimeout(this.reloadTimer),this.reloadDeferred&&this.reloadDeferred.reject(new Error("Interrupted by another reload action")),this.configStore.state.isCompleteIdEnded&&(this.reloadReferrer={aid:this.configStore.aid,cid:this.configStore.cid,bvid:this.configStore.bvid,seasonId:this.configStore.seasonId,episodeId:this.configStore.episodeId}),this.rootPlayer.connectDetails.starting&&(this.rootPlayer.emit(C.b.PLAYER_BEFORE_QUIT),this.rootPlayer.emit(C.a.Player_Dispose,new CustomEvent(C.a.Player_Dispose))),
[4,new Promise((function(e){n.reloadTimer=self.setTimeout(e,1)}))];case 1:return o.sent(),this.perfStore.setStageTiming(0),this.reloadDeferred=this.rootPlayer.addDispose(new bn.a),this.setState({isRenewal:!!(null==t?void 0:t.isRenewal),isSameEpisode:!!(null==t?void 0:t.isSameEpisode)}),null!=e&&this.configStore.startReloadParser(e),this.dp.reloadAction&&this.dp.reloadAction(),this.dp.reloadAction=Object(D.l)((function(){return n.eventStore.isLoaded}),(function(){n.rootPlayer.emit(C.a.Player_Initialized,new CustomEvent(C.a.Player_Initialized)),n.reloadDeferred.resolve()})),this.episodeStore.changeP(),[4,this.reloadDeferred.promise];case 2:return o.sent(),[2,!this.errorStore.state.initError]}}))}))},t.prototype.seek=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){var r,n,o=this;return Object(L.e)(this,(function(i){switch(i.label){case 0:if(this.log.i(this.tag,"[seek]",Object(ce.a)(Pn||(Pn=Object(L.f)(["value:",",alt:",""],["value:",",alt:",""])),e,t)),r=(null==t?void 0:t.initiator)||null,n=Object(vn.a)(e,0,this.getDuration()),isNaN(e))throw new TypeError("The provided double value is non-finite.");return this.seekDeferred&&this.seekDeferred.reject(new Error("Interrupted by another seek action")),this.setState({iSeek:r}),this.seekDeferred=this.rootPlayer.addDispose(new bn.a),this.perfStore.setState({seekLoad:!0}),this.rootPlayer.emit(C.a.Player_ProgressBar_Change,new CustomEvent(C.a.Player_ProgressBar_Change,{detail:{progressTime:n,initiator:r}})),this.mediaStore.internalSeek(n),this.dp.seekAction&&this.dp.seekAction(),this.dp.seekAction=Object(D.l)((function(){return!o.videoStore.state.seeking&&!o.videoStore.video.seeking}),(function(){return o.seekDeferred.resolve()})),[4,this.seekDeferred.promise];case 1:return i.sent(),[2]}}))}))},t.prototype.play=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t,r=this;return Object(L.e)(this,(function(n){return this.log.i(this.tag,"[play]",Object(ce.a)(kn||(kn=Object(L.f)(["alt:",""],["alt:",""])),e)),this.setState({iPlay:(null==e?void 0:e.initiator)||null}),(t=this.videoStore.video.play())&&t.catch((function(e){return r.setState({iPlay:null})})),[2,t]}))}))},t.prototype.pause=function(e){return this.log.i(this.tag,"[pause]",Object(ce.a)(xn||(xn=Object(L.f)(["alt:",""],["alt:",""])),e)),this.setState({iPause:(null==e?void 0:e.initiator)||null}),this.videoStore.video.pause()},t.prototype.requestScreen=function(e,t,r){return Object(L.b)(this,void 0,void 0,(function(){var n,o,i=this;return Object(L.e)(this,(function(a){switch(a.label){case 0:if(this.log.i(this.tag,"[requestScreen]",Object(ce.a)(jn||(jn=Object(L.f)(["kind:",",fromKind:",",alt:",""],["kind:",",fromKind:",",alt:",""])),e,t,r)),null==e){switch(t){case R.g.Normal:case R.g.Wide:case R.g.Web:case R.g.Full:case R.g.Mini:case R.g.Pip:if(this.getScreenKind()!==t)return[2,this.requestScreen(this.getPastScreenDetails(t).kind,null,r)]}return[2,this.screenStore.backwardScreen()]}switch(this.screenStore.removeDelayEvents(),e){case R.g.Normal:case R.g.Wide:case R.g.Web:case R.g.Mini:return[3,1];case R.g.Full:return[3,4];case R.g.Pip:return[3,5]}return[3,6];case 1:return[4,this.screenStore.exitBrowserScreen(R.g.Full)];case 2:return a.sent(),[4,this.screenStore.exitBrowserScreen(R.g.Pip)];case 3:return a.sent(),this.uiStore.setState({mainScreen:e,sideScreen:null}),this.screenStore.addDelayEvents(),[2];case 4:return n=this.screenStore.exitBrowserScreen(R.g.Pip),[2,this.screenStore.fs.requestFullscreen().then((function(t){return Object(L.b)(i,void 0,void 0,(function(){return Object(L.e)(this,(function(t){switch(t.label){case 0:return[4,n];case 1:return t.sent()?this.uiStore.setState({mainScreen:this.apiStore.getPastScreenDetails().kind,sideScreen:e}):this.uiStore.setState({sideScreen:e}),this.screenStore.addDelayEvents(),[2]}}))}))})).catch((function(e){return e&&e.message&&i.log.w(i.tag,"[FullscreenError]",e.message),i.screenStore.addDelayEvents(),Promise.reject(e)}))];case 5:return o=this.screenStore.exitBrowserScreen(R.g.Full),[2,this.screenStore.ps.requestPip().then((function(t){
return Object(L.b)(i,void 0,void 0,(function(){return Object(L.e)(this,(function(t){switch(t.label){case 0:return[4,o];case 1:return t.sent()?this.uiStore.setState({mainScreen:this.apiStore.getPastScreenDetails().kind,sideScreen:e}):this.uiStore.setState({sideScreen:e}),this.screenStore.addDelayEvents(),[2]}}))}))})).catch((function(e){return e&&e.message&&i.log.w(i.tag,"[PipScreenError]",e.message),i.screenStore.addDelayEvents(),Promise.reject(e)}))];case 6:throw new TypeError("Illegal argument")}}))}))},t.prototype.requestQuality=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(r){switch(r.label){case 0:this.log.i(this.tag,"[requestQuality]",Object(ce.a)(An||(An=Object(L.f)(["quality:",",alt:",""],["quality:",",alt:",""])),e,t)),this.qualityDeferred&&this.qualityDeferred.reject(new Error("Interrupted by another requestQuality action")),this.qualityDeferred=this.rootPlayer.addDispose(new bn.a);try{this.qualityStore.setRequestedQuality(e)}catch(e){this.qualityDeferred.reject(e)}return[4,this.qualityDeferred.promise];case 1:return r.sent(),[2]}}))}))},t.prototype.reloadAccess=function(){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(e){switch(e.label){case 0:if(this.log.i(this.tag,"[reloadAccess]"),this.userStore.info&&this.userStore.info.mid)throw this.log.e(this.tag,"[reloadAccess]","Redundant call"),new Error("User is logged in");return[4,this.userStore.fetchUserDetails()];case 1:return e.sent(),[2]}}))}))},t.prototype.fetch=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t,r=this;return Object(L.e)(this,(function(n){switch(n.label){case 0:if(!this.configStore.state.isCompleteIdEnded)throw new Error("Basic data does not ready");switch(e){case R.b.I_PlayUrl:return[3,1];case R.b.I_UserInfo:return[3,2];case R.b.I_ViewInfo:return[3,3];case R.b.I_VideoShot:return[3,4];case R.b.P_Title:return[3,5];case R.b.M_Lottie:return[3,7]}return[3,8];case 1:return[2,this.httpStore.fetchPlayUrl(!0).then((function(e){return e.raw}))];case 2:return[2,this.httpStore.fetchUserInfo(!0).then((function(e){return e.response.data}))];case 3:return[2,this.httpStore.fetchViewInfo(!0).then((function(e){return e.response.data}))];case 4:return[2,this.httpStore.fetchVideoShot(!0).then((function(e){return e.response.data}))];case 5:return this.dp.pTitle&&this.dp.pTitle(),t=Object(D.l)((function(){return null!=r.controlStore.title})),this.dp.pTitle=t.cancel,[4,t];case 6:return n.sent(),[2,this.controlStore.title];case 7:return[2,Object(gn.a)()];case 8:throw new Error("Not Implemented")}}))}))},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),clearTimeout(this.reloadTimer)},t}(se.a),Cn=r(28),Rn=r(46),In=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[EndingStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{opened:!1,disabled:!1}},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.endPanel=Object(D.i)((function(){return t.state.opened}),(function(e){queueMicrotask((function(){t.rootPlayer.isInitialized&&(e?(t.log.i(t.tag,"Open EndPanel"),Object(Cn.a)({from:{opacity:0},to:{opacity:1},duration:250,ease:Object(Cn.b)(.02,.01,.47,1),onPlay:function(){t.nodes.endingPanel.hidden=!e},onUpdate:function(e){Object(Rn.a)(t.nodes.endingPanel).set(e)}}),t.rootPlayer.emit(C.a.Player_Show_EndPanel,new CustomEvent(C.a.Player_Show_EndPanel))):(t.log.i(t.tag,"Close EndPanel"),Object(Cn.a)({from:{opacity:1},to:{opacity:0},duration:250,ease:Object(Cn.b)(.02,.01,.47,1),onUpdate:function(e){Object(Rn.a)(t.nodes.endingPanel).set(e)},onComplete:function(){t.nodes.endingPanel.hidden=!e}}),t.rootPlayer.emit(C.a.Player_Hide_EndPanel,new CustomEvent(C.a.Player_Hide_EndPanel))))}))})),this.rootPlayer.on(C.a.Player_Play,(function(){return t.close()})),this.rootPlayer.on(C.a.Player_Seeking,(function(){return t.close()}))},t.prototype.open=function(){this.setState({opened:!0})},t.prototype.close=function(){
this.setState({opened:!1})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.close()},t}(se.a),Nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[EpisodeStore]",t.ding=0,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{hasPrev:!1,hasNext:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirst",{get:function(){return 1===this.ding},enumerable:!1,configurable:!0}),t.prototype.changeP=function(){this.rootPlayer.emit(C.a.Player_Navigate,new CustomEvent(C.a.Player_Navigate)),this.ding+=1},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.changeP()},Object(L.c)([D.g],t.prototype,"ding",void 0),Object(L.c)([D.b],t.prototype,"changeP",null),t}(se.a),Mn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[AssetStore]",t.dash=null,t.flv=null,t.bas=null,t.lottie=null,t}return Object(L.d)(t,e),t.prototype.onMount=function(){e.prototype.onMount.call(this),this.fetchDashAsset(),this.addLazyActions()},t.prototype.fetchDashAsset=function(){var e=this;S.then((function(t){self.DashPlayer||(self.DashPlayer=t.default),Object(D.j)((function(){e.dash=t.default}))})).catch(this.snapshotError)},t.prototype.addLazyActions=function(){var e=this,t=Object(D.h)(this,"flv",(function(){t(),e.fetchFlvAsset()})),r=Object(D.h)(this,"bas",(function(){r(),e.fetchBasAsset()})),n=Object(D.h)(this,"lottie",(function(){n(),e.fetchLottieAsset()}))},t.prototype.fetchFlvAsset=function(){var e=this;r.e(11).then(r.bind(null,461)).then((function(t){self.flvjs||(self.flvjs=t.default),Object(D.j)((function(){e.flv=t.default}))})).catch(this.snapshotError)},t.prototype.fetchBasAsset=function(){var e=this;r.e(5).then(r.bind(null,463)).then((function(t){Object(D.j)((function(){e.bas=t.default}))})).catch(this.snapshotError)},t.prototype.fetchLottieAsset=function(){var e=this;Object(gn.a)().then((function(t){Object(D.j)((function(){e.lottie=t.default}))})).catch(this.snapshotError)},t.prototype.snapshotError=function(e){this.log.e(this.tag,e&&e.message)},Object(L.c)([D.g],t.prototype,"dash",void 0),Object(L.c)([D.g],t.prototype,"flv",void 0),Object(L.c)([D.g],t.prototype,"bas",void 0),Object(L.c)([D.g],t.prototype,"lottie",void 0),Object(L.c)([ee.a],t.prototype,"snapshotError",null),t}(se.a),Un=r(14),Bn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[QualityStore]",t.switchingTimer=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{oldQuality:NaN,nowQuality:NaN,newQuality:NaN,reqQuality:V.n,isExtQuality:!1,isDashSeamless:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return isNaN(this.state.nowQuality)?this.state.newQuality:this.state.nowQuality},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realQ",{get:function(){return this.kernelStore.baseAgent?this.kernelStore.baseAgent.realQuality:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestQ",{get:function(){return isNaN(this.state.reqQuality)?V.n:this.state.reqQuality},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitching",{get:function(){return!isNaN(this.state.newQuality)&&!isNaN(this.state.nowQuality)&&this.state.newQuality!==this.state.nowQuality},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.switchQuality=Object(D.i)((function(){return t.isSwitching}),(function(e){e&&t.switchQualityProxy()}),{fireImmediately:!0}),this.dc.cacheQuality=Object(D.i)((function(){return t.state.nowQuality}),(function(e){isNaN(e)||t.rootPlayer.emit(C.a.Player_Quality_Changed,new CustomEvent(C.a.Player_Quality_Changed))})),this.dc.reqChanged=Object(D.i)((function(){return t.state.reqQuality}),(function(e){t.setLocalQuality(e)}),{fireImmediately:!0})},t.prototype.setLocalQuality=function(e){if(!this.state.isExtQuality){var t=+e,r=be.a.mapping[e];if(!isNaN(t)&&r&&!r.nocache){
var n=T.a.get(V.l),o=this.localStore.get().media.quality;null!=n&&+n===t||T.a.set(V.l,t.toString()),null!=o&&+o===t||this.localStore.set({media:{quality:t}})}}},t.prototype.internalSwitchingState=function(){return!isNaN(this.state.newQuality)&&this.state.newQuality!==this.state.nowQuality},t.prototype.setRequestedQuality=function(e){var t=this,r=+e,n=r===this.state.nowQuality;if(isNaN(r))throw new TypeError("Illegal argument");if(n)throw new Error("Same as current quality: "+this.state.nowQuality);clearTimeout(this.switchingTimer),this.setState({newQuality:r,reqQuality:r,isExtQuality:!1}),this.switchingTimer=self.setTimeout((function(){t.apiStore.qualityDeferred&&t.apiStore.qualityDeferred.reject(new Error("Timeout: 30s"))}),3e4)},t.prototype.setRenderedQuality=function(e,t){var r=this.internalSwitchingState();if(this.log.i(this.tag,"[setRenderedQuality]","isInternalSwitching: "+r,Object(ce.a)(Tn||(Tn=Object(L.f)(["quality: ",", ",""],["quality: ",", ",""])),t,e)),r){var n=+t,o=n===this.state.nowQuality,i=!!e||o,a=i?this.state.oldQuality:this.state.nowQuality;clearTimeout(this.switchingTimer),isNaN(n)?this.apiStore.qualityDeferred&&this.apiStore.qualityDeferred.reject(e||new TypeError("Rendered quality is not a number")):(this.setState({oldQuality:a,nowQuality:n,newQuality:n}),i?o?this.apiStore.qualityDeferred&&this.apiStore.qualityDeferred.resolve():this.apiStore.qualityDeferred&&this.apiStore.qualityDeferred.reject(e||new Error("Unknown")):this.apiStore.qualityDeferred&&this.apiStore.qualityDeferred.resolve())}},t.prototype.switchQualityProxy=function(){var e=this.kernelStore.baseAgent,t=e&&e.kernelPlayer;return e&&t?(e.kind===Un.a.Dash?this.switchDashQuality(e,t,this.state.newQuality):this.switchFlvQuality(e,t,this.state.newQuality),!0):(this.log.w(this.tag,"[switchQualityProxy]","kernel is not initialized"),!1)},t.prototype.canDashSeamless=function(e,t){return!(!this.state.isDashSeamless||this.uiStore.kind!==R.c.Pgc)||!be.a.isSuperQuality(t)&&!be.a.isSuperQuality(e)},t.prototype.switchDashQuality=function(e,t,r){var n=this;if(this.canDashSeamless(e.realQuality,r))if(0===r){var o=this.configStore.isPreLogin?be.a.gtnBigWidth:be.a.gtnLogin;t.setAutoSwitchQualityFor("video",!0).setAutoSwitchTopQualityFor("video",o),this.setRenderedQuality(null,r)}else t.setAutoSwitchQualityFor("video",!1).setQualityFor("video",r).then((function(t){var o=t&&+t.newQualityNumber||e.realQuality||r;n.setRenderedQuality(null,o)})).catch((function(e){var t=n.state.nowQuality,r=n.state.newQuality,o=n.kernelStore.baseAgent&&n.kernelStore.baseAgent.realQuality;0===t&&r&&r===o?n.setRenderedQuality(null,r):n.setRenderedQuality(e,n.state.nowQuality)}));else this.kernelStore.fetchPlayUrl({qn:r},{initiator:1})},t.prototype.switchFlvQuality=function(e,t,r){this.kernelStore.fetchPlayUrl({qn:r},{initiator:1})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,{newQuality:1,reqQuality:1,isExtQuality:1}),clearTimeout(this.switchingTimer),this.switchingTimer=null},Object(L.c)([D.e],t.prototype,"isSwitching",null),t}(se.a),Fn=function(){function e(){}return e.getUrl=function(e){var t;return((t={})[0]="api.bilibili.com/x/player/playurl",t[1]="api.bilibili.com/pgc/player/web/playurl",t[4]="manager.bilibili.co/v2/playurl",t[2]="api.bilibili.com/pugv/player/web/playurl",t[3]="member.bilibili.com/x/web/archive/video/playurl",t)[e]},e.getPlayUrlBody=function(e){return e?e.data&&"object"==typeof e.data?e.data:e.result&&"object"==typeof e.result?e.result:e:e},e.replaceUrlProtocol=function(e){return Array.isArray(e)?e.map((function(e){return e.base_url&&(e.baseUrl=e.base_url.replace(/http:\/\//g,"https://")),Array.isArray(e.backup_url)&&(e.backupUrl=e.backup_url.map((function(e){return e.replace(/http:\/\//g,"https://")}))),e})):e},e.normalize=function(e){return e&&(e.quality&&(e.quality=be.a.normalize(e.quality)),Array.isArray(e.acceptQuality)&&(e.acceptQuality=e.acceptQuality.map((function(e){return be.a.normalize(e)})))),e},e.bufferFromBase64=function(e){try{for(var t=self.atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n)
;return r.buffer}catch(e){return}},e.setPreloadAVData=function(t){return t.videoFrame&&t.mediaDataSource&&(t.mediaDataSource.preloadAVData=t.videoFrame,t.quality===+t.videoFrame.qn&&t.videoFrame.type===t.mediaDataSource.type&&"flv"===t.videoFrame.type&&t.videoFrame.video&&(t.mediaDataSource.prebuffer=e.bufferFromBase64(t.videoFrame.video))),t},e}(),Vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpPlayUrl]",t.retried=0,t}return Object(L.d)(t,e),t.prototype.r=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){var r,n;return Object(L.e)(this,(function(o){return this.retried=0,this.params=e,this.config=Object.assign({retryCount:3},t,{enableSSLStream:!0,enableSSLResolve:!0}),this.fragmentUrl=Fn.getUrl(this.config.playUrlKind),this.validPrefetchResponse(t.preloadPlayUrl)?(r=t.preloadPlayUrl.session,(n=this.parse(t.preloadPlayUrl,this.config)).error?(this.log.w(this.tag,"prefetch error",n.error.message),[2,this.getRemoteResponse(this.config.retryCount)]):(this.log.i(this.tag,"prefetch succeed"),[2,Promise.resolve({raw:t.preloadPlayUrl,body:Fn.setPreloadAVData(n.body),session:r,response:null})])):[2,this.getRemoteResponse(this.config.retryCount)]}))}))},t.prototype.getRemoteResponse=function(e,t){var r=this,n=t?"http://"+this.fragmentUrl:"//"+this.fragmentUrl,o=performance.now();return this.request({url:n,params:this.params,withCredentials:!0}).then((function(e){var t=performance.now()-o,i=r.parse(e.data,r.config,n);return r.track.o(X.b.API_PlayUrl_Done,{val:t.toFixed()}),i.error?(i.error.raw=e.data,r.log.e(r.tag,"parse error",i.error.message),Promise.reject(i.error)):{raw:e.data,body:i.body,response:e}}),(function(i){if(r.isCanceled(i))return Promise.reject(i);var a=performance.now()-o,s=/^https:/.test(n)||/^\/\//.test(n)&&"https:"===location.protocol;return r.track.o(X.b.API_PlayUrl_Fail,{val:a.toFixed()}),s&&(e||"http:"===location.protocol)?(r.retried++,r.log.i(r.tag,"Retry: "+r.retried+"/"+r.config.retryCount),e?r.getRemoteResponse(--e,t):r.getRemoteResponse(0,!0)):Promise.reject({code:3,message:i.response&&i.response.status&&i.response.status.toString()||"",url:n})}))},t.prototype.validPrefetchResponse=function(e){var t=Fn.getPlayUrlBody(e);return!(!t||"object"!=typeof t)&&(this.config.mseSupported?t.format&&-1===t.format.indexOf("mp4"):t.format&&t.format.indexOf("mp4")>-1)},t.prototype.parse=function(e,t,r){var n={error:null,body:null};if(this.isInvalid(e,!0))return n.error={code:4,message:"Invalid response data",playUrl:r},n;if(e.data&&0!==e.code)return n.error={code:4,message:e.code+": "+e.message,playUrl:r},n;var o=Fn.getPlayUrlBody(e),i={};if(o.result){if(void 0===o.durl&&void 0===o.dash_mpd&&void 0===o.dash)return n.error={code:4,message:o.error_text?o.error_code+": "+o.error_text:"Error",playUrl:r},n;o.result="suee"}if("suee"!==o.result)return n.error={code:4,message:"error"===o.result?"Resolve Error: "+o.message:"Resolve Error: result is "+o.result,playUrl:r},n;if("local"!==o.from||"suee"!==o.result)return n.error={code:4,message:"Unsupported video source: "+o.from,playUrl:r},n;var a=o.accept_format,s=o.accept_quality,u=o.accept_description,c=o.format,l=o.videoFrame,p="flv";if(a&&0!==a.length||(a=[o.format]),s&&0!==s.length||(s=[2]),o.format&&o.format.indexOf("mp4")>-1&&(p="mp4"),(o.dash_mpd||o.dash)&&(p="dash"),"dash"!==p&&(!Array.isArray(o.durl)||0===o.durl.length))return n.error={code:4,message:"Invalid durl",playUrl:r},n;var d=o.timelength,f=o.quality,h="http";if(i.type=p,i.duration=0,"dash"===p){if(i.duration=o.timelength||0,i.url=o.dash_mpd||o.dash,t.enableSSLStream&&i.url)if(h="https","string"==typeof i.url)i.url=i.url.replace(/http:\/\//g,"https://");else{var y=i.url;if(i.url&&i.url.duration&&(i.url.duration=i.url.duration-1),i.duration=i.url&&i.url.duration>0?1e3*i.url.duration:o.timelength||0,i.url.video=Fn.replaceUrlProtocol(y.video),i.url.audio=Fn.replaceUrlProtocol(y.audio),120===f&&de.a.gecko.alike)for(var m=0;m<i.url.video.length;m++){var v=i.url.video[m];if(f===v.id&&7===v.codecid){var b=document.createElement("video")
;b&&b.canPlayType&&b.canPlayType('video/mp4; codecs="'+v.codecs+', mp4a.40.2"')||(u.splice(0,1),s.splice(0,1),f=s[0],o.quality=s[0]);break}}}t.enableSSLStream&&(h="https")}else if("mp4"===p){var g=o.durl&&o.durl[0],S=[],E=g&&g.url;t.enableSSLStream&&E&&(h="https",E=E.replace("http://","https://")),g.backup_url&&g.backup_url.forEach((function(e){t.enableSSLStream&&e&&(h="https",e=e.replace("http://","https://")),S.push(e)})),i.url=E,i.backupURL=S,i.duration=g.length}else i.segments=[],i.duration=0,o.durl&&o.durl.forEach((function(e){var r=e.url,n=[],o={};t.enableSSLStream&&r&&(h="https",r=r.replace("http://","https://")),e.backup_url&&e.backup_url.forEach((function(e){t.enableSSLStream&&e&&(h="https",e=e.replace("http://","https://")),n.push(e)})),o.duration=e.length,o.filesize=e.size,o.url=r,o.backupURL=n,i.duration+=e.length,i.segments&&i.segments.push(o)}));var O=o.is_preview,w=o.abtid,_=[];if(Array.isArray(o.support_formats)&&o.support_formats.forEach((function(e){_.push({displayDesc:e.display_desc,superscript:e.superscript,needLogin:e.need_login,format:e.format,description:e.description,needVip:e.need_vip,quality:e.quality,newDescription:e.new_description})})),n.error=null,n.body=Fn.normalize({format:c,quality:f,timelength:d,videoFrame:l,streamType:h,acceptFormat:a,acceptQuality:s,acceptDescription:u,mediaDataSource:i,supportFormats:_,isPreview:O,abTestId:w}),t.noAudioStream){var P=n.body.mediaDataSource.url;P&&P.audio&&(P.audio=null)}return n},t}(pn.a),Hn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[DashAgent]",t.kind=Un.a.Dash,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"realQuality",{get:function(){if(this.dashPlayer){var e=this.dashPlayer.getQualityList("video")[this.dashPlayer.getQualityFor("video")];return e&&e.hasOwnProperty("id")?+e.id:NaN}return NaN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageThroughput",{get:function(){var e=this.dashPlayer.getCorePlayer(),t=+e.getAverageThroughput("video"),r=+e.getAverageThroughput("audio");return t&&r?1e3*(t+r)/1024/8/2:t?1e3*t/1024/8:r?1e3*r/1024/8:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastSecondThroughput",{get:function(){var e=this.dashPlayer&&this.dashPlayer.getVideoInfo();try{return e.statisticsInfo.networkActivity/1024}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernelPlayer",{get:function(){return this.dashPlayer},enumerable:!1,configurable:!0}),t.prototype.seek=function(e){var t=this;this.dashPlayer?this.dashPlayer.seek(e).catch((function(e){t.log.w(t.tag,"seek",e&&e.message)})):this.video.currentTime=e},t.prototype.getPlayUrl=function(){try{return this.dashPlayer?this.dashPlayer.getCurrentPlayURLFor("video")+","+this.dashPlayer.getCurrentPlayURLFor("audio"):e.prototype.getPlayUrl.call(this)}catch(t){return e.prototype.getPlayUrl.call(this)}},t.prototype.attachSource=function(t){var r,n,o,i=this;e.prototype.attachSource.call(this,t),this.dashPlayer&&(this.w(),this.removePlayerEvents(),this.dashPlayer.destroy());var a=this.assetStore.dash,s="string"!=typeof t.mediaDataSource.url&&+(null===(o=null===(n=null===(r=t.mediaDataSource.url)||void 0===r?void 0:r.audio)||void 0===n?void 0:n[0])||void 0===o?void 0:o.id)||30280,u=this.data.quality;this.log.i(this.tag,"Set audio quality:"+s+",video quality:"+u),this.dashPlayer=new a(this.video,{defaultAudioQuality:s,defaultVideoQuality:u,isAutoPlay:!1,enableHEVC:!0,abrStrategy:a.STRING.ABR_DYNAMIC,stableBufferTime:this.getDynamicBufferLength(),preloadData:be.a.isSuperQuality(this.data.quality)?void 0:this.data.mediaDataSource.preloadAVData,hid:this.rootPlayer.iid}),this.dashPlayer.initialize(rn({},this.data.mediaDataSource.url)).then((function(){if(!i.dashPlayer)throw new ReferenceError("dashPlayer does not exist");i.configStore.isPreLogin?i.dashPlayer.setAutoSwitchTopQualityFor("video",be.a.gtnBigWidth):i.dashPlayer.setAutoSwitchTopQualityFor("video",be.a.gtnLogin)})).catch((function(e){i.rootPlayer.emit(C.b.ERROR_DASH_INITIALIZE,e)})),this.addPlayerEvents()},
t.prototype.addPlayerEvents=function(){var e=this.dashPlayer.getCorePlayer(),t=this.assetStore.dash;e.on(t.EVENTS.SOURCE_INITIALIZED,this.onSourceInitialized),e.on(t.EVENTS.FRAGMENT_LOADING_ABANDONED,this.onHttpRequestEnded),e.on(t.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onHttpRequestEnded),e.on(t.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onAudioFrameDecoded),e.on(t.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onVideoFrameDecoded),this.dashPlayer.on(t.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoaded),this.dashPlayer.on(t.EVENTS.ERROR,this.onError),this.dashPlayer.on(t.EVENTS.VIDEO_INFO,this.onVideoInfo),this.dashPlayer.on(t.EVENTS.QUALITY_CHANGE_REQUESTED,this.onQualityRequested),this.dashPlayer.on(t.EVENTS.QUALITY_CHANGE_RENDERED,this.onQualityRendered),this.dashPlayer.on(t.EVENTS.QUOTA_EXCEEDED,this.onQuotaExceeded),this.dashPlayer.on(t.EVENTS.BUFFERING_OPTIMIZATION,this.onBufferingOptimization),this.dashPlayer.on(t.EVENTS.WARNING,this.onWarning)},t.prototype.removePlayerEvents=function(){var e=this.assetStore.dash;if(this.dashPlayer&&e){this.dashPlayer.off(e.EVENTS.ERROR,this.onError),this.dashPlayer.off(e.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoaded),this.dashPlayer.off(e.EVENTS.VIDEO_INFO,this.onVideoInfo),this.dashPlayer.off(e.EVENTS.QUALITY_CHANGE_REQUESTED,this.onQualityRequested),this.dashPlayer.off(e.EVENTS.QUALITY_CHANGE_RENDERED,this.onQualityRendered),this.dashPlayer.off(e.EVENTS.QUOTA_EXCEEDED,this.onQuotaExceeded),this.dashPlayer.off(e.EVENTS.BUFFERING_OPTIMIZATION,this.onBufferingOptimization),this.dashPlayer.off(e.EVENTS.WARNING,this.onWarning);var t=this.dashPlayer.getCorePlayer();t&&(t.off(e.EVENTS.SOURCE_INITIALIZED,this.onSourceInitialized),t.off(e.EVENTS.FRAGMENT_LOADING_ABANDONED,this.onHttpRequestEnded),t.off(e.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onHttpRequestEnded),t.off(e.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onAudioFrameDecoded),t.off(e.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onVideoFrameDecoded))}},t.prototype.onError=function(e){this.rootPlayer.emit(C.b.ERROR_DASH_KERNEL,e)},t.prototype.onSourceInitialized=function(){var e=this.dashPlayer.getCorePlayer(),t=e.getInitializeDate().getTime(),r=this.assetStore.dash;this.track.o(X.b.Kernel_Initial,{val:Date.now()-t}),e.off(r.EVENTS.SOURCE_INITIALIZED,this.onSourceInitialized)},t.prototype.onHttpRequestEnded=function(e){var t=e.request.bytesLoaded;t&&this.trackStore.addReceivedBytes(t)},t.prototype.onHttpHeaderReceived=function(e){var t=e.request.requestStartDate,r=e.request.headersReceivedDate;t&&r&&this.track.o(X.b.Http_Connection,{val:r.getTime()-t.getTime()})},t.prototype.onAudioFrameDecoded=function(e){var t=e.request.index,r=e.request.mediaType,n=this.assetStore.dash;if(1===t&&"audio"===r){var o=this.dashPlayer.getCorePlayer(),i=o.getInitializeDate(),a=e.request.requestEndDate;i&&a&&this.track.o(X.b.First_Audio_Frame_Decoded,{val:a.getTime()-i.getTime()}),o.off(n.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onAudioFrameDecoded)}},t.prototype.onVideoInfo=function(e){var t=e.mediaInfo;0!==Object.keys(t).length&&this.menuStore.setVideoInfo(e,"DashPlayer")},t.prototype.onVideoFrameDecoded=function(e){var t=e.request.index,r=e.request.mediaType,n=this.assetStore.dash;if(1===t&&"video"===r){var o=this.dashPlayer.getCorePlayer(),i=o.getInitializeDate(),a=e.request.requestEndDate;i&&a&&this.track.o(X.b.First_Video_Frame_Decoded,{val:a.getTime()-i.getTime()}),o.off(n.EVENTS.FRAGMENT_LOADING_COMPLETED,this.onVideoFrameDecoded)}},t.prototype.onFragmentLoaded=function(e){var t=e.index,r=e.mediaType,n=t+"-"+e.qn;"video"===r&&t>=0&&(this.trackStore.receivedVideoIndex.has(n)?this.trackStore.repeatedVideoIndex.add(n):this.trackStore.receivedVideoIndex.add(n)),"audio"===r&&t>=0&&(this.trackStore.receivedAudioIndex.has(n)?this.trackStore.repeatedAudioIndex.add(n):this.trackStore.receivedAudioIndex.add(n))},t.prototype.onQualityRequested=function(e){if(e.isAutoSwitch&&"video"===e.mediaType){var t=this.dashPlayer.getQualityList(e.mediaType)[e.newQuality];this.track.o(X.b.Auto_Switch_Requested,{oldQ:e.oldQualityNumber,newQ:e.newQualityNumber,
bitrate:Math.floor(t.bitrate/1e3),throughput:e.dict&&e.dict.throughput})}},t.prototype.onQualityRendered=function(e){if(e.isAutoSwitch&&"video"===e.mediaType&&!isNaN(e.oldQuality)){var t=this.dashPlayer.getQualityList(e.mediaType)[e.newQuality];this.track.o(X.b.Auto_Switch_Rendered,{oldQ:e.oldQualityNumber,newQ:e.newQualityNumber,bitrate:Math.floor(t.bitrate/1e3),throughput:e.dict&&e.dict.throughput,srcUrl:this.apiStore.getPlayUrl()})}},t.prototype.onQuotaExceeded=function(e){this.track.o(X.b.Quota_Exceeded,{type:e.mediaType,cbl:e.criticalBufferLevel})},t.prototype.onBufferingOptimization=function(e){this.track.o(X.b.Buffering_Optimization,{val:e&&e.type})},t.prototype.onWarning=function(e){e&&e.code&&e.msg&&-1!==e.code&&this.track.o(X.b.Dash_Warning,{code:e.code,msg:e.meg,srcUrl:e.detail&&e.detail.url})},t.prototype.getDynamicBufferLength=function(){if(this.configStore.isChannel(R.a.Homepage))return 15;var e=20;return"eg"===this.kernelStore.getPlayerIdle()?e=60:"eg1"===this.kernelStore.getPlayerUserWhite()?e=40:"eg2"===this.kernelStore.getPlayerUserWhite()&&(e=60),e},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removePlayerEvents(),this.dashPlayer&&(this.dashPlayer.destroy(),this.dashPlayer=null)},Object(L.c)([ee.a],t.prototype,"onError",null),Object(L.c)([ee.a],t.prototype,"onSourceInitialized",null),Object(L.c)([ee.a],t.prototype,"onHttpRequestEnded",null),Object(L.c)([ee.a],t.prototype,"onHttpHeaderReceived",null),Object(L.c)([ee.a],t.prototype,"onAudioFrameDecoded",null),Object(L.c)([ee.a],t.prototype,"onVideoInfo",null),Object(L.c)([ee.a],t.prototype,"onVideoFrameDecoded",null),Object(L.c)([ee.a],t.prototype,"onFragmentLoaded",null),Object(L.c)([ee.a],t.prototype,"onQualityRequested",null),Object(L.c)([ee.a],t.prototype,"onQualityRendered",null),Object(L.c)([ee.a],t.prototype,"onQuotaExceeded",null),Object(L.c)([ee.a],t.prototype,"onBufferingOptimization",null),Object(L.c)([ee.a],t.prototype,"onWarning",null),t}(Un.b),qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.internalQuality=NaN,t.tag="[FlvAgent]",t.kind=Un.a.Flv,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"realQuality",{get:function(){return this.internalQuality},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageThroughput",{get:function(){try{return this.flvPlayer._transmuxer._controller._ioctl._speedSampler.averageKBps}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastSecondThroughput",{get:function(){try{return this.flvPlayer._transmuxer._controller._ioctl._speedSampler.lastSecondKBps/8}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernelPlayer",{get:function(){return this.flvPlayer},enumerable:!1,configurable:!0}),t.prototype.seek=function(e){this.video.currentTime=e},t.prototype.getPlayUrl=function(){try{return this.flvPlayer&&(this.flvPlayer.statisticsInfo.redirectedURL||this.flvPlayer.statisticsInfo.url)||e.prototype.getPlayUrl.call(this)}catch(t){return e.prototype.getPlayUrl.call(this)}},t.prototype.attachSource=function(t){e.prototype.attachSource.call(this,t);var r={enableWorker:!1,accurateSeek:!0,stashInitialSize:65536,seekType:this.data.seekType,rangeLoadZeroStart:!1,lazyLoadMaxDuration:100,lazyLoadRecoverDuration:50,deferLoadAfterSourceOpen:!1,fixAudioTimestampGap:!1,reuseRedirectedURL:!0};(de.a.safari.alike||de.a.edge.alike||de.a.trident.alike)&&(r.enableWorker=!1,r.lazyLoadMaxDuration=100),this.assetStore.flv.LoggingControl.forceGlobalTag=!0,this.assetStore.flv.LoggingControl.enableVerbose=!1,this.flvPlayer&&(this.w(),this.removePlayerEvents(),this.flvPlayer.destroy()),this.flvPlayer=this.assetStore.flv.createPlayer(this.data.mediaDataSource,r),this.addPlayerEvents(),this.flvPlayer.attachMediaElement(this.video),this.flvPlayer.load(),this.internalQuality=this.data.quality},t.prototype.addPlayerEvents=function(){var e=this.assetStore.flv;e.LoggingControl.addLogListener(this.onEarlyEOF),this.flvPlayer.on(e.Events.ERROR,this.onError),
this.flvPlayer.one(e.Events.LOADING_STARTED,this.onLoadingStarted),this.flvPlayer.on(e.Events.LOADING_COMPLETE,this.onLoadingComplete),this.flvPlayer.on(e.Events.HTTP_REQUEST_ENDED,this.onHttpRequestEnded),this.flvPlayer.on(e.Events.HTTP_HEADER_RECEIVED,this.onHttpHeaderReceived),this.flvPlayer.one(e.Events.AUDIO_FRAME_DECODED,this.onAudioFrameDecoded),this.flvPlayer.one(e.Events.VIDEO_FRAME_DECODED,this.onVideoFrameDecoded),this.flvPlayer.on(e.Events.STATISTICS_INFO,this.onVideoInfo),this.flvPlayer.on(e.Events.CTS_WARNING,this.onCtsWarning),this.flvPlayer.on(e.Events.FLV_DATA_ABNORMAL,this.onFlvDataAbnormal),this.flvPlayer.on(e.Events.RECOVERED_EARLY_EOF,this.onRecoveredEarlyEOF)},t.prototype.removePlayerEvents=function(){var e=this.assetStore.flv;e.LoggingControl.removeLogListener(this.onEarlyEOF),this.flvPlayer&&e&&(this.flvPlayer.off(e.Events.ERROR,this.onError),this.flvPlayer.off(e.Events.LOADING_STARTED,this.onLoadingStarted),this.flvPlayer.off(e.Events.LOADING_COMPLETE,this.onLoadingComplete),this.flvPlayer.off(e.Events.HTTP_REQUEST_ENDED,this.onHttpRequestEnded),this.flvPlayer.off(e.Events.HTTP_HEADER_RECEIVED,this.onHttpHeaderReceived),this.flvPlayer.off(e.Events.AUDIO_FRAME_DECODED,this.onAudioFrameDecoded),this.flvPlayer.off(e.Events.VIDEO_FRAME_DECODED,this.onVideoFrameDecoded),this.flvPlayer.off(e.Events.STATISTICS_INFO,this.onVideoInfo),this.flvPlayer.off(e.Events.CTS_WARNING,this.onCtsWarning),this.flvPlayer.off(e.Events.FLV_DATA_ABNORMAL,this.onFlvDataAbnormal),this.flvPlayer.off(e.Events.RECOVERED_EARLY_EOF,this.onRecoveredEarlyEOF))},t.prototype.onError=function(e,t,r){this.rootPlayer.emit(C.b.ERROR_FLV_KERNEL,e,t,r)},t.prototype.onLoadingStarted=function(e){this.track.o(X.b.Kernel_Initial,{val:e-this.flvPlayer.createdTime})},t.prototype.onLoadingComplete=function(e){try{var t=e.metadata.filesize,r=e.to,n=e.requestUrl;t&&r&&t!==r+1&&this.track.o(X.b.Abnormal_Segment_Length,{length:r+1,filesize:t,requestUrl:n})}catch(e){}},t.prototype.onHttpRequestEnded=function(e,t){this.trackStore.addReceivedBytes(e)},t.prototype.onHttpHeaderReceived=function(e,t){this.track.o(X.b.Http_Connection,{val:e})},t.prototype.onAudioFrameDecoded=function(e){this.track.o(X.b.First_Audio_Frame_Decoded,{val:e-this.flvPlayer.createdTime})},t.prototype.onVideoFrameDecoded=function(e){this.track.o(X.b.First_Video_Frame_Decoded,{val:e-this.flvPlayer.createdTime})},t.prototype.onVideoInfo=function(e){var t=this.flvPlayer.mediaInfo;0!==Object.keys(t).length&&this.menuStore.setVideoInfo({mediaInfo:t,statisticsInfo:e},this.flvPlayer.type)},t.prototype.onEarlyEOF=function(e,t){"string"==typeof t&&t.indexOf("code = -1, msg = Fetch stream meet Early-EOF")>-1&&(this.trackStore.earlyEOFSymbol||(this.track.o(X.b.Range_Early_EOF,{srcUrl:this.apiStore.getPlayUrl()}),this.trackStore.setEarlyEOFSymbol(!0)))},t.prototype.onCtsWarning=function(e){this.track.o(X.b.Flv_Cts_Warning,e?{cts:e.cts,dts:e.dts}:null)},t.prototype.onFlvDataAbnormal=function(e){this.track.o(X.b.Flv_Data_Abnormal,e?{type:e.type,dts:e.dts}:null)},t.prototype.onRecoveredEarlyEOF=function(){this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,3,3114,"url:"+this.apiStore.getPlayUrl()+",message:RecoveredEarlyEof")},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removePlayerEvents(),this.flvPlayer&&(this.flvPlayer.destroy(),this.flvPlayer=null)},Object(L.c)([ee.a],t.prototype,"onError",null),Object(L.c)([ee.a],t.prototype,"onLoadingStarted",null),Object(L.c)([ee.a],t.prototype,"onLoadingComplete",null),Object(L.c)([ee.a],t.prototype,"onHttpRequestEnded",null),Object(L.c)([ee.a],t.prototype,"onHttpHeaderReceived",null),Object(L.c)([ee.a],t.prototype,"onAudioFrameDecoded",null),Object(L.c)([ee.a],t.prototype,"onVideoFrameDecoded",null),Object(L.c)([ee.a],t.prototype,"onVideoInfo",null),Object(L.c)([ee.a],t.prototype,"onEarlyEOF",null),Object(L.c)([ee.a],t.prototype,"onCtsWarning",null),Object(L.c)([ee.a],t.prototype,"onFlvDataAbnormal",null),Object(L.c)([ee.a],t.prototype,"onRecoveredEarlyEOF",null),t}(Un.b);function zn(e,t,r){
var n=new XMLHttpRequest,o=new Promise((function(o,i){n.responseType="arraybuffer",n.onload=function(){return o(n.response)},n.onerror=i,n.onabort=i,n.open("GET",e,!0),n.setRequestHeader("Range","bytes="+t+"-"+(r-1)),n.send()}));return{xhr:n,promise:o}}var Gn,Kn=r(159),Wn=r(164);!function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(Gn||(Gn={}));var Qn,$n=function(){function e(e){if(void 0===e&&(e={discard:1e3,maximum:1e5}),this.quota={discard:1e3,maximum:1e5},this.records=[],e){var t=Math.floor(e.discard),r=Math.floor(e.maximum);r>t&&t>0&&(this.quota.discard=t,this.quota.maximum=r)}}return e.filter=function(e,t,r){if(!t)return e.slice(r?-r:0);var n=new Set(t);return e.filter((function(e){return n.has(e.level)})).slice(r?-r:0)},e.format=function(e,t,r){var n,o,i=[];i.push("--------------- Metadata Starting ---------------"),Object.keys(t).forEach((function(e){i.push(e+": "+t[e])})),i.push("--------------- Metadata Finished ---------------"),i.push("--------------- Contents Starting ---------------");try{for(var a=Object(L.i)(e),s=a.next();!s.done;s=a.next()){var u=s.value,c=[];c.push("["+u.creationTime+"]"),c.push(Gn[u.level]),c.push.apply(c,Object(L.h)(u.messages)),i.push(c.join(null!=r?r:" "))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i.push("--------------- Contents Finished ---------------"),i.join("\n")},e.prototype.add=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.records.length>this.quota.maximum&&this.records.splice(0,this.quota.discard),this.records.push({level:e,messages:t,creationTime:Object(Wn.a)()}),this},e.prototype.i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.add.apply(this,Object(L.h)([Gn.Info],e)),this},e.prototype.w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.add.apply(this,Object(L.h)([Gn.Warning],e)),this},e.prototype.e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.add.apply(this,Object(L.h)([Gn.Error],e)),this},e.prototype.clear=function(){this.records.length=0},e.prototype.filter=function(t,r){return e.filter(this.records,t,r)},e}();!function(e){e.OP="001111",e.EVENT="001114"}(Qn||(Qn={}));var Yn=function(){function e(){this.outerQueues=[],this.trackQueues=[],this.defaultProp="TBD"}return e.prototype.checkArgsValidity=function(e,t,r){0},e.prototype.add=function(e,t,r){var n,o=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},i=Object.assign({name:e,value:t,srcUrl:null,sendBeacon:!1,timeStamp:Date.now()},r);if(this.checkArgsValidity(e,t,r),null==i.value||o(i.value)||(i.value=((n={})[this.defaultProp]=i.value,n)),o(i.value))try{i.value=JSON.stringify(i.value)}catch(e){console.warn(e)}this.trackQueues.push(i)},e.prototype.o=function(e,t,r){this.add(e,t,Object.assign({},r,{origin:0,kind:Qn.OP}))},e.prototype.e=function(e,t,r){this.add(e,t,Object.assign({},r,{origin:0,kind:Qn.EVENT}))},e.prototype.z=function(e){this.outerQueues.push(e)},e.prototype.destroy=function(){this.outerQueues.length=0,this.trackQueues.length=0},e}(),Jn=function(){function e(){}return e.add=function(t){"function"==typeof t&&(e.pendingList.push(t),e.onQueuePushed())},e.increaseSign=function(){e.running++},e.decreaseSign=function(){e.running--,e.onSignDecreased()},e.onQueuePushed=function(){e.consumePendingList()},e.onSignDecreased=function(){e.consumePendingList()},e.consumePendingList=function(){var t=e.maximum-e.running;if(t>0)for(var r=e.pendingList,n=Math.min(t,r.length),o=0;o<n;o++){var i=r.shift();i&&(i().then((function(){return e.decreaseSign()})).catch((function(){return e.decreaseSign()})),e.increaseSign())}},e.maximum=3,e.pendingList=[],e.running=0,e}(),Xn=function(){function e(){}return e.key=function(e,t){return t?"EID:"+t:e?"CID:"+e:"0"},e.has=function(t){var r=e.buf;if(r.has(t)){var n=r.get(t);return!e.isExpired(n)||(e.remove(t),!1)}return!1},e.get=function(t){return e.has(t)?e.buf.get(t):null},e.set=function(t,r){var n=e.buf,o=e.quota
;if(r.promise.then((function(e){r.json=e})).catch((function(r){e.remove(t)})),n.set(t,r),n.size>o.maximum)for(var i=n.size-o.maximum+o.discard,a=Object(L.h)(n.keys()),s=0;s<i;s++)e.remove(a[s])},e.remove=function(t){var r=e.buf;if(r.has(t)){var n=r.get(t);n.http&&n.http.dispose(),r.delete(t)}},e.clear=function(){e.buf.clear()},e.isExpired=function(t){var r=Date.now()-t.timeStamp;return isNaN(r)||r>e.expired},e.buf=new Map,e.quota={discard:4,maximum:32},e.expired=18e5,e}(),Zn=new(function(){function e(){this.log=new $n,this.track=new Yn,this.mseSupported=me()}return e.prototype.getParams=function(e){return this.mseSupported&&(e.fnval=80),Object.assign({qn:0,fnver:0,fnval:1,fourk:1},e)},e.prototype.getConfig=function(e){var t={playUrlKind:0,mseSupported:this.mseSupported};switch(e.kind){case R.c.Pgc:t.playUrlKind=1;break;case R.c.Pugv:t.playUrlKind=2;break;case R.c.Ugc:default:t.playUrlKind=0}return t},e.prototype.r=function(e,t){var r=new Vn(this,{persistent:!0}),n=r.r(this.getParams(e),this.getConfig(t));return{http:r,promise:n}},e}());function eo(e,t){var r=Xn.key(e.cid,e.ep_id);Xn.has(r)||Jn.add((function(){if(Xn.has(r))return Promise.reject(new Error("Cached"));var n=Zn.r(e,t);return Xn.set(r,{http:n.http,promise:n.promise,timeStamp:Date.now()}),n.promise}))}var to=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[KernelStore]",t.internal={},t.endedTimer=null,t.body=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isPlayUrlEnded:!1,isPlayUrlRequested:!1,isPreviewStream:null,callSwitchError:!1,callUpdateError:!1,suspectDuration:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseAgent",{get:function(){return this.internal.baseAgent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"agentKind",{get:function(){return this.baseAgent?this.baseAgent.kind:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flvKernel",{get:function(){return this.baseAgent&&this.baseAgent.kind===Un.a.Flv?this.baseAgent.kernelPlayer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dashKernel",{get:function(){return this.baseAgent&&this.baseAgent.kind===Un.a.Dash?this.baseAgent.kernelPlayer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedMediaState",{get:function(){return this.internal.cachedMediaState},set:function(e){this.internal.cachedMediaState=e},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.isPreviewStream=Object(D.i)((function(){return t.state.isPreviewStream}),(function(e){e?t.setState({suspectDuration:t.getSuspectDuration()}):t.setState({suspectDuration:0})})),this.dc.setPreviewStream=Object(D.i)((function(){return{body:t.body,info:t.userStore.info}}),(function(e){switch(t.uiStore.state.kind){case R.c.Pgc:case R.c.Pugv:e.body&&t.setState({isPreviewStream:!!e.body.isPreview});break;case R.c.Ugc:default:e.info&&t.setState({isPreviewStream:!!e.info.isUgcPayPreview})}})),this.dc.suspectDuration=Object(D.i)((function(){return t.state.suspectDuration}),(function(e){t.rootPlayer.emit(C.a.Player_DurationChange,new CustomEvent(C.a.Player_DurationChange))}))},t.prototype.onCommitted=function(){e.prototype.onCommitted.call(this);var t=this.httpStore.getViewKind();this.setLoadingTimeout(),t.isFatalError||t.isMissing||(this.startPlayUrlProxy(),this.setState({isPlayUrlRequested:!0}))},t.prototype.onPrepared=function(){e.prototype.onPrepared.call(this),this.state.isPlayUrlRequested||this.startPlayUrlProxy()},t.prototype.setLoadingTimeout=function(){var e=this;this.loadingClock=new ue.a((function(t,r){if(!(t>r)){var n="加载内容超时...",o="Possible reasons: non-standard browser is employed or HA has been crashed";try{"object"==typeof chrome&&(o="请尝试禁用所有浏览器插件后，刷新本页面")}catch(e){}e.log.w(e.tag,n,o),e.loadingStore.ready({message:n,contextMessage:o}),e.delLoadingTimeout()}}),1e4,1e3),this.dc.loadingClock=Object(D.c)((function(){
e.uiStore.state.pageHidden?e.loadingClock&&e.loadingClock.suspend():e.loadingClock&&e.loadingClock.resume()})),this.dc.loadingClockAlert=Object(D.l)((function(){return e.uiStore.state.isLoaded}),(function(){return e.delLoadingTimeout()}))},t.prototype.delLoadingTimeout=function(){this.dc.loadingClock&&this.dc.loadingClock(),this.dc.loadingClockAlert&&this.dc.loadingClockAlert(),this.loadingClock&&(this.loadingClock.abort(),this.loadingClock=null)},t.prototype.getCachedRawPlayUrl=function(){var e,t=this.configStore.cid,r=this.configStore.episodeId;if(this.episodeStore.isFirst&&this.rootPlayer.cd.playUrl){var n=this.rootPlayer.cd.playUrl;return this.rootPlayer.cd.playUrl=null,n}var o=function(e,t){return Xn.get(Xn.key(e,t))}(t,r);return o&&o.json?o.json.raw:null===(e=this.interactionStore.preloadDataMap.get(t))||void 0===e?void 0:e.playurlData},t.prototype.startPlayUrlProxy=function(){this.fetchPlayUrl(null,{initiator:0,preloadPlayUrl:this.getCachedRawPlayUrl()})},t.prototype.prefetchPlayUrl=function(e,t){var r=new Vn(this.rootPlayer,{persistent:!0}),n=r.r(this.httpStore.getPlayUrlParams(e),this.httpStore.getPlayUrlConfig(t));return{http:r,promise:n}},t.prototype.prefetchAVData=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,u;return Object(L.e)(this,(function(c){return 5e5,2e4,"dash"===e.mediaDataSource.type&&this.dashKernel&&(s=this.dashKernel,u=s.getCurrentCodecID("video"),n=s.getQualityNumberFromQualityIndex(s.getQualityFor("video"),"video"),i=s.getQualityNumberFromQualityIndex(s.getQualityFor("audio"),"audio"),o=this.getUrlByQn(n,"video",e.mediaDataSource.url.video,u),a=this.getUrlByQn(i,"audio",e.mediaDataSource.url.audio),o&&(t=zn(o,0,5e5)),a&&(r=zn(a,0,2e4))),[2,{vbHttp:t,abHttp:r,videoQn:n,videoUrl:o,audioQn:i,audioUrl:a}]}))}))},t.prototype.getUrlByQn=function(e,t,r,n){if(void 0===n&&(n=7),Array.isArray(r))for(var o=0;o<r.length;o++)if(r[o].id===e&&r[o].baseUrl&&(r[o].codecid===n&&"video"===t||"audio"===t))return r[o].baseUrl.replace("http://","https://")},t.prototype.fetchPlayUrl=function(e,t){var r=this,n=t&&t.initiator;this.loadingStore.ready({kind:4}),this.perfStore.setStageTiming(3),this.httpStore.fetchPlayUrl(!1,e,t).then((function(e){e.session&&(r.configStore.session=e.session),r.perfStore.setStageTiming(4),r.setPlayUrlBody(e.body,n),r.setEndedTimer(n)})).catch((function(e){0===n&&e&&5===e.code?queueMicrotask((function(){r.log.w(r.tag,"[Renewal]"),r.configStore.remove("cid"),r.apiStore.reload(null,{isRenewal:!0},{origin:0}).catch(te.a)})):(r.loadingStore.ready({kind:4,endState:2,contextMessage:e&&e.message}),r.emitErrorCodeSignal(e),r.rootPlayer.emit(C.b.ERROR_PLAY_URL,e,n),r.setEndedTimer(n))}))},t.prototype.delEndedTimer=function(){this.endedTimer&&(clearTimeout(this.endedTimer),this.endedTimer=null),this.dp.tmpPrepared&&this.dp.tmpPrepared()},t.prototype.setEndedTimer=function(e){var t=this;0===e&&(this.delEndedTimer(),this.dp.tmpPrepared=Object(D.l)((function(){return t.eventStore.isPrepared}),(function(){t.endedTimer=self.setTimeout((function(){t.setState({isPlayUrlEnded:!0})}),0)})))},t.prototype.getPlayerIdle=function(){var e=this.baseAgent&&this.baseAgent.getPlayUrl();return e&&+Object(Kn.a)("agrr",e)>0?this.configStore.session&&parseInt(this.configStore.session[0],16)<8?"eg":"cg":""},t.prototype.getPlayerUserWhite=function(){var e=this.baseAgent&&this.baseAgent.getPlayUrl();if(!e)return"";switch(+Object(Kn.a)("uagrr",e)){case 1:return"eg1";case 2:return"eg2";case 3:return"cg";default:return""}},t.prototype.setPlayUrlBody=function(e,t){this.body=e,this.triggerLoadedAction(e,t)},t.prototype.triggerLoadedAction=function(e,t){var r,n=this.apiStore.state.isSameEpisode,o=null===(r=this.interactionStore.preloadDataMap.get(this.configStore.cid))||void 0===r?void 0:r.videoData,i=!(!n||!o),a=n;this.loadingStore.ready({kind:4,endState:1},{kind:5}),this.attachExternal({mediaDataSource:e.mediaDataSource,quality:e.quality},{initiator:t,callSwitch:a,preloadAVData:o,enableTransition:i}),this.errorStore.setState({remainRetries:1,backupUrlIndex:0})},
t.prototype.cacheInternalStates=function(){if(this.internal.baseAgent&&this.internal.baseAgent.isReady&&!this.internal.cachedMediaState){var e=this.videoStore.video.paused,t=this.videoStore.video.currentTime,r=this.videoStore.video.duration;if(t<1&&e)return void this.log.i(this.tag,"[CIS]","ignored");this.log.i(this.tag,"[CIS]","paused:"+e+",currentTime:"+t+",duration:"+r),this.internal.cachedMediaState={paused:e,currentTime:t}}},t.prototype.attachMediaSourceProxy=function(e){var t=this;this.log.i(this.tag,"[attachMediaSourceProxy]"),this.clearBaseAgent();var r=function(e){t.clearBaseAgent(),"dash"===e.mediaDataSource.type?t.internal.baseAgent=new Hn(t.rootStore,t.videoStore.video):t.internal.baseAgent=new qn(t.rootStore,t.videoStore.video),t.internal.baseAgent.attachSource(e)};switch(e.mediaDataSource.type){case"dash":"function"==typeof this.dc.isDashOk&&this.dc.isDashOk(),this.dc.isDashOk=Object(D.l)((function(){return!!t.assetStore.dash}),(function(){return r(e)}));break;default:"function"==typeof this.dc.isFlvOk&&this.dc.isFlvOk(),this.dc.isFlvOk=Object(D.l)((function(){return!!t.assetStore.flv}),(function(){return r(e)}))}},t.prototype.attachExternal=function(e,t){var r=this,n=1===t.initiator||2===t.initiator;if("dash"===e.mediaDataSource.type&&this.dashKernel){if(t.callSwitch&&!this.state.callSwitchError)return this.log.i(this.tag,"attachExternal:callSwitch"),n&&this.cacheInternalStates(),void this.dashKernel.switchSource(e.mediaDataSource.url,t.preloadAVData,t.enableTransition).catch((function(){r.setState({callSwitchError:!0}),n&&r.cacheInternalStates(),r.attachMediaSourceProxy(e)}));if(t.callUpdate&&!this.state.callUpdateError)return this.log.i(this.tag,"attachExternal:callUpdate"),void this.dashKernel.updateSource(e.mediaDataSource.url).then((function(){r.track.o(X.b.Playback_Retry_Done,{from:t.from})})).catch((function(n){r.track.o(X.b.Playback_Retry_Fail,{from:t.from,msg:n&&n.msg}),r.setState({callUpdateError:!0}),r.cacheInternalStates(),r.attachMediaSourceProxy(e)}));n&&this.cacheInternalStates(),this.attachMediaSourceProxy(e)}else n&&this.cacheInternalStates(),this.attachMediaSourceProxy(e)},t.prototype.getSuspectDuration=function(){if(this.body&&this.body.timelength&&this.body.mediaDataSource.duration){var e=Math.max(0,(this.body.timelength-this.body.mediaDataSource.duration)/1e3);return e>5?e:0}return 0},t.prototype.emitErrorCodeSignal=function(e){if(e){var t=this.uiStore.kind,r=e.code,n=e.message||"",o=e.playUrl||"";if(n&&/JSON/.test(n))this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,2,t===R.c.Pgc?2110:2103,"status:"+n+",url:"+o);else switch(r){case 4:this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,2,t===R.c.Pgc?2111:2104,"status:"+n+",url:"+o);break;case 3:this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,2,t===R.c.Pgc?2108:2101,"type:https,status:"+n+",url:"+o)}}},t.prototype.clearBaseAgent=function(){this.internal.baseAgent&&(this.log.i(this.tag,"[clearBaseAgent]"),this.internal.baseAgent.dispose(),this.internal.baseAgent=null)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this);this.delEndedTimer(),this.delLoadingTimeout(),this.apiStore.pause({initiator:"Event:Dispose"}),this.baseAgent&&this.baseAgent.resetQualityReadyState(),this.internal.cachedMediaState=null},Object(L.c)([D.g.shallow],t.prototype,"body",void 0),Object(L.c)([D.b],t.prototype,"setPlayUrlBody",null),t}(se.a),ro=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[ErrorStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{retryCount:0,mediaRetryCount:0,remainRetries:1,backupUrlIndex:0,initError:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryInterval",{get:function(){return 3e3*(this.state.retryCount+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"encodingAVSource",{get:function(){return{quality:0,mediaDataSource:{type:"mp4",url:"//s1.hdslb.com/bfs/static/player/media/encoding.mp4"}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorAVSource",{get:function(){return{quality:0,
mediaDataSource:{type:"mp4",url:"//s1.hdslb.com/bfs/static/player/media/error.mp4"}}},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){e.prototype.onMount.call(this),this.addListener(),this.addErrorListener()},t.prototype.addListener=function(){var e=this;this.rootPlayer.on(C.b.PLAYER_PLAYBACK_LAG,(function(){if(e.kernelStore.baseAgent&&e.kernelStore.baseAgent.kind===Un.a.Dash){var t=e.videoStore.video,r=e.kernelStore.baseAgent.kernelPlayer;if(r&&"function"==typeof r.isLoadingFragment){var n=r.getBufferLength("video"),o=r.getBufferLength("audio"),i="playback_lag";t.buffered&&t.buffered.length>1&&(i=i+","+t.buffered.end(0)+","+t.buffered.start(1)),((isNaN(n)||n<.01)&&!r.isLoadingFragment("video")||(isNaN(o)||o<.01)&&!r.isLoadingFragment("audio"))&&e.emitErrorCodeSignal(4100,i)}}}))},t.prototype.notify=function(e){var t="抛出一个错误...";this.log.e(this.tag,t,e),this.loadingStore.ready({message:t,contextMessage:e})},t.prototype.addErrorListener=function(){var e=this;this.rootPlayer.on(C.b.ERROR_PLAY_URL,(function(t,r){switch(r){case 0:e.setState({initError:!0}),t&&t.message===V.q?(e.log.i(e.tag,"媒体正在编码中"),e.kernelStore.attachExternal(e.encodingAVSource,{initiator:r})):(e.log.w(e.tag,"进入16秒错误视频"),e.track.o(X.b.Playback_Error,{code:3001,from:1}),e.kernelStore.attachExternal(e.errorAVSource,{initiator:r})),e.apiStore.play().catch(te.a),e.log.i(e.tag,"try autoplay an error media source");break;case 2:e.track.o(X.b.Playback_Error,{code:3001,from:2}),e.track.o(X.b.Playback_Retry_Fail,{from:2}),e.startPlayUrlRetry(2);break;case 1:e.track.o(X.b.Playback_Error,{code:3001,from:3}),e.qualityStore.setRenderedQuality(t,e.qualityStore.state.nowQuality);break;default:e.log.e(e.tag,"[PlayUrl]: UnhandledError"),e.track.o(X.b.Playback_Error,{code:3001,from:0})}e.notify(t.message)})),this.rootPlayer.on(C.b.ERROR_DASH_INITIALIZE,(function(t){e.emitErrorCodeSignal(4e3,"dashPlayer initializing error."),e.reloadAVSource(2,!0),e.notify(t.message)})),this.rootPlayer.on(C.b.ERROR_DASH_KERNEL,(function(t){var r=e.assetStore.dash.ERROR,n=e.apiStore.getPlayUrl(),o=0===e.qualityStore.quality;switch(t&&t.detail&&t.detail.httpCode&&e.track.o(X.b.Playback_Error_Code,{code:t.detail.httpCode}),e.track.o(X.b.Playback_Error,{code:3,from:4,srcUrl:n}),t&&t.code){case r.DURATION_IS_NOT_ALL_EQUAL:e.log.w(e.tag,"isAutoQuality: "+o+"; "+t.msg),console.warn(e.tag,t.msg,"isAutoQuality: "+o+"; "+t.msg),o?e.emitErrorCodeSignal(t.code,t.msg):(e.qualityStore.setState({isDashSeamless:!1}),e.emitErrorCodeSignal(t.code,t.msg),e.startPlayUrlRetry(1,50));break;case r.MEDIA_DECODE_ERROR:case r.MEDIA_SUPPORTED_ERROR:case r.MEDIA_ENCRYPTED_ERROR:case r.MEDIA_ABORTED_ERROR:case r.INTERNAL_ERROR:e.emitErrorCodeSignal(t.code,t.msg),e.reloadAVSource(2);break;case r.MEDIA_ERROR:case r.MEDIA_NETWORK_ERROR:case r.MEDIA_UNKNOWN_ERROR:default:e.emitErrorCodeSignal(t.code,t.msg),e.reloadAVSource(2)}e.notify(t.code+";"+t.msg)})),this.rootPlayer.on(C.b.ERROR_FLV_KERNEL,(function(t,r,n){var o=e.assetStore.flv.ErrorTypes,i=e.assetStore.flv.ErrorDetails,a=n&&n.msg,s=n&&n.code,u="["+t+"] "+r+": "+(-1!==s?s:a),c=e.apiStore.getPlayUrl();switch(e.track.o(X.b.Playback_Error,{code:3,from:5,srcUrl:c}),t){case o.MEDIA_ERROR:switch(r){case i.MEDIA_MSE_ERROR:e.emitErrorCodeSignal(3121,u);break;case i.MEDIA_FORMAT_ERROR:e.emitErrorCodeSignal(3122,u);break;case i.MEDIA_FORMAT_UNSUPPORTED:e.emitErrorCodeSignal(3123,u);break;case i.MEDIA_CODEC_UNSUPPORTED:e.emitErrorCodeSignal(3124,u)}break;case o.NETWORK_ERROR:switch(r){case i.NETWORK_EXCEPTION:e.emitErrorCodeSignal(3111,u);break;case i.NETWORK_STATUS_CODE_INVALID:e.track.o(X.b.Playback_Error_Code,{code:s}),e.emitErrorCodeSignal(3112,u);break;case i.NETWORK_UNRECOVERABLE_EARLY_EOF:e.emitErrorCodeSignal(3113,u)}break;case o.OTHER_ERROR:default:switch(r){case i.ABNORMAL_SEGMENT_BYTELENGTH:e.track.o(X.b.Abnormal_Segment_Length_Error,{srcUrl:e.apiStore.getPlayUrl()}),e.emitErrorCodeSignal(3125,u)}}switch(t){case o.MEDIA_ERROR:case o.NETWORK_ERROR:case o.OTHER_ERROR:default:e.isFlvKernel(!1)&&e.reloadAVSource(2,!1,1)}
e.notify(t+";"+r+";"+n.code+";"+n.msg)})),this.rootPlayer.on(C.b.MEDIA_ERROR,(function(){var t=e.videoStore.video.error;switch(t||console.warn("Illegal argument of [MediaError]"),t&&t.code){case t.MEDIA_ERR_ABORTED:case t.MEDIA_ERR_DECODE:case t.MEDIA_ERR_SRC_NOT_SUPPORTED:e.isFlvKernel(!0)&&(e.emitErrorCodeSignal(3104,"[MediaError] Exception: "+t.message),e.reloadAVSource(2,!1,1));break;case t.MEDIA_ERR_NETWORK:default:e.isFlvKernel(!0)&&(e.emitErrorCodeSignal(3104,"[NetworkError] Exception: 3104 Failed to fetch, "+t.message),e.reloadAVSource(2,!1,1))}e.notify(t.message)}))},t.prototype.tryBackupPlayUrl=function(e){var t,r;if(e>=this.state.backupUrlIndex)return!1;var n=!1,o={},i=[],a=this.kernelStore.body,s=a&&a.mediaDataSource;if(s&&Array.isArray(s.segments)){try{for(var u=Object(L.i)(s.segments),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.backupURL[this.state.backupUrlIndex],d={};if(!p){n=!1;break}rn(d,l),d.url=p,i.push(d),n=!0}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}n&&rn(o,s,{segments:i})}else{(p=s.backupURL[this.state.backupUrlIndex])?(n=!0,rn(o,s,{url:p})):n=!1}return n&&(this.log.i(this.tag,"尝试使用备线","backupUrlIndex: "+this.state.backupUrlIndex),this.setState({backupUrlIndex:this.state.backupUrlIndex+1}),this.kernelStore.attachExternal({mediaDataSource:o,quality:this.qualityStore.requestQ},{callUpdate:!0,from:6,initiator:2})),n},t.prototype.isFlvKernel=function(e){var t=this.kernelStore.baseAgent;if(t&&t.kind===Un.a.Flv){var r=t.kernelPlayer;return!!r&&(e?"FlvPlayer"!==r.type:"FlvPlayer"===r.type)}return!1},t.prototype.reloadAVSource=function(e,t,r){if(this.log.i(this.tag,"[ReloadAVSource]","initiator: "+e),t&&this.kernelStore.body&&this.state.remainRetries>0)return this.log.i(this.tag,"尝试使用已有的视频数据恢复播放"),this.kernelStore.attachExternal({mediaDataSource:this.kernelStore.body.mediaDataSource,quality:this.kernelStore.body.quality},{callUpdate:!0,from:7,initiator:e}),void this.setState({remainRetries:this.state.remainRetries-1});r&&this.tryBackupPlayUrl(r)||this.startPlayUrlRetry(e,100)},t.prototype.startPlayUrlRetry=function(e,t){var r=this;this.log.i(this.tag,"[PlayUrl]","Start Infinity Retry: "+e),clearTimeout(this.retryTimer);var n=0===this.state.retryCount&&t||this.retryInterval;this.retryTimer=self.setTimeout((function(){r.kernelStore.fetchPlayUrl(null,{initiator:e}),r.setState({retryCount:r.state.retryCount+1,mediaRetryCount:r.state.mediaRetryCount+1})}),n)},t.prototype.stopPlayUrlRetry=function(){this.retryTimer&&(this.log.i(this.tag,"[PlayUrl]","Stop Infinity Retry"),clearTimeout(this.retryTimer),this.retryTimer=null,this.setState({retryCount:0}))},t.prototype.emitErrorCodeSignal=function(e,t){var r,n=this.apiStore.getPlayUrl(),o=t&&t.replace(/,/g,"."),i=(null===(r=this.kernelStore.body)||void 0===r?void 0:r.streamType)||null;this.rootPlayer.emit(C.b.ERROR_CODE_SIGNAL,3,e,"type:"+i+",url:"+n+",message:"+o)},t.prototype.checkPlaybackState=function(){var e=this.videoStore.video.paused;e!==this.mediaStore.state.paused&&this.log.e(this.tag,"checkPlaybackState:fail","paused:"+e)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.stopPlayUrlRetry()},t}(se.a),no=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[EventStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"isCommitted",{get:function(){return this.rootStore.isInitialized&&this.episodeStore.ding},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrepared",{get:function(){return this.isCommitted&&this.configStore.state.isCompleteIdEnded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return this.isPrepared&&this.uiStore.state.isLoaded},enumerable:!1,configurable:!0}),t.prototype.onGraphFlatten=function(){e.prototype.onGraphFlatten.call(this),this.log.i(this.tag,"onGraphFlatten")},t.prototype.onStorageBuild=function(){e.prototype.onStorageBuild.call(this),this.log.i(this.tag,"onStorageBuild")},t.prototype.onStateCreate=function(){
e.prototype.onStateCreate.call(this),this.log.i(this.tag,"onStateCreate")},t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this),this.log.i(this.tag,"onStateCreated")},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.log.i(this.tag,"onMount"),this.registerEventListener()},t.prototype.onMounted=function(){e.prototype.onMounted.call(this),this.log.i(this.tag,"onMounted")},t.prototype.onCommitted=function(){e.prototype.onCommitted.call(this),this.log.i(this.tag,"onCommitted")},t.prototype.onPrepared=function(){e.prototype.onPrepared.call(this),this.log.i(this.tag,"onPrepared","Manifest:",JSON.stringify(this.apiStore.getManifest()))},t.prototype.onUserLoaded=function(t){e.prototype.onUserLoaded.call(this,t),this.log.i(this.tag,"onUserLoaded","err:"+!!t.err+",mid:"+(t.mid||null))},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.log.i(this.tag,"onDispose")},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.log.i(this.tag,"onDisconnect")},t.prototype.mediaEndedHandler=function(){var e=this.mediaStore.state.paused,t=this.mediaStore.state.ended;this.clientStore.state.loop?(this.mediaStore.setState({ended:!1}),e||this.rootPlayer.emit(C.a.Player_TimeUpdate,new CustomEvent(C.a.Player_TimeUpdate)),this.rootPlayer.emit(C.a.Player_Loop_Signal,new CustomEvent(C.a.Player_Loop_Signal,{cancelable:!0}))):(this.mediaStore.setState({paused:!0,ended:!0}),e||(this.rootPlayer.emit(C.a.Player_TimeUpdate,new CustomEvent(C.a.Player_TimeUpdate)),this.rootPlayer.emit(C.a.Player_Pause,new CustomEvent(C.a.Player_Pause))),t||this.rootPlayer.emit(C.a.Player_Ended,new CustomEvent(C.a.Player_Ended)))},t.prototype.registerEventListener=function(){var e=this;this.rootPlayer.on(C.b.MEDIA_ENDED,(function(){e.mediaEndedHandler()})),this.rootPlayer.on(C.b.MEDIA_PLAY,(function(){e.mediaStore.setState({paused:!1}),e.rootPlayer.emit(C.a.Player_Play,new CustomEvent(C.a.Player_Play,{detail:{initiator:e.apiStore.iPlayOnce}}))})).on(C.b.MEDIA_PAUSE,(function(){e.mediaStore.setState({paused:!0}),e.rootPlayer.emit(C.a.Player_Pause,new CustomEvent(C.a.Player_Pause,{detail:{initiator:e.apiStore.iPauseOnce}}))})),this.rootPlayer.on(C.b.MEDIA_PLAYING,(function(){e.rootPlayer.emit(C.a.Player_Playing,new CustomEvent(C.a.Player_Playing))})).on(C.b.MEDIA_WAITING,(function(){e.rootPlayer.emit(C.a.Player_Waiting,new CustomEvent(C.a.Player_Waiting))})),this.rootPlayer.on(C.b.MEDIA_SEEKING,(function(){e.rootPlayer.emit(C.a.Player_Seeking,new CustomEvent(C.a.Player_Seeking,{detail:{initiator:e.apiStore.state.iSeek}}))})).on(C.b.MEDIA_SEEKED,(function(){e.rootPlayer.emit(C.a.Player_Seeked,new CustomEvent(C.a.Player_Seeked,{detail:{initiator:e.apiStore.iSeekOnce}}))})),this.rootPlayer.on(C.b.MEDIA_TIMEUPDATE,(function(){e.rootPlayer.emit(C.a.Player_TimeUpdate,new CustomEvent(C.a.Player_TimeUpdate))})).on(C.b.MEDIA_DURATIONCHANGE,(function(){e.rootPlayer.emit(C.a.Player_DurationChange,new CustomEvent(C.a.Player_DurationChange))})),this.rootPlayer.on(C.b.MEDIA_LOADEDMETADATA,(function(){e.rootPlayer.emit(C.a.Player_LoadedMetadata,new CustomEvent(C.a.Player_LoadedMetadata))})).on(C.b.MEDIA_CANPLAY,(function(){e.rootPlayer.emit(C.a.Player_Canplay,new CustomEvent(C.a.Player_Canplay))})).on(C.b.MEDIA_PROGRESS,(function(){e.rootPlayer.emit(C.a.Player_Progress,new CustomEvent(C.a.Player_Progress))})).on(C.b.MEDIA_RATECHANGE,(function(){e.rootPlayer.emit(C.a.Player_RateChange,new CustomEvent(C.a.Player_RateChange))})).on(C.b.MEDIA_VOLUMECHANGE,(function(){e.rootPlayer.emit(C.a.Player_VolumeChange,new CustomEvent(C.a.Player_VolumeChange))})).on(C.b.MEDIA_ERROR,(function(){e.rootPlayer.emit(C.a.Player_Error,new CustomEvent(C.a.Player_Error))})),this.rootPlayer.on(C.b.MEDIA_LOADSTART,(function(){e.rootPlayer.emit(C.a.Player_LoadStart,new CustomEvent(C.a.Player_LoadStart))})).on(C.b.MEDIA_LOADEDDATA,(function(){e.rootPlayer.emit(C.a.Player_LoadedData,new CustomEvent(C.a.Player_LoadedData))})).on(C.b.MEDIA_STALLED,(function(){e.rootPlayer.emit(C.a.Player_Stalled,new CustomEvent(C.a.Player_Stalled))
})).on(C.b.MEDIA_SUSPEND,(function(){e.rootPlayer.emit(C.a.Player_Suspend,new CustomEvent(C.a.Player_Suspend))})).on(C.b.MEDIA_ABORT,(function(){e.rootPlayer.emit(C.a.Player_Abort,new CustomEvent(C.a.Player_Abort))})).on(C.b.MEDIA_EMPTIED,(function(){e.rootPlayer.emit(C.a.Player_Emptied,new CustomEvent(C.a.Player_Emptied))}))},Object(L.c)([D.e],t.prototype,"isCommitted",null),Object(L.c)([D.e],t.prototype,"isPrepared",null),Object(L.c)([D.e],t.prototype,"isLoaded",null),t}(se.a),oo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HelperStore]",t.helpers=new Map,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){var e;return(e={})[0]=!1,e[1]=!1,e[2]=!1,e[3]=!1,e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canPrebuild",{get:function(){return this.assetStore.dash&&this.kernelStore.state.isPlayUrlEnded},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){if(e.prototype.onMount.call(this),this.buildHelper(0),this.fetchCommonHelper(),!this.configStore.isService(R.h.Core)){if(this.configStore.isChannel(R.a.Homepage)||this.configStore.isChannel(R.a.Homepage_Topic))return this.buildHelper(3),void this.fetchHomepageHelper();this.buildHelper(1),this.fetchDefaultHelper(),this.configStore.auxiliary&&(this.buildHelper(2),this.fetchAuxiliaryHelper())}},t.prototype.buildHelper=function(e){var t=this;this.dc[e]&&this.log.e(this.tag,"Error: Helper("+e+") is repeatedly initialized"),this.dc[e]=Object(D.l)((function(){return t.canPrebuild&&t.state[e]}),(function(){var r=t.helpers.get(e);r?new r(t.rootStore).install():t.log.w(t.tag,"Helper("+e+") not found")}))},t.prototype.fetchCommonHelper=function(){var e=this;r.e(7).then(r.bind(null,465)).then((function(t){e.assignHelper(0,t.CommonHelper)})).catch((function(t){e.helperError("common_helper",t)}))},t.prototype.fetchDefaultHelper=function(){var e=this;Promise.all([r.e(2),r.e(1),r.e(13),r.e(0),r.e(10)]).then(r.bind(null,460)).then((function(t){e.assignHelper(1,t.DefaultHelper)})).catch((function(t){e.helperError("default_helper",t)}))},t.prototype.fetchHomepageHelper=function(){var e=this;r.e(12).then(r.bind(null,458)).then((function(t){e.assignHelper(3,t.HomepageHelper)})).catch((function(t){e.helperError("homepage_helper",t)}))},t.prototype.fetchAuxiliaryHelper=function(){var e=this;Promise.all([r.e(1),r.e(0),r.e(4)]).then(r.bind(null,462)).then((function(t){e.assignHelper(2,t.AuxiliaryHelper)})).catch((function(t){e.helperError("auxiliary_helper",t)}))},t.prototype.assignHelper=function(e,t){var r;this.helpers.set(e,t),this.setState(((r={})[e]=!0,r))},t.prototype.helperError=function(e,t){this.log.e(this.tag,e,t&&t.message)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,!0)},Object(L.c)([D.e],t.prototype,"canPrebuild",null),t}(se.a),io={entryRequestStart:0,entryResponseEnd:0},ao=new Set;function so(e,t){return"number"!=typeof e||isNaN(e)?e:Math.round(Math.pow(10,t)*e)/Math.pow(10,t)}var uo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[PerfStore]",t.bufferingInfo={},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{stalled:!1,lagLoad:!1,seekLoad:!1,headLoad:!1,nullLoad:!1,loadLagTime:0,previousTime:0,prevSeekTime:0,bufferingStartTime:0}},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.resetStageDetails(),this.addLagEvents(),this.dc.buffering=Object(D.i)((function(){return t.videoStore.state.buffering}),(function(e){if(e){if(t.setState({stalled:!0}),!t.state.bufferingStartTime){var r={},n=t.kernelStore.dashKernel,o=n&&n.getBufferingInfo(),i=t.mediaStore.state.bufferedTime,a=t.videoStore.video.currentTime;r.obLen=i,r.ocTime=a,r.srcUrl=t.apiStore.getPlayUrl(),n&&Object.assign(r,{vbl:n.getBufferLength("video"),abl:n.getBufferLength("audio"),spd:n.getNetworkActivity()},n.getBufferingInfo()),t.bufferingInfo=r,t.track.o(X.b.Load_Start,r),a<i-4?t.setState({lagLoad:!0}):o&&"161"===o.type?t.setState({headLoad:!0
}):n&&!r.type&&t.setState({nullLoad:!0}),t.trySkipMediaGap(),t.setState({bufferingStartTime:Date.now()})}}else t.setState({prevSeekTime:t.videoStore.video.currentTime})}))},t.prototype.onNavigate=function(){e.prototype.onNavigate.call(this),this.addPerfEvents()},t.prototype.setStageTiming=function(e,t){if(this.stageTiming[e])return!1;var r=this.tag+"@hideTimeGap";switch(e){case 3:Object(n.b)("M06"),Object(n.c)("P05:CS2PUS","M04","M06");break;case 4:Object(n.b)("M07"),Object(n.c)("P07:PUS2PUE","M06","M07");break;case 5:Object(n.b)("M08"),Object(n.c)("P08:PUE2MLS","M07","M08"),this.hideTimeGap.streamTrusted=!this.uiStore.state.pageHidden,this.uiStore.timeStarting(r);break;case 6:Object(n.b)("M09"),Object(n.c)("P09:MLS2MM","M08","M09"),this.hideTimeGap.streamGap=this.uiStore.timeFinished(r).hiddenDuration;break;case 7:Object(n.b)("M10"),Object(n.c)("P10:MLS2MF","M08","M10");break;case 8:Object(n.b)("M11"),Object(n.c)("P11:MLS2MC","M08","M11")}return this.stageTiming[e]=null!=t?t:performance.now(),!0},t.prototype.getStageTiming=function(){var e=this.stageTiming,t=io,r=this.hideTimeGap.streamGap,n=+this.episodeStore.isFirst,o=+(this.apiStore.state.isRenewal||this.configStore.state.isRequestId),i=+this.hideTimeGap.streamTrusted,a=+e[0],s=+e[1],u=+e[2],c=+e[3],l=+e[4],p=+e[5],d=+e[6],f=+e[7],h=+e[8],y=n?0:a,m=n?this.rootPlayer.connectStart:a,v=d-y-r,b=n?t.entryRequestStart:0,g=n?t.entryResponseEnd-t.entryRequestStart:0,S=c?c-(n?t.entryResponseEnd:a):0,E=c&&l?l-c:0,O=d-(l||p)-r;return rn({context:{initial:n,visible:i,renewal:o},duration:{s0:so(v,2),s1:so(b,2),s2:so(g,2),s3:so(S,2),s4:so(E,2),s5:so(O,2)}},{stageTiming:{timelineStart:y,approximateStart:m,viewStart:s,viewEnd:u,playUrlStart:c,playUrlEnd:l,mediaLoadStart:p,mediaMetadata:d,mediaFrame:f,mediaCanplay:h},entryTiming:n?t:null,timeGap:this.hideTimeGap})},t.prototype.resetStageDetails=function(){var e;this.hideTimeGap={streamGap:0,streamTrusted:!1},this.stageTiming=((e={})[0]=NaN,e[1]=NaN,e[2]=NaN,e[3]=NaN,e[4]=NaN,e[5]=NaN,e[6]=NaN,e[7]=NaN,e[8]=NaN,e),this.bufferingInfo={}},t.prototype.addLagEvents=function(){var e=this;this.rootPlayer.on(C.a.Player_Dispose,(function(){e.resetStageDetails()}),1),this.rootPlayer.on(C.b.MEDIA_STALLED,(function(){e.setState({stalled:!0})})).on(C.b.PLAYER_PLAYBACK_LAG,(function(){e.setState({loadLagTime:Date.now()})})).on(C.b.MEDIA_TIMEUPDATE,(function(){e.state.loadLagTime&&(e.track.o(X.b.Lag_Load_End,{val:Date.now()-e.state.loadLagTime}),e.setState({loadLagTime:0}))})),this.rootPlayer.on(C.b.PLAYER_PLAYBACK_LAG,(function(){var t=NaN,r=NaN,n="",o=e.apiStore.getPlayUrl(),i=e.mediaStore.state.bufferedTime,a=e.apiStore.getCurrentTime();if(e.kernelStore.baseAgent&&e.kernelStore.baseAgent.kind===Un.a.Dash){var s=e.kernelStore.baseAgent.kernelPlayer;s&&(t=s.getBufferLength("video"),r=s.getBufferLength("audio"),"function"==typeof s.getNextFragmentHistoryInfo&&(n=s.getNextFragmentHistoryInfo()))}e.track.o(X.b.Lag_Load_Start,{ct:a,bt:i,vbl:t,abl:r,msg:n,srcUrl:o})})),this.rootPlayer.on(C.b.MEDIA_SEEKED,(function(){if(e.state.stalled){var t=Date.now(),r=e.state.bufferingStartTime;r&&r<t&&(e.bufferingInfo.bufferTime=t-r,e.track.o(e.state.seekLoad?X.b.Load_End_Seek:X.b.Load_End_Hack,e.bufferingInfo),e.bufferingInfo={}),e.setState({stalled:!1,bufferingStartTime:0})}e.setState({seekLoad:!1})})).on(C.b.MEDIA_TIMEUPDATE,(function(){var t=e.videoStore.video.currentTime,r=e.state,n=r.previousTime,o=r.bufferingStartTime,i=r.stalled,a=r.lagLoad,s=r.headLoad,u=r.seekLoad,c=r.nullLoad;if(i&&n!==t){var l=Date.now();o&&o<l&&(e.bufferingInfo.bufferTime=l-o,e.track.o(u?X.b.Load_End_Seek:a?X.b.Lag_Load_End:s?X.b.Load_End_Head:c?X.b.Load_End_Null:X.b.Load_End,e.bufferingInfo),e.bufferingInfo={})}e.setState({stalled:!1,lagLoad:!1,headLoad:!1,nullLoad:!1,bufferingStartTime:0})}))},t.prototype.trySkipMediaGap=function(){if(!this.videoStore.video.seeking&&!this.apiStore.excludedBuffering()){var e=this.videoStore.video,t=this.videoStore.video.currentTime;if(e.buffered&&e.buffered.length>1)for(var r=0;r<e.buffered.length-1;r++){
var n=0,o=e.buffered.start(r),i=e.buffered.end(r),a=e.buffered.start(r+1);e.buffered.end(r+1);o<t&&i>=t-4&&a>t-4&&a-i<4&&(n=Math.max(a,t),this.log.w(this.tag,"[MediaGap]",t+";"+i+","+a),this.track.o(X.b.Media_Gap,{end:i,nextStart:a})),n&&n!==this.state.prevSeekTime&&(this.log.i(this.tag,"[SkipGap]","seekTarget: "+n),this.setState({prevSeekTime:n}),this.mediaStore.internalSeek(n))}}},t.prototype.addPerfEvents=function(){this.rootPlayer.once(C.a.Player_LoadedMetadata,this.recordMetadata).once(C.a.Player_Canplay,this.recordCanplay)},t.prototype.removePerfEvents=function(){this.rootPlayer.off(C.a.Player_LoadedMetadata,this.recordMetadata).off(C.a.Player_Canplay,this.recordCanplay)},t.prototype.recordMetadata=function(){var e=this.getStageTiming(),t=e.context,r=e.duration;this.track.o(X.b.Stage,{initial:t.initial,renewal:t.renewal,visible:t.visible,s0:r.s0,s1:r.s1,s2:r.s2,s3:r.s3,s4:r.s4,s5:r.s5})},t.prototype.recordCanplay=function(){var e=this.getStageTiming(),t=e.context,r=e.stageTiming,n=e.entryTiming,o=this.rootPlayer,i={initial:t.initial,renewal:t.renewal,visible:t.visible,timelineStart:so(r.timelineStart,2),approximateStart:so(r.approximateStart,2),viewStart:so(r.viewStart,2),viewEnd:so(r.viewEnd,2),playUrlStart:so(r.playUrlStart,2),playUrlEnd:so(r.playUrlEnd,2),mediaLoadStart:so(r.mediaLoadStart,2),mediaMetadata:so(r.mediaMetadata,2),mediaFrame:so(r.mediaFrame,2),mediaCanplay:so(r.mediaCanplay,2)};e.entryTiming&&Object.assign(i,{entryStart:so(n.entryRequestStart,2),entryEnd:so(n.entryResponseEnd,2),instantiate:so(o.instantiate,2),connectStart:so(o.connectStart,2),storeEnd:so(o.storeEnd,2)}),this.kernelStore.baseAgent&&(i.canplaySpeed=so(this.kernelStore.baseAgent.averageThroughput,2)),this.track.o(X.b.Media_Canplay,i)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.removePerfEvents()},Object(L.c)([ee.a],t.prototype,"recordMetadata",null),Object(L.c)([ee.a],t.prototype,"recordCanplay",null),t}(se.a),co=function(){function e(e){this.cfs=null,this.fss=[{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",onfullscreenchange:"onfullscreenchange",onfullscreenerror:"onfullscreenerror",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"},{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",onfullscreenchange:"onwebkitfullscreenchange",onfullscreenerror:"onwebkitfullscreenerror",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"},{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",onfullscreenchange:"onmozfullscreenchange",onfullscreenerror:"onmozfullscreenerror",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"},{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",onfullscreenchange:"onmsfullscreenchange",onfullscreenerror:"onmsfullscreenerror",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}],this.ele=e,this.doc=this.ele.ownerDocument||document,this.win=this.doc.defaultView||window;for(var t=0;t<this.fss.length;t++)if(this.fss[t].fullscreenEnabled in this.doc){this.cfs=this.fss[t];break}}return Object.defineProperty(e.prototype,"hasElementEvent",{get:function(){return this.cfs.onfullscreenchange in this.ele&&this.cfs.onfullscreenerror in this.ele},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentElement",{get:function(){return this.ele},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullscreenMapping",{get:function(){return this.cfs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullscreenEnabled",{get:function(){return!!this.cfs&&Boolean(this.doc[this.cfs.fullscreenEnabled])},enumerable:!1,configurable:!0}),
Object.defineProperty(e.prototype,"fullscreenElement",{get:function(){return this.cfs&&this.doc[this.cfs.fullscreenElement]||null},enumerable:!1,configurable:!0}),e.prototype.getBrowsingContextPromise=function(){var e=this.win.Promise;return"function"==typeof e&&"function"==typeof e.resolve&&"function"==typeof e.reject?e:null},e.prototype.requestFullscreen=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t,r,n=this;return Object(L.e)(this,(function(o){if(this.cfs)return t=new Promise((function(e,t){var r=function(t){n.fullscreenElement===n.currentElement&&(n.removeElementListener("fullscreenchange",r,!0),n.removeElementListener("fullscreenerror",o,!0),n.removeListener("fullscreenchange",r),n.removeListener("fullscreenerror",o),e())},o=function(e){n.fullscreenElement!==n.currentElement&&(n.removeElementListener("fullscreenchange",r,!0),n.removeElementListener("fullscreenerror",o,!0),n.removeListener("fullscreenchange",r),n.removeListener("fullscreenerror",o),t())};n.addElementListener("fullscreenchange",r,!0),n.addElementListener("fullscreenerror",o,!0),n.addListener("fullscreenchange",r),n.addListener("fullscreenerror",o)})),(r=this.ele[this.cfs.requestFullscreen](e))&&"function"==typeof r.then&&"function"==typeof r.catch?[2,r]:[2,t];throw new Error("Fullscreen is not supported")}))}))},e.prototype.exitFullscreen=function(){return Object(L.b)(this,void 0,void 0,(function(){var e,t,r=this;return Object(L.e)(this,(function(n){if(this.cfs)return e=new Promise((function(e,t){var n=function(t){r.fullscreenElement!==r.currentElement&&(r.removeElementListener("fullscreenchange",n,!0),r.removeElementListener("fullscreenerror",o,!0),r.removeListener("fullscreenchange",n),r.removeListener("fullscreenerror",o),e())},o=function(e){r.fullscreenElement===r.currentElement&&(r.removeElementListener("fullscreenchange",n,!0),r.removeElementListener("fullscreenerror",o,!0),r.removeListener("fullscreenchange",n),r.removeListener("fullscreenerror",o),t())};r.addElementListener("fullscreenchange",n,!0),r.addElementListener("fullscreenerror",o,!0),r.addListener("fullscreenchange",n),r.addListener("fullscreenerror",o)})),(t=this.doc[this.cfs.exitFullscreen]())&&"function"==typeof t.then&&"function"==typeof t.catch?[2,t]:[2,e];throw new Error("Fullscreen is not supported")}))}))},Object.defineProperty(e.prototype,"onfullscreenchange",{get:function(){return this.cfs?this.ele[this.cfs.onfullscreenchange]:null},set:function(e){this.cfs&&(this.ele[this.cfs.onfullscreenchange]=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onfullscreenerror",{get:function(){return this.cfs?this.ele[this.cfs.onfullscreenerror]:null},set:function(e){this.cfs&&(this.ele[this.cfs.onfullscreenerror]=e)},enumerable:!1,configurable:!0}),e.prototype.addElementListener=function(e,t,r){this.cfs&&this.ele.addEventListener(this.cfs[e],t,r)},e.prototype.removeElementListener=function(e,t,r){this.cfs&&this.ele.removeEventListener(this.cfs[e],t,r)},e.prototype.addListener=function(e,t,r){this.cfs&&this.doc.addEventListener(this.cfs[e],t,r)},e.prototype.removeListener=function(e,t,r){this.cfs&&this.doc.removeEventListener(this.cfs[e],t,r)},e}(),lo=function(){function e(e){this.vid=e,this.doc=this.vid.ownerDocument||document,this.win=this.doc.defaultView||window,"function"==typeof this.vid.requestPictureInPicture?this.pipKind=1:"function"==typeof this.vid.webkitSetPresentationMode?this.pipKind=2:this.pipKind=0}return Object.defineProperty(e.prototype,"pipEntered",{get:function(){return 2===this.pipKind?"picture-in-picture"===this.vid.webkitPresentationMode:this.pipElement===this.vid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pipEnabled",{get:function(){return 2===this.pipKind?this.vid.webkitSupportsPresentationMode("picture-in-picture"):this.doc.pictureInPictureEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pipElement",{get:function(){return this.doc.pictureInPictureElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoPip",{get:function(){
return this.vid.autoPictureInPicture},set:function(e){this.vid.autoPictureInPicture=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disablePip",{get:function(){return this.vid.disablePictureInPicture},set:function(e){this.vid.disablePictureInPicture=e},enumerable:!1,configurable:!0}),e.prototype.requestPip=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){if(2===this.pipKind){if(this.pipEnabled)return[2,new Promise((function(t){var r=e.vid.onwebkitpresentationmodechanged;e.vid.onwebkitpresentationmodechanged=function(n){"function"==typeof r&&r(n),e.pipEntered&&(e.vid.onwebkitpresentationmodechanged=r,t())},e.vid.webkitSetPresentationMode("picture-in-picture")}))];throw new Error("Picture-in-Picture not supported")}return[2,this.vid.requestPictureInPicture()]}))}))},e.prototype.exitPip=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){return 2===this.pipKind?[2,new Promise((function(t){var r=e.vid.onwebkitpresentationmodechanged;e.vid.onwebkitpresentationmodechanged=function(n){"function"==typeof r&&r(n),e.pipEntered||(e.vid.onwebkitpresentationmodechanged=r,t())},e.vid.webkitSetPresentationMode("inline")}))]:[2,this.doc.exitPictureInPicture()]}))}))},e.prototype.addListener=function(e,t,r){this.vid.addEventListener(e,t,r)},e.prototype.removeListener=function(e,t,r){this.vid.removeEventListener(e,t,r)},e}(),po=function(e){function t(){var t,r,n=null!==e&&e.apply(this,arguments)||this;return n.tag="[ScreenStore]",n.delayEventTimer=null,n.lastChanged=((t={})[R.g.Normal]=0,t[R.g.Wide]=0,t[R.g.Web]=0,t[R.g.Mini]=0,t[R.g.Full]=0,t[R.g.Pip]=0,t),n.rollbackPath=((r={})[R.g.Normal]=[],r[R.g.Wide]=[R.g.Normal],r[R.g.Web]=[R.g.Normal,R.g.Wide],r[R.g.Mini]=[R.g.Normal,R.g.Wide],r[R.g.Full]=[R.g.Normal,R.g.Wide],r[R.g.Pip]=[R.g.Normal,R.g.Wide,R.g.Web],r),n}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"hasPipFn",{get:function(){return this.ps?0!==this.ps.pipKind:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pipEnabled",{get:function(){return this.ps?this.ps.pipEnabled:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFullscreenFn",{get:function(){return this.fs?!!this.fs.fullscreenMapping:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullscreenEnabled",{get:function(){return this.fs?this.fs.fullscreenEnabled:null},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.fs=new co(this.nodes.container),this.ps=new lo(this.videoStore.video),this.dc.mainScreenChanged=Object(D.c)((function(){t.lastChanged[t.uiStore.state.mainScreen]=performance.now()})),this.dc.sideScreenChanged=Object(D.c)((function(){null!=t.uiStore.state.sideScreen&&(t.lastChanged[t.uiStore.state.sideScreen]=performance.now())})),this.log.i(this.tag,"Modern Fullscreen API: "+this.fs.hasElementEvent),this.addEvents()},t.prototype.backwardScreen=function(){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(e){switch(e.label){case 0:switch(this.apiStore.getScreenKind()){case R.g.Pip:return[3,1];case R.g.Full:return[3,3]}return[3,5];case 1:return[4,this.exitBrowserScreen(R.g.Pip)];case 2:return e.sent(),[3,7];case 3:return[4,this.exitBrowserScreen(R.g.Full)];case 4:return e.sent(),[3,7];case 5:return[4,this.apiStore.requestScreen(this.apiStore.getPastScreenDetails().kind)];case 6:return e.sent(),[3,7];case 7:return[2]}}))}))},t.prototype.exitBrowserScreen=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){switch(t.label){case 0:return e!==R.g.Full?[3,2]:this.fs.fullscreenElement?[4,this.fs.exitFullscreen()]:[3,2];case 1:return t.sent(),[2,!0];case 2:return e!==R.g.Pip?[3,4]:this.ps.pipElement?[4,this.ps.exitPip()]:[3,4];case 3:return t.sent(),[2,!0];case 4:return[2,!1]}}))}))},t.prototype.addDelayEvents=function(){var e=this;this.removeDelayEvents(),this.delayEventTimer=self.setTimeout((function(){
return e.addEvents()}),50)},t.prototype.removeDelayEvents=function(){null==this.delayEventTimer&&(clearTimeout(this.delayEventTimer),this.delayEventTimer=null),this.removeEvents()},t.prototype.addEvents=function(){this.fs.hasElementEvent?(this.fs.addElementListener("fullscreenchange",this.onFullscreenChange),this.fs.addElementListener("fullscreenerror",this.onFullscreenError)):(this.fs.addListener("fullscreenchange",this.onFullscreenChange),this.fs.addListener("fullscreenerror",this.onFullscreenError)),2===this.ps.pipKind?this.ps.addListener("webkitpresentationmodechanged",this.onPipChange):(this.ps.addListener("enterpictureinpicture",this.onPipEnter),this.ps.addListener("leavepictureinpicture",this.onPipLeave))},t.prototype.removeEvents=function(){this.fs&&(this.fs.removeElementListener("fullscreenchange",this.onFullscreenChange),this.fs.removeElementListener("fullscreenerror",this.onFullscreenError),this.fs.removeListener("fullscreenchange",this.onFullscreenChange),this.fs.removeListener("fullscreenerror",this.onFullscreenError)),this.ps&&(this.ps.removeListener("enterpictureinpicture",this.onPipEnter),this.ps.removeListener("leavepictureinpicture",this.onPipLeave),this.ps.removeListener("webkitpresentationmodechanged",this.onPipChange))},t.prototype.onFullscreenChange=function(){this.fs&&(this.fs.fullscreenElement===this.fs.currentElement?this.uiStore.setState({sideScreen:R.g.Full}):this.uiStore.setState({mainScreen:this.apiStore.getPastScreenDetails().kind,sideScreen:null}))},t.prototype.onFullscreenError=function(){this.log.w(this.tag,"Fullscreen error")},t.prototype.onPipChange=function(e){this.ps.pipEntered?this.onPipEnter(e):this.onPipLeave(e)},t.prototype.onPipEnter=function(e){var t=e.pictureInPictureWindow;t&&(this.uiStore.setState({pipWindowWidth:t.width,pipWindowHeight:t.height}),t.addEventListener("resize",this.onPipWindowResize)),this.uiStore.setState({sideScreen:R.g.Pip})},t.prototype.onPipLeave=function(e){var t=e.pictureInPictureWindow;t&&(this.uiStore.setState({pipWindowWidth:t.width,pipWindowHeight:t.height}),t.removeEventListener("resize",this.onPipWindowResize)),this.uiStore.setState({mainScreen:this.apiStore.getPastScreenDetails().kind,sideScreen:null})},t.prototype.onPipWindowResize=function(e){if(e.target){var t=e.target.width,r=e.target.height;"number"==typeof t&&"number"==typeof r&&this.uiStore.setState({pipWindowWidth:t,pipWindowHeight:r})}},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.removeDelayEvents(),this.removeEvents()},Object(L.c)([ee.a],t.prototype,"onFullscreenChange",null),Object(L.c)([ee.a],t.prototype,"onFullscreenError",null),Object(L.c)([ee.a],t.prototype,"onPipChange",null),Object(L.c)([ee.a],t.prototype,"onPipEnter",null),Object(L.c)([ee.a],t.prototype,"onPipLeave",null),Object(L.c)([ee.a],t.prototype,"onPipWindowResize",null),t}(se.a),fo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmSend]",t.url="//api.bilibili.com/x/v2/dm/post",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=e.data||{};return{code:e.code,message:e.message,dmid:t.dmid_str,visible:t.visible,action:t.action}},t}(pn.a),ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmCmdSend]",t.url="//api.bilibili.com/x/v2/dm/command/post",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=e.data||{};return{code:e.code,message:e.message,dmid:t.idStr,extra:t.extra}},t}(pn.a),yo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this
;return t.tag="[HttpDmCmdDel]",t.url="//api.bilibili.com/x/v2/dm/command/del",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){return{code:e.code,message:e.message}},t}(pn.a),mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{status:null,mid:null,level:null,dmRights:null,focus:!1,forceOn:!1,err:null}},enumerable:!1,configurable:!0}),t.prototype.onMounted=function(){var t=this;e.prototype.onMounted.call(this),this.configStore.fromDid&&(this.setState({forceOn:!0}),this.forceOn=!0),this.dc.dmVisible=Object(D.i)((function(){return t.dmVisible}),(function(){t.rootPlayer.emit(C.a.Player_Danmaku_Change,new CustomEvent(C.a.Player_Danmaku_Change))})),this.dc.forceDm=Object(D.c)((function(){t.forceOn=t.state.forceOn}))},t.prototype.onUserLoaded=function(t){e.prototype.onUserLoaded.call(this,t),this.setState({err:t.err,mid:t.mid,level:t.level,dmRights:t.dmRights})},Object.defineProperty(t.prototype,"status",{get:function(){var e,t=this.state.status,r=this.danmakuStore.state,n=r.isViewLoaded,o=r.state,i=r.checkBox,a=this.userStore.info,s=this.state.status;if(!a)return un.a.SEND_STATUS_LOGOUT;if(!a.mid&&!a.err)return un.a.SEND_STATUS_LOGOUT;if(n)switch(o){case 0:i&&this.localStore.get().dmSend.upDm&&(t=un.a.SEND_STATUS_UP_DM);break;case 1:return un.a.SEND_STATUS_CLOSED;case 2:return un.a.SEND_STATUS_UPDATE}return"number"==typeof(null===(e=a.dmRights)||void 0===e?void 0:e.initStatus)&&(t=a.dmRights.initStatus),null!==s&&(t=s),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dmVisible",{get:function(){var e=this.dmSettingStore.state.dmSwitch,t=this.dmSettingStore.state.dmSwitchOut;return!this.danmakuStore.state.state&&(!!this.forceOn||("boolean"==typeof t&&(e=t),e))},enumerable:!1,configurable:!0}),t.prototype.send=function(e){return new fo(this.rootPlayer).r(e)},t.prototype.cmdSend=function(e){return new ho(this.rootPlayer).r(e)},t.prototype.cmdDel=function(e){return new yo(this.rootPlayer).r({dmid:e,oid:this.configStore.cid})},Object(L.c)([D.e],t.prototype,"status",null),Object(L.c)([D.e],t.prototype,"dmVisible",null),t}(se.a),vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmid]",t.url="//api.bilibili.com/x/v2/dm/thumbup/detail",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,params:e,withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=e.data||{};return{dmid:t.dmid_str,likes:t.likes||1,liked:t.user_like,mode:t.mode,color:t.color,size:t.font_size,pool:t.pool,attr:t.attr,stime:t.progress/1e3||0,text:t.msg||""}},t}(pn.a),bo=r(165),go=r(166),So=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDanmaku]",t.protoMessage={},t.retried=0,t}return Object(L.d)(t,e),t.prototype.r=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(r){return this.config=Object.assign({url:null,retryCount:3,retryInterval:500,withCredentials:!0,message:"DmSegMobileReply"},t),[2,this.getRemoteResponse().then((function(t){var r=e.config.message;e.protoMessage[r]||(e.protoMessage[r]=bo.Root.fromJSON(go).lookupType("bilibili.community.service.dm.v1."+r));var n=e.protoMessage[r].decode(new Uint8Array(t.data));return{error:null,details:e.protoMessage[r].toObject(n)}})).catch((function(e){return{error:e,details:null}}))]}))}))},t.prototype.getRemoteResponse=function(){var e=this;return this.request({url:this.config.url,withCredentials:this.config.withCredentials,responseType:"arraybuffer"}).catch((function(t){
return!e.isCanceled(t)&&e.config.retryCount>e.retried?new Promise((function(t,r){e.timer=window.setTimeout((function(){e.retried++,e.getRemoteResponse().then(t,r),e.log.i(e.tag,"Retry: "+e.retried+"/"+e.config.retryCount)}),e.config.retryInterval)})):Promise.reject(t)}))},t.prototype.dispose=function(){e.prototype.dispose.call(this),clearTimeout(this.timer)},t}(pn.a),Eo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmReport]",t.url="//api.bilibili.com/x/dm/report/add",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Oo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmForbid]",t.url="//api.bilibili.com/x/v2/dm/filter/up/black",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),wo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmLike]",t.url="//api.bilibili.com/x/v2/dm/thumbup/stats",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return this.ids=e.ids,[2,this.request({url:this.url,params:e,withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=null==e?void 0:e.data;if(t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r].id_str===this.ids)return{liked:Boolean(t[r].user_like)};return null},t}(pn.a),_o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmLike]",t.url="//api.bilibili.com/x/v2/dm/thumbup/add",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Po=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[IDanmakuState]",t.host="//api.bilibili.com/x/v2/dm/web/",t.basSegment={},t.userChange=!1,t.pageSize=360,t.allSegment={},t.allHistory={},t.dmTrack=t.defaultTrack,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{textSide:"",state:null,text:"",isViewLoaded:!1,checkBox:!1,onlineCount:0,basUrl:null,noStopDm:!0,reportDmid:null}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultTrack",{get:function(){return{all:0,allbas:0,view:0,dm:0,bas:0,appendtime:0,dmnum:0,dmdetail:0,dmdetailfail:0,fail:"",dmSetIO:null}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canLoadAll",{get:function(){return!this.dmListStore.state.allLoaded&&(!!this.mediaStore.state.duration&&(!(!this.state.isViewLoaded||this.state.state)&&!(!this.auxiliaryStore.state.isListSpread||this.auxiliaryStore.state.currentMenu!==un.a.PANEL.DM_LIST)))},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.onlineCount=Object(D.i)((function(){return t.state.onlineCount}),(function(e){})),this.rootPlayer.on(C.b.PLAYER_BEFORE_QUIT,(function(e){var r,n=(r=t.trackStore.quitInfo).dmInfo||(r.dmInfo={});for(var o in t.dmTrack)t.dmTrack[o]&&(n[o]=t.dmTrack[o])}))},t.prototype.onUserLoaded=function(t){var r=this;e.prototype.onUserLoaded.call(this,t),this.configStore.cid&&(this.setState({onlineCount:t.onlineCount,isViewLoaded:!1}),this.fetchDmView(t).then((function(){r.userChange=!0,r.setState({isViewLoaded:!0}),r.sendStore.setState({forceOn:!1})})))},t.prototype.fetchDmid=function(e){return new vo(this.rootPlayer).r({dmid:e,oid:this.configStore.cid})},
t.prototype.fetchDmView=function(e){var t=this,r=this.rootStore.configStore,n=r.cid,o=r.aid;return new So(this.rootPlayer).r(null,{url:this.host+"view?type=1&oid="+n+"&pid="+o,retryCount:0,message:"DmWebViewReply"}).then((function(r){var n;if(!r.details)return t.dmTrack.view++,null;var o=r.details;if(o){var i={text:o.text||"",checkBox:o.checkBox,state:o.state||0};o.textSide&&(i.textSide=o.textSide),t.setState(i),t.dmCmdStore.setState({cmdDm:o.commandDms}),o.checkBox&&t.dmModeStore.setState({checkBoxValue:t.localStore.get().dmSend.upDm}),t.blockStore.reportFilter=o.reportFilter,t.setLocal(o.dmSetting,Boolean(e.mid))}return t.userChange&&!t.state.state||(t.viewLoaded(o,e),t.dmTrack.dmnum+=(null===(n=o.commandDms)||void 0===n?void 0:n.length)||0,t.dmListStore.setState({viewCount:o.count||0})),o}))},t.prototype.fetchDmSeg=function(e){var t=this.rootStore.configStore,r=t.cid,n=t.aid,o=this.host+"seg.so?type=1&oid="+r+"&pid="+n+"&segment_index="+e;return new So(this.rootPlayer).r(null,{url:o,retryCount:3})},t.prototype.fetchDmHistory=function(e){var t=this.rootStore.configStore.cid,r=this.host+"history/seg.so?type=1&oid="+t+"&date="+e;return new So(this.rootPlayer).r(null,{url:r,retryCount:3})},t.prototype.fetchDmBas=function(e){return new So(this.rootPlayer).r(null,{url:e,retryCount:1,withCredentials:!1})},t.prototype.dmReport=function(e){return new Eo(this.rootPlayer).r(Object(L.a)({cid:this.configStore.cid},e))},t.prototype.dmForbid=function(e){return new Oo(this.rootPlayer).r({oid:this.configStore.cid,dmid:e})},t.prototype.dmLikeStats=function(e){return new wo(this.rootPlayer).r({oid:this.configStore.cid,ids:e})},t.prototype.dmLike=function(e,t){return new _o(this.rootPlayer).r({op:t,dmid:e,oid:this.configStore.cid,platform:"web_player"})},t.prototype.dmReportBlock=function(e,t,r){e&&(this.blockStore.addReportFilter(e),this.blockStore.add(r,2),this.setState({reportDmid:t}),this.dmSettingStore.refresh())},t.prototype.viewLoaded=function(e,t){this.pageSize=e.dmSge?e.dmSge.pageSize/1e3:360,this.loadDmPb(1),Array.isArray(e.specialDms)&&this.loadBasPb(e.specialDms)},t.prototype.loadDmPb=function(e){var t=this;if(void 0===e&&(e=1),!this.allSegment[e]){this.dmTrack.all++;var r=performance.now();this.allSegment[e]=this.fetchDmSeg(e).then((function(n){var o,i;if(n.error)return t.dmTrack.fail+=e+",",void t.dmTrack.dm++;if(n.details){t.dmTrack.loadtime+=performance.now()-r;var a=performance.now();t.dmListStore.appendDm(n.details.elems),t.dmTrack.appendtime+=performance.now()-a,t.dmTrack.dmnum+=(null===(o=n.details.elems)||void 0===o?void 0:o.length)||0}return(null===(i=n.details)||void 0===i?void 0:i.elems)||[]}))}return this.allSegment[e]},t.prototype.loadBasPb=function(e){for(var t=this,r="",n=0;n<e.length;n++)e[n]&&(r=e[n].replace("http://","//"),this.basSegment[r]||(this.dmTrack.allbas++,this.basSegment[r]=this.fetchDmBas(r).then((function(e){var n;return e.error?(t.dmTrack.fail+=r+",",void t.dmTrack.bas++):(e.details&&t.dmListStore.appendDm(e.details.elems),(null===(n=e.details)||void 0===n?void 0:n.elems)||[])}))))},t.prototype.loadDmPbAll=function(e){var t=this;void 0===e&&(e=!1),e&&(this.allSegment={});var r=this.mediaStore.state.duration/this.pageSize+1,n=[];return new Promise((function(e,o){for(var i=1;i<r;i++)n.push(t.loadDmPb(i));for(var a in t.basSegment)n.push(t.basSegment[a]);Promise.all(n).then((function(r){var n=[];r.forEach((function(e){var t;9!==(null===(t=e[0])||void 0===t?void 0:t.mode)&&(n=n.concat(e))})),t.allHistory[0]=Promise.resolve(n),e(),t.dmListStore.setState({allLoaded:!0,count:t.dmListStore.allDm.length})})).catch((function(){t.dmListStore.setState({allLoaded:!0,count:t.dmListStore.allDm.length}),o()}))}))},t.prototype.loadHistory=function(e){var t=this;if(!this.allHistory[e]){var r=new So(this.rootPlayer),n=this.rootStore.configStore.cid,o=this.host+"history/seg.so?type=1&oid="+n+"&date="+e;this.allHistory[e]=r.r(null,{url:o,retryCount:1}).then((function(r){var n;return r.error?(t.dmTrack.fail+=e+",",t.allHistory[e]=null,Promise.reject()):null===(n=r.details)||void 0===n?void 0:n.elems}))}
return this.allHistory[e]},t.prototype.setLocal=function(e,t){if(e&&t){var r=Object(L.a)({dmSwitch:!1,aiSwitch:!1,aiLevel:3,preventshade:!1,dmask:!1,typeTop:!1,typeScroll:!1,typeBottom:!1,typeColor:!1,typeSpecial:!1,opacity:0,dmarea:0,speedplus:1,fontsize:1,fullscreensync:!1,speedsync:!1,fontfamily:"",bold:!1,fontborder:0},e);delete r.fontfamily,delete r.bold,r.opacity=Number(r.opacity.toFixed(2));var n=Object(L.a)({},this.localStore.get().dmSetting);for(var o in r)n[o]=r[o];this.dmSettingStore.onlineSetting(n)}},t.prototype.tooltipCenter=function(e,t){this.tooltipStore.create({name:e,title:t,target:this.nodes.container,position:5,duration:1e3})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.userChange=!1,this.pageSize=360,this.allSegment={},this.allHistory={},this.basSegment={},this.dmTrack=this.defaultTrack},Object(L.c)([D.e],t.prototype,"canLoadAll",null),t}(se.a),ko=r(157),xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{basTest:null,showCodePanel:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowVisual",{get:function(){var e=this.auxiliaryStore.state,t=e.currentMenu,r=e.isListSpread;return t===un.a.PANEL.DM_BAS&&r},enumerable:!1,configurable:!0}),t.prototype.test=function(e,t){var r=this;return new Promise((function(n,o){return Object(L.b)(r,void 0,void 0,(function(){var r=this;return Object(L.e)(this,(function(i){switch(i.label){case 0:return e&&e.text?[3,1]:(o({code:-1,message:"请输入弹幕内容"}),[3,4]);case 1:return[4,Object(D.l)((function(){return!!r.assetStore.bas}))];case 2:return i.sent(),[4,this.assetStore.bas];case 3:i.sent().parse({danmaku:e,success:function(e){r.setState({basTest:{dm:e,test:!t}}),n(e)},error:function(e){o({code:-1,message:"弹幕格式错误: "+e})}}),i.label=4;case 4:return[2]}}))}))}))},t.prototype.send=function(e,t){var r=this;return new Promise((function(n,o){return Object(L.b)(r,void 0,void 0,(function(){var r,i=this;return Object(L.e)(this,(function(a){switch(a.label){case 0:return e&&e.text?[3,1]:(o({code:-1,message:"请输入弹幕内容"}),[3,3]);case 1:return r={type:1,oid:this.configStore.cid,msg:e.text,aid:this.configStore.aid,progress:Math.ceil(1e3*e.stime),color:1,fontsize:1,pool:2,mode:9,rnd:this.configStore.pid,plat:1},[4,Object(D.l)((function(){return!!i.assetStore.bas}))];case 2:a.sent(),this.assetStore.bas.parse({danmaku:e,success:function(a){t?i.dmListStore.delete(t).then((function(t){t.body&&0===t.body.code?i.sendStore.send(r).then((function(t){if(0===t.body.code&&t.body.dmid){var a=i.userStore.info;e.dmid=t.body.dmid,e.uhash=null==a?void 0:a.hashId,e.uname=(null==a?void 0:a.name)?a.name.split(" ")[0]:"",e.pool=r.pool,e.mode=r.mode,i.dmListStore.addDm(e),n(e)}else o({code:-2,message:"修改失败：弹幕被删除，请重新发送，"+(t&&t.message?t.message:"")})})).catch((function(e){o({code:-1,message:"发送失败：接口请求失败"})})):o({code:-1,message:"修改失败：无权限或其他未知原因"})})).catch((function(e){o({code:-1,message:"修改失败：接口请求失败"})})):i.sendStore.send(r).then((function(t){if(0===t.body.code&&t.body.dmid){var a=i.userStore.info;e.dmid=t.body.dmid,e.uhash=null==a?void 0:a.hashId,e.uname=(null==a?void 0:a.name)?a.name.split(" ")[0]:"",e.pool=r.pool,e.mode=r.mode,i.dmListStore.addDm(e),n(e)}else o({code:-1,message:"发送失败："+(t.body&&t.body.message?t.body.message:"未知原因")})})).catch((function(e){o({code:-1,message:"发送失败：接口请求失败"})}))}}),a.label=3;case 3:return[2]}}))}))}))},Object(L.c)([D.e],t.prototype,"isShowVisual",null),t}(se.a),jo=r(287);function Ao(e){if(!e)return{};var t=Object(L.g)(e.split("?"),2),r=t[0],n=t[1],o={url:r};n&&n.split("&").forEach((function(e){var t=Object(L.g)(e.split("="),2),r=t[0],n=t[1];try{o[r]=decodeURIComponent(n)}catch(e){}}));return o}var To,Do=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmRecall]",t.url="//api.bilibili.com/x/dm/recall",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,
data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Lo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmProtect]",t.url="//api.bilibili.com/x/dm/protect/apply",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Co=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmMove]",t.url="//api.bilibili.com/x/v2/dm/edit/pool",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Ro=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmState]",t.url="//api.bilibili.com/x/v2/dm/edit/state",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Io=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmMonth]",t.url="//api.bilibili.com/x/v2/dm/history/index",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,params:e,withCredentials:!0}).then((function(e){var t;return{body:null===(t=e.data)||void 0===t?void 0:t.data,response:e}}))]}))}))},t}(pn.a),No=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dmidApplied={},t.allDm=[],t.basList=[],t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{refresh:0,loadding:0,count:0,viewCount:0,addDm:null,addDmList:[],addBas:null,addBasList:[],addAdv:null,addAdvList:[],deletingDm:[],delDmid:[],searchId:"",allLoaded:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realCount",{get:function(){var e=this.state,t=e.viewCount,r=e.count;return e.allLoaded?r:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShow",{get:function(){var e=this.auxiliaryStore.state,t=e.currentMenu,r=e.isListSpread;return t===un.a.PANEL.DM_LIST&&r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canScrollTo",{get:function(){return Boolean(this.state.searchId&&this.state.allLoaded)},enumerable:!1,configurable:!0}),t.prototype.addDm=function(e){var t=Math.floor((e.stime||0)/this.danmakuStore.pageSize)+1;if(this.danmakuStore.allSegment[t]){var r=this.realCount;e.headImg||-2===e.flag||(this.allDm.push(e),++r);var n={};switch(this.state.allLoaded?n.count=r:n.viewCount=r,e.mode){case 7:e.weight=10,n.addAdv=e;break;case 9:e.weight=10,n.addBas=e,this.basList.push(e);break;default:e.weight||(e.weight=-Math.round(10*Math.random())),n.addDm=e}this.danmakuStore.dmTrack.dmnum++,this.setState(n)}},t.prototype.recall=function(e){var t=this;return new Do(this.rootPlayer).r({dmid:e,cid:this.configStore.cid}).then((function(r){if(0===r.body.code){for(var n=t.realCount,o={delDmid:[e]},i=0;i<t.allDm.length;i++)if(t.allDm[i].dmid===e){t.allDm.splice(i,1),n-=1;break}t.state.allLoaded?o.count=n:o.viewCount=n,t.setState(o)}return r}))},t.prototype.protect=function(e){var t,r=this;return new Lo(this.rootPlayer).r({dmids:e,mid:null===(t=this.userStore.info)||void 0===t?void 0:t.mid,cid:this.configStore.cid}).then((function(t){switch(t.body.code){case 0:case 36104:e.split(",").forEach((function(e){r.dmidApplied[e]=!0}))}return r.refresh(),t}))},t.prototype.refresh=function(){this.setState({refresh:this.state.refresh+1})},t.prototype.move=function(e){return new Co(this.rootPlayer).r({dmids:e,type:1,
pool:1,oid:this.configStore.cid})},t.prototype.delete=function(e){var t=this;return new Ro(this.rootPlayer).r({dmids:e,state:1,type:1,oid:this.configStore.cid}).then((function(r){return 0===r.body.code&&t.setState({deletingDm:e.split(",")}),r}))},t.prototype.dmState=function(e){return new Ro(this.rootPlayer).r({dmids:e,state:2,type:1,oid:this.configStore.cid})},t.prototype.laodActiveMonth=function(e){return new Io(this.rootPlayer).r({month:e,type:1,oid:this.configStore.cid})},t.prototype.isMineDanmaku=function(e){var t,r=null===(t=this.userStore.info)||void 0===t?void 0:t.hashId;return!(!e||!r)&&e.uhash===r},t.prototype.canProtect=function(e){var t=this.userStore.info;return!!(this.uiStore.kind===R.c.Pgc&&e&&(null==t?void 0:t.level)>=4)&&e.uhash===t.hashId},t.prototype.appendDm=function(e){var t;if(Array.isArray(e)){for(var r,n,o,i=[],a=[],s=[],u=0;u<e.length;u++){(o=e[u]).attr=4&(o.attr||0)?2:-1,2===o.attr&&de.a.msie.alike&&(o.attr=-1),n=Object(jo.a)(o.action),r=this.parseCmd(o);var c=this.dmActions(n);for(var l in c)r[l]=c[l];if(null===(t=r.text)||void 0===t?void 0:t.replace(/\r/g,"")){switch(r.mode){case 7:var p=Object(L.a)(Object(L.a)({},r),{stime:o.progress||0});a.push(p);break;case 9:i.push(r),this.basList.push(r);break;default:if(this.configStore.fromDid===r.dmid)continue;s.push(r)}this.allDm.push(r)}}s.length&&this.setState({addDmList:s}),i.length&&this.setState({addBasList:i}),a.length&&this.setState({addAdvList:a}),this.state.viewCount||this.setState({count:this.allDm.length})}},t.prototype.parseCmd=function(e){return e.weight||(e.weight=-Math.round(10*Math.random())),{stime:e.progress/1e3||0,mode:+e.mode||1,size:e.fontsize||25,color:e.color||16777215,date:e.ctime||0,pool:e.pool||0,uhash:e.midHash||"",dmid:e.dmid||"",text:e.content,weight:e.weight,attr:e.attr}},t.prototype.parseCombo=function(e,t,r){return{stime:e.progress/1e3||0,dmid:e.dmid||"",text:e.content,duration:(null==t?void 0:t.duration)/1e3||10,count:(null==t?void 0:t.comboCount)||1,step:[Number(null==t?void 0:t.animationCountOne)||50,Number(null==t?void 0:t.animationCountTwo)||500,Number(null==t?void 0:t.animationCountThree)||2e3],img:r}},t.prototype.dmActions=function(e){var t={};if(e.picture){var r=Ao(e.picture);r.url&&(t.picture="//"+r.url),r.scale?t.scale=Math.max(.1,+r.scale):t.scale=1}else if(e.icon)t.head="//"+e.icon;else if(e.headicon||e.tailicon){var n=Ao(e.headicon),o=Ao(e.tailicon);n.url&&(t.head="//"+n.url),o.url&&(t.tail="//"+o.url),t.unlike="true"!==n.like||"true"!==o.like,t.unhigh="true"!==n.highlyPopular||"true"!==o.highlyPopular}return t},t.prototype.reset=function(){this.allDm=[]},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.reset(),this.basList=[]},Object(L.c)([D.e],t.prototype,"realCount",null),Object(L.c)([D.e],t.prototype,"isShow",null),Object(L.c)([D.e],t.prototype,"canScrollTo",null),t}(se.a),Mo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpVote]",t.url="//api.bilibili.com/x/web-interface/view/dm/vote",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Uo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpImg]",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:e,responseType:"arraybuffer"})]}))}))},t}(pn.a),Bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{cmdDm:null,attentions:null,combos:null,commonDm:null,links:null,voteId:null}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cmdVisible",{get:function(){return this.configStore.channelKind===R.a.Creator||this.sendStore.dmVisible},enumerable:!1,configurable:!0}),
Object.defineProperty(t.prototype,"creator",{get:function(){return this.configStore.channelKind===R.a.Creator},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.cmdDm=Object(D.i)((function(){return{list:t.state.cmdDm,isMetadataLoaded:t.videoStore.state.isMetadataLoaded}}),(function(e){var r=e.list,n=e.isMetadataLoaded;t.configStore.channelKind!==R.a.Creator&&((null==r?void 0:r.length)&&n?r.some((function(e){if("#ATTENTION#"===e.command)return!0}))&&!t.upMid?t.httpStore.fetchViewInfo(!0).then((function(e){var n,o=e.body;t.upMid=null===(n=o.owner)||void 0===n?void 0:n.mid,t.appendCmd(r)})):t.appendCmd(r):t.setState({attentions:null}))}))},t.prototype.appendCmd=function(e){var t,r=this,n=[],o=[],i=[],a=[];e.forEach((function(e){var s,u;try{t=JSON.parse(e.extra)}catch(e){}if(t){var c=e.progress/1e3||0;switch(e.command){case"#ATTENTION#":r.upMid&&n.push({type:t.type||0,mid:r.upMid,from:c||0,to:c+(t.duration/1e3||5),posX:t.posX||0,posY:t.posY||0});break;case"#ACTORFOLLOW#":case"#MANAGERFOLLOW#":var l={type:7,face:t.face,mid:t.mid,from:c||0,to:c+(t.duration/1e3||5),posX:t.posX||0,posY:t.posY||0};"#ACTORFOLLOW#"===e.command&&(l.type=6),n.push(l);break;case"#VOTE#":(null===(s=t.options)||void 0===s?void 0:s.length)&&n.push({dmid:e.dmid,voteId:t.vote_id,options:t.options,type:9,question:t.question,myVote:t.my_vote,duration:t.duration||10,mid:t.mid,from:c||0,to:c+(t.duration/1e3||10),posX:t.posX||0,posY:t.posY||0});break;case"#ACTIVITYCOMBO#":if(r.addOnce)break;var p=r.parseComboNew(e,t);p&&o.push(p);break;case"#UP#":if(r.addOnce)break;i.push(r.parseDm(e,{flag:-2}));break;case"#ACTOR#":if(r.addOnce)break;(null===(u=t.user)||void 0===u?void 0:u.face)&&i.push(r.parseDm(e,{flag:t.user.officialType,headImg:t.user.face.replace("http://","//")}));break;case"#LINK#":if(r.addOnce)break;try{var d=e.progress/1e3||0;a.push({stime:d,etime:d+10,arcPic:t.arc_pic+"@180w_100h_1c.jpg",arcDuration:t.arc_duration,dmid:e.dmid||"",aid:t.aid,text:e.content,posX:t.posX||0,posY:t.posY||0})}catch(e){console.warn(e)}}}})),n.length&&this.setState({attentions:n}),o.length&&this.setState({combos:o}),i.length&&this.setState({commonDm:i}),a.length&&this.setState({links:a}),this.addOnce=!0,this.track.o("cmd_load_num",JSON.stringify({follow:n.length,combos:o.length,common:i.length,links:a.length}))},t.prototype.vote=function(e,t,r){return new Mo(this.rootPlayer).r({aid:this.configStore.aid,cid:this.configStore.cid,progress:Math.round(1e3*r),vote_id:e,vote:t})},t.prototype.getImg=function(e){return new Uo(this.rootPlayer).r(e)},t.prototype.editorCenter=function(e){try{var t=JSON.parse(e);if(!t)return;for(var r in t)switch(r){case"dm2":this.setState({links:t[r]});break;case"dm8":this.setState({combos:t[r]});break;case"dm5":this.setState({attentions:t[r]})}}catch(e){console.warn(e)}},t.prototype.parseComboNew=function(e,t){return{id:e.dmid||"",text:e.content||"",stime:e.progress||0,count:t.comboCount||1,step:[Number(t.animationCountOne)||50,Number(t.animationCountTwo)||500,Number(t.animationCountThree)||2e3],duration:1e4,url:t.resource,data:null}},t.prototype.parseDm=function(e,t){return Object(L.a)({stime:e.progress/1e3||0,mode:1,size:25,color:16777215,date:0,class:0,pool:0,uhash:"",uid:"",mid:e.mid,dmid:e.dmid||"",text:e.content,weight:10},t)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.addOnce=!1,this.upMid=null},Object(L.c)([D.e],t.prototype,"cmdVisible",null),Object(L.c)([D.e],t.prototype,"creator",null),t}(se.a),Fo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmSkip]",t.url="//api.bilibili.com/x/player/card/click",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){return{code:e.code,message:e.message}},t}(pn.a),Vo=function(e){function t(){
return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skips",{get:function(){var e,t,r=null===(e=this.userStore.info)||void 0===e?void 0:e.operationCard,n=null===(t=this.kernelStore.body)||void 0===t?void 0:t.isPreview,o=this.interactionStore.renderInteractionTPL;return this.uiStore.state.kind===R.c.Pugv||n||o?null:r},enumerable:!1,configurable:!0}),t.prototype.jumpCard=function(e){return new Fo(this.rootPlayer).r(e)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this)},Object(L.c)([D.e],t.prototype,"skips",null),t}(se.a),Ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmSetting]",t.url="//api.bilibili.com/x/v2/dm/web/config",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0})]}))}))},t}(pn.a),qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onlineSet={},t.blockList=[],t.block2IO={dmSwitch:"dm_switch",aiSwitch:"ai_switch",aiLevel:"ai_level",typeTop:"blocktop",typeScroll:"blockscroll",typeBottom:"blockbottom",typeColor:"blockcolor",typeSpecial:"blockspecial",dmask:"dmask",opacity:"opacity",fontfamily:"fontfamily",bold:"bold",preventshade:"preventshade",fontborder:"fontborder",speedplus:"speedplus",speedsync:"speedsync",fontsize:"fontsize",fullscreensync:"screensync",danmakuArea:"dm_area",type:"draw_type"},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return Object(L.a)(Object(L.a)({},Object(on.a)().dmSetting),{dmFresh:0,dmClear:0,dmSwitchOut:null,currentSet:null})},enumerable:!1,configurable:!0}),t.prototype.onStateCreated=function(){if(e.prototype.onStateCreated.call(this),this.configStore.isChannel(R.a.Homepage))this.setState({typeTop:!1,typeBottom:!1,speedplus:.5});else{var t=this.rootStore.localStore.get();this.setState(Object(L.a)({},t.dmSetting))}},t.prototype.onMounted=function(){var t=this;e.prototype.onMounted.call(this),this.dc.dmLocal=Object(D.c)((function(){var e,r=t.dmSettingStore.state.dmSwitch,n=t.dmSettingStore.state.dmSwitchOut;"boolean"==typeof n&&(r=n),t.setLocal({dmSwitch:r}),null===(e=t.dmSetting({dmSwitch:r}))||void 0===e||e.catch((function(){t.track.e("danmuku_set_error",JSON.stringify({type:0,value:r}))}))}))},t.prototype.onlineSetting=function(e){this.configStore.isChannel(R.a.Homepage)||(this.onlineSet=e,this.setLocal(e))},t.prototype.setLocal=function(e){this.setState(e),this.localStore.set({dmSetting:e}),this.setState({currentSet:e})},t.prototype.dmSetting=function(e){var t=this,r={};if(Object.keys(e).forEach((function(n){void 0!==t.onlineSet[n]&&e[n]!==t.onlineSet[n]&&(t.onlineSet[n]=e[n],r[t.block2IO[n]]=e[n])})),Object.keys(r).length){r.ts=Date.now(),this.setTrack(r);var n=new Ho(this.rootPlayer),o=this.danmakuStore.dmTrack.dmSetIO||{all:0,err:0};return o.all++,this.danmakuStore.dmTrack.dmSetIO=o,n.r(r).catch((function(){return o.err++,t.danmakuStore.dmTrack.dmSetIO=o,Promise.reject()}))}return null},t.prototype.refresh=function(){this.dmSettingStore.setState({dmFresh:this.state.dmFresh+1})},t.prototype.setTrack=function(e){e.ai_level&&this.track.e("danmaku_ai_level",String(e.ai_level)),e.opacity&&this.track.e("danmaku_final_opacity",String(e.opacity)),e.speedplus&&this.track.e("danmaku_final_speed",String(e.speedplus)),e.fontsize&&this.track.e("danmaku_final_size",String(e.fontsize))},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,!0)},t}(se.a),zo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmUnBlock]",t.url="//api.bilibili.com/x/dm/filter/user/add",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0
}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Go=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmBlockBatch]",t.url="//api.bilibili.com/x/dm/filter/user/add2",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=(e.data||[]).map((function(e){return{type:e.type,filter:e.filter,opened:!0,id:e.id}}));return{code:e.code,message:e.message,list:t}},t}(pn.a),Ko=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmUnBlock]",t.url="//api.bilibili.com/x/dm/filter/user/del",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,data:e,method:"post",withCredentials:!0}).then((function(e){return{body:e.data,response:e}}))]}))}))},t}(pn.a),Wo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmBlockList]",t.url="//api.bilibili.com/x/dm/filter/user",t}return Object(L.d)(t,e),t.prototype.r=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,method:"get",withCredentials:!0}).then((function(t){return{body:e.parse(t.data),response:t}}))]}))}))},t.prototype.parse=function(e){var t,r=((null===(t=e.data)||void 0===t?void 0:t.rule)||[]).map((function(e){return{type:e.type,filter:e.filter,opened:!0,id:e.id}}));return{code:e.code,message:e.message,list:r}},t}(pn.a),Qo=r(288),$o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockList=[],t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isSyncBlocked:!1,refresh:1}},enumerable:!1,configurable:!0}),t.prototype.addReportFilter=function(e){this.reportFilter?this.reportFilter.push(e):this.reportFilter=[e]},Object.defineProperty(t.prototype,"isShow",{get:function(){var e=this.auxiliaryStore.state,t=e.currentMenu,r=e.isListSpread;return t===un.a.PANEL.DM_BLOCK&&r},enumerable:!1,configurable:!0}),t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this);var t=this.rootStore.localStore.get();this.blockList=t.blockList},t.prototype.onUserLoaded=function(t){(e.prototype.onUserLoaded.call(this,t),t.mid)&&(this.rootStore.localStore.get().lastUid!==t.mid&&this.blockList.forEach((function(e){e.id=0})))},t.prototype.add=function(e,t,r){var n,o=this,i=null===(n=this.userStore.info)||void 0===n?void 0:n.mid,a=this.isBlocked(e,t);if(!r&&a)return Promise.resolve({code:-1,message:"屏蔽词已存在"});var s={code:-1,message:"屏蔽词已添加"};return i?new zo(this.rootPlayer).r({type:t,filter:e}).then((function(n){var i,u=(null===(i=n.body.data)||void 0===i?void 0:i.id)||0;return r&&a?(a.rule.id=u,o.addLocal()):(o.blockList.push({type:t,filter:e,opened:!0,id:u}),o.addLocal()),s.code=0,s})).catch((function(){return o.blockList.push({type:t,filter:e,opened:!0,id:0}),o.addLocal(),s})):(this.blockList.push({type:t,filter:e,opened:!0,id:0}),this.addLocal(),Promise.resolve(s))},t.prototype.blockUserList=function(e){var t=this;return new Go(this.rootPlayer).r({type:2,filters:e.join(",")}).then((function(e){var r=e.body;t.blockList=t.noRepeat(r.list),t.addLocal()})).catch((function(){var r=e.map((function(e){return{type:2,filter:e,opened:!0,id:0}}));t.blockList=t.noRepeat(r),t.addLocal()}))},t.prototype.addLocal=function(){this.localStore.set({blockList:this.blockList},!0),this.setState({refresh:this.state.refresh+1}),this.dmListStore.refresh(),this.dmSettingStore.refresh(),this.setLastUid()},t.prototype.isBlocked=function(e,t){for(var r,n,o=0;o<this.blockList.length;o++)(r=this.blockList[o]).type===t&&r.filter===e&&(n={i:o,rule:r});return n},t.prototype.remove=function(e,t){var r=this.isBlocked(e,t);if(r){
var n=r.i,o=r.rule;if(this.blockList.splice(n,1),o.id)new Ko(this.rootPlayer).r({ids:String(o.id)});this.addLocal()}},t.prototype.fromOut=function(e){(null==e?void 0:e.length)&&(this.blockList=this.noRepeat(e,!0),this.addLocal())},t.prototype.dmSync=function(){var e=this;return new Wo(this.rootPlayer).r().then((function(t){return 0===t.body.code&&(e.blockList=e.noRepeat(t.body.list),e.setState({isSyncBlocked:!0}),e.addLocal()),t}))},t.prototype.aiJudge=function(e,t){return!!(t.aiSwitch&&Math.abs(e.weight)<t.aiLevel)},t.prototype.reportFilterReg=function(e){var t;return!!(null===(t=this.reportFilter)||void 0===t?void 0:t.length)&&this.reportFilter.some((function(t){if(new RegExp(t).test(e.text))return!0}))},t.prototype.judgeUser=function(e){for(var t,r=0;r<this.blockList.length;r++)if(2===(t=this.blockList[r]).type&&String(e.uhash)===String(t.filter))return un.a.BLOCK_LIST_USER;return un.a.BLOCK_DISABLED},t.prototype.judge=function(e,t){var r;if(e.border)return 0;var n,o,i=this.dmSettingStore.state;if(!t){if(this.aiJudge(e,i))return 1;if(this.reportFilterReg(e))return 1}try{n=7===e.mode&&"["===e.text[0]?JSON.parse(e.text)[4]:e.text}catch(t){n=e.text}if(e.mode<=7&&i.status&&(null===(r=this.blockList)||void 0===r?void 0:r.length))for(var a=0;a<this.blockList.length;a++)if((o=this.blockList[a]).opened){if(2===o.type&&String(e.uhash)===String(o.filter))return un.a.BLOCK_LIST_USER;if(!(e.mode>7)){if(0===o.type)try{if(new RegExp(o.filter.replace(/(\^|\$|\\|\.|\*|\+|\?|\(|\)|\[|\]|\{|\}|\||\/)/g,"\\$1"),"i").test(n))return un.a.BLOCK_LIST_KEYWORD}catch(e){this.log.w(e)}if(1===o.type)try{if(this.filterRegexp(o.filter).test(n))return un.a.BLOCK_LIST_REGEXP}catch(e){this.log.w(e)}}}return i.typeScroll||1!==e.mode&&6!==e.mode?i.typeBottom||4!==e.mode?i.typeTop||5!==e.mode?!i.typeColor&&e.mode<=7&&"#FFFFFF"!==Object(Qo.a)(e.color).toUpperCase()?un.a.BLOCK_COLOR:i.typeSpecial||2!==e.pool&&7!==e.mode?un.a.BLOCK_DISABLED:un.a.BLOCK_SPECIAL:un.a.BLOCK_TOP:un.a.BLOCK_BOTTOM:un.a.BLOCK_SCROLL},t.prototype.filterRegexp=function(e){var t=/^\/(.+)\/([img]{0,3})$/.exec(e);try{return new RegExp(t[1],t[2])}catch(t){return new RegExp(e)}},t.prototype.noRepeat=function(e,t){var r={},n=this.blockList||[];n.length&&n.forEach((function(e){var t=e.type,n=e.filter,o=0===t?t+n.toLowerCase():t+n;r[o]=e})),Array.isArray(e)&&e.length&&e.forEach((function(e){if(e){t&&(e.id=0);var n,o=e.type,i=e.filter;if(i)if(n=0===o?o+i.toLowerCase():o+i,r[n]){if(t)return;r[n].id=e.id}else r[n]=e}}));var o=[];for(var i in r)o.push(r[i]);return o},t.prototype.setLastUid=function(){var e,t=null===(e=this.userStore.info)||void 0===e?void 0:e.mid;t&&this.localStore.set({lastUid:t})},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,!0),this.reportFilter=null},Object(L.c)([D.e],t.prototype,"isShow",null),t}(se.a),Yo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpDmMask]",t}return Object(L.d)(t,e),t.prototype.r=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(e){return[2,this.request({url:t.url,responseType:"arraybuffer",headers:{range:t.range}})]}))}))},t}(pn.a),Jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{maskUrl:"",fps:24,maxfps:24,disable:!1}},enumerable:!1,configurable:!0}),t.prototype.onUserLoaded=function(t){if(e.prototype.onUserLoaded.call(this,t),t.dmMask&&de.a.chrome.alike&&!de.a.edge.alike){var r=t.dmMask,n=r.maskUrl,o=r.fps;n?this.setState({maxfps:o,maskUrl:n}):this.setState({maskUrl:""})}},t.prototype.getBufferRange=function(e,t){if(!this.state.maskUrl)return Promise.reject(new Error("no url"));var r=-1===t?"bytes="+e+"-":"bytes="+e+"-"+t;return new Yo(this.rootPlayer).r(null,{url:this.state.maskUrl,range:r})},t}(se.a),Xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{fontsize:25,pool:0,mode:1,color:16777215,
checkBoxValue:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"upDm",{get:function(){return this.danmakuStore.state.checkBox?this.state.checkBoxValue?1:0:2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"upCheckbox",{get:function(){return this.danmakuStore.state.checkBox&&this.state.checkBoxValue},enumerable:!1,configurable:!0}),t}(se.a),Zo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.paused=!0,t.dropFrames=0,t.startTimer=0,t.dropTimer=0,t.dropCB={},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{delay:2e3,frame:15,duration:800}},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.dropFrames=Object(D.c)((function(){t.paused=t.mediaStore.state.paused,t.start()}))},t.prototype.start=function(){var e=this;this.stop(),this.paused||(this.startTimer=window.setTimeout((function(){e.dropFrames=e.droppedFrameCount(),clearTimeout(e.dropTimer),e.autoVisible()}),this.state.delay))},t.prototype.stop=function(){clearTimeout(this.startTimer),clearTimeout(this.dropTimer)},t.prototype.removeEventListener=function(e){delete this.dropCB[e],Object.keys(this.dropCB)||this.stop()},t.prototype.addEventListener=function(e,t){this.dropCB[e]=this.dropCB[e]||t,this.start()},t.prototype.autoVisible=function(){var e=this;this.dropTimer=self.setTimeout((function(){var t=e.droppedFrameCount();t-e.dropFrames>e.state.frame?Object.keys(e.dropCB).forEach((function(r){e.dropCB[r](t-e.dropFrames)})):(e.dropFrames=t,e.autoVisible())}),this.state.duration)},t.prototype.droppedFrameCount=function(){return this.videoStore.video.webkitDroppedFrameCount||0},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.stop()},t}(se.a),ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.records=new D.a,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"maxActions",{get:function(){return 5},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFixedActions",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.cannotSetRecord=function(e,t,r){return!(!r||!e.length)&&Math.min.apply(Math,Object(L.h)(e.map((function(e){return e.priority}))))>t.priority},t.prototype.abortOldestRecord=function(e,t){if(e.length>=t){var r=new Map,n=[];e.sort((function(e,t){return e.priority-t.priority})).forEach((function(e){r.has(e.priority)?r.get(e.priority).push(e):r.set(e.priority,[e])})),r.forEach((function(e,t){var r=e.sort((function(e,t){return e.timeStamp-t.timeStamp}));n.push.apply(n,Object(L.h)(r))}));for(var o=e.length-t+1,i=Math.min(o,n.length),a=0;a<i;a++){var s=n[a];s&&this.remove(s.iid,"abort")}}},t.prototype.trySetTimerClock=function(e){var t=this;e.duration&&!e.timerClock&&(e.timerClock=new ue.a((function(r,n){n>=r&&t.remove(e.iid,"delay")}),e.duration,250))},t.prototype.create=function(e,t){var r=M();if(e.iid=r,e.timeStamp=Date.now(),null==e.priority&&(e.fixed?e.priority=100:e.confirmText?e.priority=10:e.priority=0),e.fixed){var n=[];if(this.records.forEach((function(e){return e.fixed&&n.push(e)})),n.length>=this.maxFixedActions){if(this.cannotSetRecord(n,e,t))return null;this.abortOldestRecord(n,this.maxFixedActions)}}if(this.records.size>=this.maxActions){var o=Object(L.h)(this.records.values());if(this.cannotSetRecord(o,e,t))return null;this.abortOldestRecord(o,this.maxActions)}return e=Object.assign({text:"Hello",duration:3e3},e),this.trySetTimerClock(e),this.records.set(e.iid,e),r},t.prototype.update=function(e,t){var r=this.records.get(e);return!!r&&(r.timeStamp=Date.now(),!!t&&(r.text&&t.text&&(r.text=t.text),r.confirmText&&t.confirmText&&(r.confirmText=t.confirmText),this.records.set(e,r),!0))},t.prototype.remove=function(e,t){void 0===t&&(t="api");var r=this.records.get(e);return!!r&&(r.timerClock&&(r.timerClock.abort(),r.timerClock=null),this.records.delete(e),"function"==typeof r.onRemoved&&r.onRemoved({reason:t}),!0)},t.prototype.resumeClock=function(e){var t=this.records.get(e)
;return!(!t||!t.timerClock)&&(t.timerClock.resume(),!0)},t.prototype.suspendClock=function(e){var t=this.records.get(e);return!(!t||!t.timerClock)&&(t.timerClock.suspend(),!0)},t.prototype.getActions=function(){return{maxActions:this.maxActions,maxFixedActions:this.maxFixedActions}},t.prototype.onDispose=function(){var t=this;e.prototype.onDispose.call(this),Object(L.h)(this.records.values()).filter((function(e){return!e.persistent})).forEach((function(e){t.remove(e.iid,"lifecycle")}))},t.prototype.onDisconnect=function(){var t=this;e.prototype.onDisconnect.call(this),this.records.forEach((function(e){t.remove(e.iid,"lifecycle")}))},Object(L.c)([D.g],t.prototype,"records",void 0),Object(L.c)([D.b],t.prototype,"create",null),Object(L.c)([D.b],t.prototype,"update",null),Object(L.c)([D.b],t.prototype,"remove",null),t}(se.a),ti=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.records=new D.a,t}return Object(L.d)(t,e),t.prototype.tryStartTimerClock=function(e){var t=this;e.duration&&!e.timerClock&&(e.timerClock=new ue.a((function(r,n){n>=r&&t.remove(e.name)}),e.duration,250))},t.prototype.create=function(e){this.defRenderTarget=this.defRenderTarget||this.nodes.tooltipArea||this.nodes.container;var t=Object.assign({title:"Hello",delay:300,duration:3e3,position:2,gap:6,offsetX:0,offsetY:0,renderGap:8,renderTarget:this.defRenderTarget,timeStamp:Date.now()},e);if(t.target||(null==t.clientX&&(t.clientX=this.uiStore.state.mouseClientX),null==t.clientY&&(t.clientY=this.uiStore.state.mouseClientY)),t.tip&&(t.duration=0,null==t.target))throw new Error("`target` is required when `tip` is truly");this.tryStartTimerClock(t),this.records.set(t.name,t)},t.prototype.update=function(e,t){var r=this.records.get(e);return!!r&&(r.timeStamp=Date.now(),!!t&&(r.title&&t.title&&(r.title=t.title),this.records.set(e,r),!0))},t.prototype.remove=function(e){var t=this.records.get(e);return!!t&&(t.timerClock&&(t.timerClock.abort(),t.timerClock=null),this.records.delete(e),!0)},t.prototype.onDisconnect=function(){var t=this;e.prototype.onDisconnect.call(this),this.records.forEach((function(e){t.remove(e.name)}))},Object(L.c)([D.g],t.prototype,"records",void 0),Object(L.c)([D.b],t.prototype,"create",null),Object(L.c)([D.b],t.prototype,"update",null),Object(L.c)([D.b],t.prototype,"remove",null),t}(se.a),ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpUser]",t.retried=0,t.url="//api.bilibili.com/x/player/v2",t}return Object(L.d)(t,e),t.prototype.r=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){var r=this;return Object(L.e)(this,(function(n){return this.retried=0,this.params=e,this.config=Object.assign({retryCount:3,retryInterval:500},t),[2,this.getRemoteResponse().then((function(e){return{body:r.parse(e.data),response:e}}))]}))}))},t.prototype.getRemoteResponse=function(){var e=this;return this.request({url:this.url,params:this.params,withCredentials:!0}).catch((function(t){return!e.isCanceled(t)&&e.config.retryCount>e.retried?new Promise((function(t,r){e.timer=window.setTimeout((function(){e.retried++,e.getRemoteResponse().then(t,r),e.log.i(e.tag,"Retry: "+e.retried+"/"+e.config.retryCount)}),e.config.retryInterval)})):Promise.reject(t)}))},t.prototype.parse=function(e){var t,r,n,o,i,a,s={err:null},u=e.data||{},c=u.dm_mask||{},l={pn:+u.page_no,mid:+u.login_mid,aid:+u.aid,cid:+u.cid,bvid:u.bvid,name:u.name,hashId:u.login_mid_hash,isOwner:!!u.is_owner,isUgcPayPreview:!!u.is_ugc_pay_preview,allowBp:!!u.allow_bp,blockTime:+u.block_time,role:+u.role,hasNext:!!u.has_next,permission:u.permission,lastCid:+u.last_play_cid,lastPlayTime:+u.last_play_time,onlineCount:+u.online_count,previewToast:u.preview_toast,answerStatus:+u.answer_status,viewPoints:u.view_points,pugvWatchStatus:null!==(r=null===(t=u.pugv)||void 0===t?void 0:t.watch_status)&&void 0!==r?r:0,pugvPayStatus:null!==(o=null===(n=u.pugv)||void 0===n?void 0:n.pay_status)&&void 0!==o?o:0,pugvSeasonStatus:null!==(a=null===(i=u.pugv)||void 0===i?void 0:i.season_status)&&void 0!==a?a:0,dmMask:{fps:c.fps,
maskUrl:c.mask_url},vip:u.vip||{},levelInfo:u.level_info||{},pCdnLoader:u.pcdn_loader||{},interaction:u.interaction,fawkes:u.fawkes},p=u.operation_card;(null==p?void 0:p.length)&&(l.operationCard=this.parseCard(p));var d={isSystemAdmin:!1,vipType:+l.vip.type,vipStatus:+l.vip.status};return Object.assign(s,l,d),s},t.prototype.parseCard=function(e){return e.map((function(e){var t,r,n={id:e.id,from:e.from,to:e.to,status:e.status,cardType:e.card_type,bizType:e.biz_type};return 1===e.card_type?(n.title=e.standard_card.title,n.buttonTitle=e.standard_card.button_title,n.buttonSelectedTitle=e.standard_card.button_selected_title,n.showSelected=e.standard_card.show_selected,n.seasonId=null===(t=e.param_follow)||void 0===t?void 0:t.season_id,n.activityId=null===(r=e.param_reserve)||void 0===r?void 0:r.activity_id):(n.icon=e.skip_card.icon.replace("http://","//")||"",n.label=e.skip_card.label,n.content=e.skip_card.content,n.button=e.skip_card.button,n.link=e.skip_card.link),n}))},t.prototype.dispose=function(){e.prototype.dispose.call(this),clearTimeout(this.timer)},t}(pn.a),ni=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpView]",t}return Object(L.d)(t,e),t.prototype.r=function(e,t){return Object(L.b)(this,void 0,void 0,(function(){var r=this;return Object(L.e)(this,(function(n){return this.params=e,this.config=t,this.httpKind=t.httpKind,[2,this.request({url:this.getViewUrl(),params:this.getRequestParams(),withCredentials:!0}).then((function(e){return{body:r.parse(e.data),response:e}}))]}))}))},t.prototype.getViewUrl=function(){var e;return((e={})[0]="//api.bilibili.com/x/web-interface/view",e[1]="//api.bilibili.com/pgc/view/web/season",e[2]="//api.bilibili.com/pugv/view/web/season",e)[this.httpKind]},t.prototype.getRequestParams=function(){switch(this.httpKind){case 1:case 2:return{ep_id:this.params.episodeId};case 0:default:return this.params.aid?{aid:this.params.aid}:{bvid:this.params.bvid}}},t.prototype.parse=function(e){switch(this.httpKind){case 1:return this.parsePgc(e);case 2:return this.parsePugv(e);case 0:default:return this.parseUgc(e)}},t.prototype.parsePgc=function(e){var t=e.result,r={};if(t){var n=t.section,o=t.episodes,i=+t.season_id,a=function(e,t){var n=+e.aid,o=+e.cid,i=e.bvid,a=t+1;n&&(r.aid=n),o&&(r.cid=o),i&&(r.bvid=i),a&&(r.p=a)};if(i&&(r.seasonId=i),Array.isArray(o)&&o.length)for(var s=0;s<o.length;s++){if(+(l=o[s]).id==+this.params.episodeId)return a(l,s),r}if(Array.isArray(n)&&n.length)for(s=0;s<n.length;s++){var u=n[s].episodes;if(Array.isArray(u)&&u.length)for(var c=0;c<u.length;c++){var l;if(+(l=u[c]).id==+this.params.episodeId)return a(l,c),r}}}return r},t.prototype.parsePugv=function(e){var t,r,n,o=e.data,i={};if(o){var a=o.episodes,s=+o.season_id,u=o.up_info;if(s&&(i.seasonId=s),u&&(i.owner={mid:u.mid,name:u.uname,face:null===(n=u.avatar)||void 0===n?void 0:n.replace("http://","//")}),Array.isArray(a)&&a.length)try{for(var c=Object(L.i)(a),l=c.next();!l.done;l=c.next()){var p=l.value;if(+p.id==+this.params.episodeId){var d=+p.aid,f=+p.cid,h=p.bvid,y=+p.index;return d&&(i.aid=d),f&&(i.cid=f),h&&(i.bvid=h),y&&(i.p=y),i}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}}return i},t.prototype.parseUgc=function(e){var t,r=e.data,n={};if(r){var o=+r.aid,i=r.bvid,a=r.pages,s=r.title,u=r.pic,c=r.desc;if(o&&(n.aid=o),i&&(n.bvid=i),s&&(n.title=s),u&&(n.pic=u),c&&(n.desc=c),r.owner&&(n.owner={mid:r.owner.mid,name:r.owner.name,face:null===(t=r.owner.face)||void 0===t?void 0:t.replace("http://","//")}),Array.isArray(a)&&a.length){var l=a[Object(vn.a)(this.params.p-1,0,a.length-1)||0];if(l){var p=+l.page,d=+l.cid;p&&(n.p=p),d&&(n.cid=d)}}}return n},t}(pn.a),oi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpVideoShot]",t.url="//api.bilibili.com/x/player/videoshot",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){var t=this;return Object(L.e)(this,(function(r){return[2,this.request({url:this.url,params:e}).then((function(e){return{
body:t.parse(e.data),response:e}}))]}))}))},t.prototype.parse=function(e){var t=e.data;return t?{pvData:t.pvdata,xLen:+t.img_x_len,yLen:+t.img_y_len,xSize:+t.img_x_size,ySize:+t.img_y_size,images:t.image}:null},t}(pn.a),ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpStore]",t}return Object(L.d)(t,e),t.prototype.getViewKind=function(){var e={isMissing:!1,isFatalError:!1,httpKind:0};switch(this.uiStore.kind){case R.c.Pgc:this.configStore.episodeId?this.configStore.cid||(e.isMissing=!0):e.isFatalError=!0,e.httpKind=1;break;case R.c.Pugv:this.configStore.episodeId?this.configStore.aid&&this.configStore.cid||(e.isMissing=!0):e.isFatalError=!0,e.httpKind=2;break;case R.c.Ugc:default:this.configStore.aid||this.configStore.bvid?this.configStore.aid&&this.configStore.cid||(e.isMissing=!0):e.isFatalError=!0,e.httpKind=0}return e},t.prototype.getPlayUrlParams=function(e){var t=this.configStore.httpQuery,r={avid:this.configStore.aid,bvid:this.configStore.bvid,cid:this.configStore.cid,qn:this.qualityStore.requestQ,fnver:0,fnval:1,fourk:1};return this.configStore.mseSupported&&(this.configStore.isChannel(R.a.Manager)?r.fnval=16:r.fnval=80),this.configStore.episodeId&&(r.ep_id=this.configStore.episodeId),this.configStore.session&&(r.session=this.configStore.session),this.configStore.ndb.kernel&&(r.fnval=this.configStore.ndb.kernel),Object.assign({},t.playUrl,r,e)},t.prototype.getPlayUrlConfig=function(e){var t={playUrlKind:0,mseSupported:this.configStore.mseSupported,noAudioStream:this.rootPlayer.hasFeature("noAudioStream")};switch(this.configStore.channelKind){case R.a.Manager:t.playUrlKind=4;break;case R.a.Oneself:t.playUrlKind=3;break;case R.a.Default:default:switch(this.uiStore.kind){case R.c.Pgc:t.playUrlKind=1;break;case R.c.Pugv:t.playUrlKind=2;break;case R.c.Ugc:default:t.playUrlKind=0}}return Object.assign(t,e)},t.prototype.fetchPlayUrl=function(e,t,r){return Object(L.b)(this,void 0,void 0,(function(){var n,o,i,a,s;return Object(L.e)(this,(function(u){switch(u.label){case 0:n=new Vn(this.rootPlayer,{memCache:e}),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.r(this.getPlayUrlParams(t),this.getPlayUrlConfig(r))];case 2:return[2,u.sent()];case 3:return o=u.sent(),i=r&&r.initiator,a=Promise.reject(o),this.apiStore.state.isRenewal||0!==i||this.uiStore.kind!==R.c.Ugc?[2,a]:o&&o.raw&&null!=!o.raw.code&&0!==o.raw.code?(s={code:5,message:o.message,playUrl:o.playUrl,raw:o.raw},[2,Promise.reject(s)]):[2,a];case 4:return[2]}}))}))},t.prototype.fetchUserInfo=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,new ri(this.rootPlayer,{memCache:e}).r({aid:this.configStore.aid,cid:this.configStore.cid,ep_id:this.configStore.episodeId,season_id:this.configStore.seasonId})]}))}))},t.prototype.fetchViewInfo=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,new ni(this.rootPlayer,{memCache:e}).r({p:this.configStore.p,aid:this.configStore.aid,cid:this.configStore.cid,bvid:this.configStore.bvid,seasonId:this.configStore.seasonId,episodeId:this.configStore.episodeId},{httpKind:this.getViewKind().httpKind})]}))}))},t.prototype.fetchVideoShot=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,new oi(this.rootPlayer,{memCache:e}).r({aid:this.configStore.aid,cid:this.configStore.cid})]}))}))},t}(se.a),ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpNow]",t.url="//api.bilibili.com/x/click-interface/click/now",t}return Object(L.d)(t,e),t.prototype.r=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,withCredentials:!0}).then((function(t){var r=t.data,n=Math.floor(Date.now()/1e3),o=r&&r.data&&r.data.now||n;return e.isInvalid(r)?{now:n}:{now:o}}))]}))}))},t}(pn.a),si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpStatsClick]",
t.url="//api.bilibili.com/x/click-interface/click/web/h5",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,method:"POST",data:e,withCredentials:!0})]}))}))},t}(pn.a),ui=r(289),ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpHeartbeat]",t.url="//api.bilibili.com/x/click-interface/web/heartbeat",t}return Object(L.d)(t,e),t.prototype.r=function(e){return Object(L.b)(this,void 0,void 0,(function(){return Object(L.e)(this,(function(t){return[2,this.request({url:this.url,method:"POST",data:e,withCredentials:!0})]}))}))},t}(pn.a),li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hb={timer:null,startTime:null,disabled:!1,nextRestart:!1,prevPlayType:null},t.pcr={pageUnload:!1,earlyEOFSymbol:!1,receivedBytes:0,receivedAudioIndex:new Set,receivedVideoIndex:new Set,repeatedAudioIndex:new Set,repeatedVideoIndex:new Set,quitInfo:{}},t.seek={start:null,total:0},t.atomicRecord={start:null,total:0},t.eCodeSymbols={},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isEnabled:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackVersion",{get:function(){return this.apiStore.metadata.version+"-"+this.apiStore.metadata.revision},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageUnload",{get:function(){return this.pcr.pageUnload},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"earlyEOFSymbol",{get:function(){return this.pcr.earlyEOFSymbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"receivedBytes",{get:function(){return this.pcr.receivedBytes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"receivedAudioIndex",{get:function(){return this.pcr.receivedAudioIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"receivedVideoIndex",{get:function(){return this.pcr.receivedVideoIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatedAudioIndex",{get:function(){return this.pcr.repeatedAudioIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatedVideoIndex",{get:function(){return this.pcr.repeatedVideoIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quitInfo",{get:function(){return this.pcr.quitInfo},enumerable:!1,configurable:!0}),t.prototype.addReceivedBytes=function(e){this.pcr.receivedBytes+=e},t.prototype.setEarlyEOFSymbol=function(e){this.pcr.earlyEOFSymbol=e},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.addEvents()},t.prototype.cleanAfterDispose=function(){this.pcr.pageUnload=!1,this.pcr.earlyEOFSymbol=!1,this.pcr.receivedBytes=0,this.pcr.receivedAudioIndex=new Set,this.pcr.receivedVideoIndex=new Set,this.pcr.repeatedAudioIndex=new Set,this.pcr.repeatedVideoIndex=new Set,this.pcr.quitInfo={}},t.prototype.addEvents=function(){var e=this;this.rootPlayer.on(C.a.Player_Initialized,(function(){e.dp.startReport&&e.dp.startReport(),e.dp.startReport=Object(D.l)((function(){return!!e.userStore.info}),(function(){return queueMicrotask((function(){e.startVideoView(),e.setState({isEnabled:!0})}))}))}),1),this.rootPlayer.on(C.b.MEDIA_SEEKING,(function(){null==e.seek.start&&(e.seek.start=e.apiStore.getCurrentTime())})).on(C.b.MEDIA_SEEKED,(function(){null!=e.seek.start&&(e.seek.total+=e.apiStore.getCurrentTime()-e.seek.start,e.seek.start=null)})),this.rootPlayer.on(C.b.MEDIA_PAUSE,(function(){e.atomicRecordHandler()})).on(C.b.MEDIA_ENDED,(function(){e.atomicRecordHandler()})).on(C.b.MEDIA_TIMEUPDATE,(function(){e.videoStore.video.paused||e.videoStore.video.seeking||(e.atomicRecordHandler(),e.atomicRecord.start=Date.now())})).on(C.b.MEDIA_WAITING,(function(){e.atomicRecordHandler()})),this.rootPlayer.on(C.b.MEDIA_PLAYING,(function(){e.videoStore.state.firstPlay&&(e.hb.nextRestart||e.heartbeat(3),e.hb.disabled=!1)})).on(C.b.MEDIA_PAUSE,(function(){
e.videoStore.state.firstPlay&&(e.isPlaybackCompleted()||e.heartbeat(2),e.hb.disabled=!0)})).on(C.b.MEDIA_SEEKED,(function(){e.hb.nextRestart&&(e.heartbeat(1),e.hb.nextRestart=!1)})),this.rootPlayer.parent.addEventListener("beforeunload",this.onBeforeUnload),this.rootPlayer.window.addEventListener("beforeunload",this.onBeforeUnload),this.rootPlayer.on(C.a.Player_Initialized,(function(){e.track.o(X.b.Enter,{initial:+e.episodeStore.isFirst,referrer:document.referrer})})).on(C.b.MEDIA_ENDED,(function(){e.track.o(X.b.Ended)})).on(C.b.ERROR_CODE_SIGNAL,(function(t,r,n){var o="type:"+t+",code:"+r+","+n;t&&(e.eCodeSymbols[o]||(e.eCodeSymbols[o]=!0,e.track.o(X.b.Playback_Error_Info,{kind:t,code:r,msg:n})))})),this.rootPlayer.on(C.a.Player_Dispose,(function(){e.cleanAfterDispose()}),1)},t.prototype.onBeforeUnload=function(){this.pcr.pageUnload=!0,this.heartbeatEndedHandler(),this.rootStore.isDisposing||this.rootPlayer.emit(C.b.PLAYER_BEFORE_QUIT),this.rootPlayer.emit(C.b.PLAYER_QUIT_SIGNAL)},t.prototype.heartbeatEndedHandler=function(){this.isPlaybackCompleted()||this.heartbeat(4)},t.prototype.atomicRecordHandler=function(){null!=this.atomicRecord.start&&(this.atomicRecord.total+=(Date.now()-this.atomicRecord.start)/1e3,this.atomicRecord.start=null)},t.prototype.startVideoView=function(){var e=this,t=function(t){e.configStore.isChannel(R.a.Manager)||e.rootPlayer.hasFeature("noVVReport")||e.sendPoint(t),e.rootPlayer.hasFeature("noVTReport")||e.sendRealtime(t)};new ai(this.rootPlayer).r().then((function(e){return t(e.now)})).catch((function(e){return t(Math.floor(Date.now()/1e3))}))},t.prototype.getClickParams=function(e){var t,r=this.configStore,n=this.userStore.info,o=null!==(t=n.level)&&void 0!==t?t:0,i=Math.floor(this.videoStore.state.firstPlay/1e3),a={mid:n.mid,aid:r.aid,cid:r.cid,part:r.p,lv:o,ftime:i,stime:e,type:this.getReportType(),sub_type:this.configStore.seasonType,refer_url:r.referrer,bsource:r.bSource};return a.mid||delete a.mid,a.aid||delete a.aid,r.seasonId&&(a.sid=r.seasonId),r.episodeId&&(a.epid=r.episodeId),null!=r.spmId&&(a.spmid=r.spmId),null!=r.spmIdFrom&&(a.from_spmid=r.spmIdFrom),a},t.prototype.getLogParams=function(e){var t=1e3*e,r=encodeURIComponent(this.rootPlayer.parent.location.href),n=this.configStore,o=this.clientStore.state.loop?1:0,i=this.qualityStore.quality,a=[];return a.push("000024"+t+r,this.getFid(),this.trackVersion,n.aid,n.cid,n.p,i,o),a.join("|")},t.prototype.sendPoint=function(e){new si(this.rootPlayer,{persistent:!0,noStore:!0}).r(this.getClickParams(e)).catch(te.a),new ui.a(this.rootPlayer,{persistent:!0,noStore:!0}).r(this.getLogParams(e)).catch(te.a)},t.prototype.shouldDisableHeartbeat=function(e){return 3===e?2!==this.hb.prevPlayType:(1===this.hb.prevPlayType||3===this.hb.prevPlayType)&&1===e},t.prototype.getPlayedTime=function(){return this.isPlaybackCompleted()?-1:Math.floor(this.apiStore.getCurrentTime())},t.prototype.getAbsolutePlayTime=function(){return Math.floor(this.atomicRecord.total)},t.prototype.getRelativePlayTime=function(){return Math.max(0,Math.floor(this.apiStore.getCurrentTime()-this.seek.total))},t.prototype.isPlaybackCompleted=function(){return!this.kernelStore.state.suspectDuration&&(!!this.videoStore.video.ended||!!this.videoStore.video.duration&&this.apiStore.getCurrentTime().toFixed(1)===this.apiStore.getDuration().toFixed(1))},t.prototype.heartbeat=function(e){if(this.hb.startTime&&!this.seek.start&&!this.shouldDisableHeartbeat(e)){var t=this.getPlayedTime(),r=this.getRelativePlayTime();if(0!==r||0!==t||4!==e){var n=this.configStore,o=this.userStore.info,i={start_ts:this.hb.startTime,mid:o.mid,aid:n.aid,cid:n.cid,type:this.getReportType(),sub_type:n.seasonType,dt:2,play_type:e,realtime:r,played_time:t,real_played_time:this.getAbsolutePlayTime(),refer_url:n.referrer,bsource:n.bSource};i.mid||delete i.mid,i.aid||delete i.aid,n.seasonId&&(i.sid=n.seasonId),n.episodeId&&(i.epid=n.episodeId),null!=n.spmId&&(i.spmid=n.spmId),null!=n.spmIdFrom&&(i.from_spmid=n.spmIdFrom),(n.isChannel(R.a.Homepage)||n.isChannel(R.a.Homepage_Topic))&&(i.no_history=1),
4===e&&(this.hb.nextRestart=!0),new ci(this.rootPlayer,{persistent:!0,noStore:!0}).r(i).catch(te.a),this.hb.prevPlayType=e}}},t.prototype.resetHeartbeat=function(){this.hb.timer&&(clearInterval(this.hb.timer),this.hb.timer=null),this.hb.startTime=null,this.hb.prevPlayType=null,this.hb.disabled=!1,this.hb.nextRestart=!1},t.prototype.sendRealtime=function(e){var t=this;this.hb.startTime=e,this.heartbeat(1),this.hb.timer=self.setInterval((function(){t.hb.disabled||t.videoStore.video.paused||t.heartbeat(0)}),15e3)},t.prototype.getReportType=function(){switch(this.uiStore.state.kind){case R.c.Pugv:return 10;case R.c.Pgc:return 4;case R.c.Ugc:default:return 3}},t.prototype.getSourceType=function(){var e=this.kernelStore.body;if(e&&e.abTestId)return+e.abTestId+10;if(!this.kernelStore.baseAgent)return 0;if(this.kernelStore.baseAgent.kind===Un.a.Flv){var t=this.kernelStore.baseAgent.kernelPlayer;return t?"FlvPlayer"===t.type?1:2:0}if(this.kernelStore.baseAgent.kind===Un.a.Dash){var r=this.kernelStore.baseAgent.kernelPlayer;return r?"function"==typeof r.getCurrentCodecID&&12===r.getCurrentCodecID("video")?4:3:0}return 0},t.prototype.getFid=function(e){var t=R.a[this.configStore.channelKind],r=e&&1===e.origin?1:0;return t+":"+this.getGroupFid()+":"+r},t.prototype.getGroupFid=function(){switch(this.uiStore.kind){case R.c.Pugv:return"Pugv";case R.c.Pgc:return"Pgc";case R.c.Ugc:return"Ugc";default:return"Unknown"}},t.prototype.getTrackFid=function(e){var t=this.getFid(e),r=this.getSourceType(),n=self.__FLV_P2P_TYPE__,o=self.__DASH_P2P_TYPE__;return 1===r&&n?t+","+n:2!==r&&o?t+","+o:t},t.prototype.onDispose=function(){e.prototype.onDispose.call(this),this.heartbeatEndedHandler(),this.resetHeartbeat(),this.seek={start:null,total:0},this.eCodeSymbols={},this.atomicRecord={start:null,total:0},this.rootPlayer.emit(C.b.PLAYER_QUIT_SIGNAL)},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.rootPlayer.parent.removeEventListener("beforeunload",this.onBeforeUnload),this.rootPlayer.window.removeEventListener("beforeunload",this.onBeforeUnload)},Object(L.c)([ee.a],t.prototype,"onBeforeUnload",null),t}(se.a),pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[IAuxiliaryState]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{isListSpread:!1,disableListSwitch:!1,currentMenu:un.a.PANEL.DM_LIST,showBlock:0,playerH:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.auxiliaryStore.state.height+"px"},enumerable:!1,configurable:!0}),t.prototype.onStateCreated=function(){e.prototype.onStateCreated.call(this)},t.prototype.onUserLoaded=function(t){e.prototype.onUserLoaded.call(this,t)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,!0)},Object(L.c)([D.e],t.prototype,"height",null),t}(se.a),di=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[ControlStore]",t.delayShowTimer=null,t.virtualHoverTimer=null,t.clientRect=null,t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{containerFocus:!1,containerHover:!0,majorVirtualHover:0,majorHovered:!1,majorHidden:!1,majorTitle:null,shortcutDisabled:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ctrlHidden",{get:function(){return this.isCtrlHidden()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mouseHidden",{get:function(){return this.ctrlHidden&&this.danmakuStore.state.noStopDm&&1!==this.interactionStore.state.ctrl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.state.majorTitle},enumerable:!1,configurable:!0}),t.prototype.isCtrlHidden=function(){switch(this.configStore.state.ctrl){case 1:return!0;case 2:return!1}if(!this.errorStore.state.initError)switch(this.interactionStore.state.ctrl){case 1:return!0;case 2:return!1}if(!this.videoStore.state.firstPlay){if(!this.mediaStore.autoplay)return!1
;if(this.videoStore.state.autoplayNotAllowed)return!1}return!this.state.majorHovered&&!this.state.majorVirtualHover&&((!this.uiStore.isFullView||!this.sendStore.state.focus)&&this.state.majorHidden)},t.prototype.focus=function(e){this.clearVirtualHoverTimer(),this.setState({majorVirtualHover:e})},t.prototype.blur=function(){this.clearVirtualHoverTimer(),this.setState({majorVirtualHover:0})},t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.ctrlHidden=Object(D.i)((function(){return t.ctrlHidden}),(function(e){e?queueMicrotask((function(){return t.rootPlayer.emit(C.a.Player_Hide_Controls,new CustomEvent(C.a.Player_Hide_Controls))})):queueMicrotask((function(){return t.rootPlayer.emit(C.a.Player_Show_Controls,new CustomEvent(C.a.Player_Show_Controls))}))})),this.dc.firstPlayDelayed=Object(D.i)((function(){return t.videoStore.state.firstPlay}),(function(e){!e||t.delayShowTimer||t.isCtrlHidden()||t.setCtrlTimer(1e3)}),{fireImmediately:!0}),this.dc.firstPlay=Object(D.i)((function(){return t.videoStore.state.firstPlay}),(function(e){e&&t.setState({containerFocus:!0})}),{fireImmediately:!0}),this.dc.forceHidden=Object(D.i)((function(){return 1===t.interactionStore.state.ctrl}),(function(e){t.nodes.controlWrap.hidden=e})),this.dc.virtualHover=Object(D.i)((function(){return t.state.majorVirtualHover}),(function(e){e&&(t.clearVirtualHoverTimer(),t.virtualHoverTimer=self.setTimeout((function(){t.setState({majorVirtualHover:0})}),e))})),this.addEvents()},t.prototype.addEvents=function(){this.nodes.container.addEventListener("mouseenter",this.onMouseEnterContainer),this.nodes.container.addEventListener("mouseleave",this.onMouseLeaveContainer),this.nodes.videoArea.addEventListener("mousemove",this.onMouseMoveMedia),this.nodes.videoArea.addEventListener("mouseleave",this.onMouseLeaveMedia),this.nodes.controlWrap.addEventListener("mouseenter",this.onHoverEnter),this.nodes.controlWrap.addEventListener("mouseleave",this.onHoverLeave),this.nodes.topWrap.addEventListener("mouseenter",this.onHoverEnter),this.nodes.topWrap.addEventListener("mouseleave",this.onHoverLeave),this.rootStore.window.addEventListener("scroll",this.onWindowScroll),this.rootStore.window.addEventListener("click",this.onFocusChanged),this.rootStore.isEmbedSOP&&this.rootStore.parent.addEventListener("click",this.onFocusChanged)},t.prototype.removeEvents=function(){this.nodes.container&&(this.nodes.container.removeEventListener("mouseenter",this.onMouseEnterContainer),this.nodes.container.removeEventListener("mouseleave",this.onMouseLeaveContainer)),this.nodes.videoArea&&(this.nodes.videoArea.removeEventListener("mousemove",this.onMouseMoveMedia),this.nodes.videoArea.removeEventListener("mouseleave",this.onMouseLeaveMedia)),this.nodes.controlWrap&&(this.nodes.controlWrap.removeEventListener("mouseenter",this.onHoverEnter),this.nodes.controlWrap.removeEventListener("mouseleave",this.onHoverLeave)),this.nodes.topWrap&&(this.nodes.topWrap.removeEventListener("mouseenter",this.onHoverEnter),this.nodes.topWrap.removeEventListener("mouseleave",this.onHoverLeave)),this.rootStore.window.removeEventListener("scroll",this.onWindowScroll),this.rootStore.window.removeEventListener("click",this.onFocusChanged),this.rootStore.parent.removeEventListener("click",this.onFocusChanged)},t.prototype.onMouseMoveMedia=function(e){var t=e.clientY-this.getValidClientRect().top,r=this.uiStore.state.videoAreaHeight;t<0||t>r||(t<r/3||t>r/3*2?this.setCtrlTimer(3e3):this.setCtrlTimer(1e3))},t.prototype.onMouseLeaveMedia=function(e){this.setMajorHidden(!0)},t.prototype.clearCtrlTimer=function(){this.delayShowTimer&&(clearTimeout(this.delayShowTimer),this.delayShowTimer=null)},t.prototype.setCtrlTimer=function(e){var t=this;this.setMajorHidden(!1),this.delayShowTimer=self.setTimeout((function(){t.setMajorHidden(!0)}),e)},t.prototype.setMajorHidden=function(e){this.clearCtrlTimer(),this.setState({majorHidden:e})},t.prototype.onHoverEnter=function(){this.setState({majorHovered:!0})},t.prototype.onHoverLeave=function(){this.setState({majorHovered:!1})},
t.prototype.onFocusChanged=function(e){e&&e.target&&this.nodes.container.contains(e.target)?this.setState({containerFocus:!0}):this.setState({containerFocus:!1})},t.prototype.onMouseEnterContainer=function(){this.setState({containerHover:!0})},t.prototype.onMouseLeaveContainer=function(){this.setState({containerHover:!1})},t.prototype.onWindowScroll=function(){this.clientRect=null},t.prototype.getValidClientRect=function(){return this.clientRect?this.clientRect:this.clientRect=this.nodes.container.getBoundingClientRect()},t.prototype.clearVirtualHoverTimer=function(){this.virtualHoverTimer&&(clearTimeout(this.virtualHoverTimer),this.virtualHoverTimer=null)},t.prototype.onDispose=function(){e.prototype.onDispose.call(this,{containerFocus:1,containerHover:1,majorVirtualHover:1,majorHovered:1,majorHidden:1})},t.prototype.onDisconnect=function(){e.prototype.onDisconnect.call(this),this.removeEvents(),this.clearCtrlTimer(),this.clearVirtualHoverTimer()},Object(L.c)([D.e],t.prototype,"ctrlHidden",null),Object(L.c)([D.e],t.prototype,"mouseHidden",null),Object(L.c)([D.e],t.prototype,"title",null),Object(L.c)([ee.a],t.prototype,"onMouseMoveMedia",null),Object(L.c)([ee.a],t.prototype,"onMouseLeaveMedia",null),Object(L.c)([ee.a],t.prototype,"onHoverEnter",null),Object(L.c)([ee.a],t.prototype,"onHoverLeave",null),Object(L.c)([ee.a],t.prototype,"onFocusChanged",null),Object(L.c)([ee.a],t.prototype,"onMouseEnterContainer",null),Object(L.c)([ee.a],t.prototype,"onMouseLeaveContainer",null),Object(L.c)([ee.a],t.prototype,"onWindowScroll",null),t}(se.a),fi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[ScreenEventsStore]",t.videoInfo={},t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{position:null,dmList:[],showColor:!1,saturate:100,brightness:100,contrast:100,changeColor:null,showVideoInfo:!1,videoInfo:null,showEffect:!1,showKeyBoard:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showColor",{get:function(){return this.state.showColor&&!this.uiStore.isTinyView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showKeyBoard",{get:function(){return this.state.showKeyBoard&&!this.uiStore.isTinyView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showVideoInfo",{get:function(){return this.state.showVideoInfo&&!this.uiStore.isTinyView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showEffect",{get:function(){return this.state.showEffect&&!this.uiStore.isTinyView},enumerable:!1,configurable:!0}),t.prototype.setVideoInfo=function(e,t){this.videoInfo.info=e,this.videoInfo.type=t,this.state.showVideoInfo&&this.setState({videoInfo:Object(L.a)({},this.videoInfo)})},t.prototype.getVideoInfoItems=function(){var e=this.videoInfo.type;return this.generateVideoInfoItems(e)},t.prototype.getVideoInfo=function(){var e=this.videoInfo,t=e.info,r=e.type;return this.updateVideoInfoData(r,null==t?void 0:t.mediaInfo,null==t?void 0:t.statisticsInfo)},t.prototype.getDmByPosition=function(e){var t;return(null===(t=this.state.dmList)||void 0===t?void 0:t.length)&&this.setState({dmList:[]}),this.setState({position:e}),this.state.dmList},t.prototype.updateVideoInfoData=function(e,t,r){if(!t||!r)return[];if(0===Object.keys(t).length||0===Object.keys(r).length)return[];var n,o,i,a,s=t.width+" x "+t.height;"DashPlayer"===e?s+="@"+Number(t.fps).toFixed(3):(t.hasOwnProperty("sarNum")&&(s+=" [SAR "+t.sarNum+":"+t.sarDen+"]"),t.hasOwnProperty("sar")&&(s+=" [SAR "+t.sar+"]"));try{r.url&&(n=/https?:\/\/(.+?)\//.exec(r.url)[1],o=/^(https?|wss?)\:\/\/?/.exec(r.url)[1]),r.videoURL&&(i=/https?:\/\/(.+?)\//.exec(r.videoURL)[1]),r.audioURL&&(a=/https?:\/\/(.+?)\//.exec(r.audioURL)[1])}catch(e){n="",o=""}var u=r.droppedFrames+" / "+r.decodedFrames,c=[{name:"mimeType",data:t.mimeType},{name:"playerType",data:r.playerType},{name:"resolution",data:s},{name:"streamType",data:o},{name:"streamHost",data:n},{name:"droppedFrames",data:u}];if("NativePlayer"===e)return c;if("FlvPlayer"===e){
var l=r.currentSegmentIndex+1+"/"+r.totalSegmentCount,p=t.profile+", L"+t.level,d=t.audioSampleRate+" Hz";d+=1===(y=t.audioChannelCount)?", Mono":2===y?", Stereo":", "+y+" Channels",t.metadata&&t.metadata.description&&(d+=t.metadata.description&&/fixed_gap:True/.test(t.metadata.description)?", Fixed":"");var f=t.videoDataRate,h=t.audioDataRate;c=c.concat([{name:"fps",data:Number(t.fps).toFixed(3)},{name:"videoProfile",data:p},{name:"audioSampling",data:d},{name:"videoDatarate",data:Math.round(f)+" Kbps"},{name:"audioDatarate",data:Math.floor(h)+" Kbps"},{name:"segments",data:l},{name:"loader",data:r.loaderType},{name:"connectionSpeed",data:Math.round(r.speed)}])}if("DashPlayer"===e){var y;d=t.audioSampleRate+" Hz";d+=1===(y=t.audioChannelCount)?", Mono":2===y?", Stereo":", "+y+" Channels";f=t.videoDataRate,h=t.audioDataRate;c.splice(3,3);l=(r.audioCurrentSegmentIndex||1)+" / "+(r.audioTotalSegmentCount||0);c=c.concat([{name:"videoDatarate",data:Math.round(f/1024)+" Kbps"},{name:"audioDatarate",data:Math.floor(h/1024)+" Kbps"},{name:"segments",data:l},{name:"droppedFrames",data:u},{name:"videoStreamHost",data:i},{name:"audioStreamHost",data:a},{name:"videoConnectionSpeed",data:Math.round(r.videoConnectionSpeed)},{name:"audioConnectionSpeed",data:Math.round(r.audioConnectionSpeed)},{name:"networkActivity",data:Math.round(r.networkActivity/1024)}])}return c},t.prototype.generateVideoInfoItems=function(e){return"NativePlayer"===e?{infos:[{name:"mimeType",type:"text",title:"Mime Type",data:""},{name:"playerType",type:"text",title:"Player Type",data:""},{name:"resolution",type:"text",title:"Resolution",data:""},{name:"streamType",type:"text",title:"Stream Type",data:""},{name:"streamHost",type:"text",title:"Stream Host",data:""},{name:"droppedFrames",type:"text",title:"Dropped Frames",data:""},{name:"Log",type:"log",title:"Log",data:""}]}:"DashPlayer"===e?{infos:[{name:"mimeType",type:"text",title:"Mime Type",data:""},{name:"playerType",type:"text",title:"Player Type",data:""},{name:"resolution",type:"text",title:"Resolution",data:""},{name:"videoDatarate",type:"text",title:"Video DataRate",data:""},{name:"audioDatarate",type:"text",title:"Audio DataRate",data:""},{name:"segments",type:"text",title:"Segments",data:""},{name:"videoStreamHost",type:"text",title:"Video Host",data:""},{name:"audioStreamHost",type:"text",title:"Audio Host",data:""},{name:"videoConnectionSpeed",type:"graph",title:"Video Speed",unit:"Kbps",data:0},{name:"audioConnectionSpeed",type:"graph",title:"Audio Speed",unit:"Kbps",data:0},{name:"networkActivity",type:"graph",title:"Network Activity",unit:"KB",data:0},{name:"droppedFrames",type:"text",title:"Dropped Frames",data:""},{name:"Log",type:"log",title:"Log",data:""}]}:{infos:[{name:"mimeType",type:"text",title:"Mime Type",data:""},{name:"playerType",type:"text",title:"Player Type",data:""},{name:"resolution",type:"text",title:"Resolution",data:""},{name:"fps",type:"text",title:"FPS",data:""},{name:"videoProfile",type:"text",title:"Video Profile",data:""},{name:"audioSampling",type:"text",title:"Audio Sampling",data:""},{name:"videoDatarate",type:"text",title:"Video DataRate",data:""},{name:"audioDatarate",type:"text",title:"Audio DataRate",data:""},{name:"segments",type:"text",title:"Segments",data:""},{name:"loader",type:"text",title:"Loader",data:""},{name:"streamType",type:"text",title:"Stream Type",data:""},{name:"streamHost",type:"text",title:"Stream Host",data:""},{name:"connectionSpeed",type:"graph",title:"Connection Speed",unit:"KB/s",data:0},{name:"droppedFrames",type:"text",title:"Dropped Frames",data:""},{name:"Log",type:"log",title:"Log",data:""}]}},t.prototype.onDispose=function(){e.prototype.onDispose.call(this)},Object(L.c)([D.e],t.prototype,"showColor",null),Object(L.c)([D.e],t.prototype,"showKeyBoard",null),Object(L.c)([D.e],t.prototype,"showVideoInfo",null),Object(L.c)([D.e],t.prototype,"showEffect",null),t}(se.a),hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),t}(se.a),yi=function(e){function t(){
return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){var e;return(e={})[-1]=null,e[1]=null,e[2]=null,e},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){var t=this;e.prototype.onMount.call(this),this.dc.studyNote=Object(D.i)((function(){return t.state[-1]}),(function(e){t.rootPlayer.emit(C.a.Player_Hotspot_Change,new CustomEvent(C.a.Player_Hotspot_Change,{detail:{type:-1,data:e}}))})),this.dc.wonderMoment=Object(D.i)((function(){return t.state[1]}),(function(e){t.rootPlayer.emit(C.a.Player_Hotspot_Change,new CustomEvent(C.a.Player_Hotspot_Change,{detail:{type:1,data:e}}))})),this.dc.division=Object(D.i)((function(){return t.state[2]}),(function(e){t.rootPlayer.emit(C.a.Player_Hotspot_Change,new CustomEvent(C.a.Player_Hotspot_Change,{detail:{type:2,data:e}}))}))},t.prototype.onUserLoaded=function(t){e.prototype.onUserLoaded.call(this,t),this.setInferredHotspot(t.viewPoints)},t.prototype.setInferredHotspot=function(e){var t,r,n,o=this;if(Array.isArray(e)){var i=((t={})[-1]=[],t[1]=[],t[2]=[],t);try{for(var a=Object(L.i)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u)switch(u.type){case-1:case 1:case 2:i[u.type].push(u)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}Object.keys(i).forEach((function(e){var t=+e,r=o.setMissingDivision(i[t]);r.length&&o.set({type:t,data:r})}))}},t.prototype.setMissingDivision=function(e){if(Array.isArray(e)&&e.length&&2===e[0].type){var t=e[0],r=e[e.length-1];t&&null==t.from&&(t.from=0),r&&null==r.to&&(r.to=this.apiStore.getDuration())}return e},t.prototype.set=function(e){var t;if(!e)return!1;if(null!=e.data&&!Array.isArray(e.data))return!1;switch(e.type){case-1:case 1:case 2:return this.setState(((t={})[e.type]=e.data,t)),!0;default:return!1}},t.prototype.get=function(e){switch(e){case-1:case 1:case 2:return{type:e,data:this.state[e]};default:return{type:e,data:null}}},t}(se.a),mi=r(158),vi=r(156),bi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[BPNCLoadStore]",t}return Object(L.d)(t,e),Object.defineProperty(t.prototype,"defaultState",{get:function(){return{enabled:!1,version:"",source:"",sdkState:null}},enumerable:!1,configurable:!0}),t.prototype.onDispose=function(){e.prototype.onDispose.call(this,!0)},t}(se.a);!function(e){e[e.IsFollowed=0]="IsFollowed"}(To||(To={}));var gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(L.d)(t,e),t.prototype.onMount=function(){e.prototype.onMount.call(this),this.addReaction(To.IsFollowed)},t.prototype.setFromExternal=function(e){var t=this;Object.keys(e).forEach((function(r){var n=+r;switch(t.removeReaction(n),n){case To.IsFollowed:t.rootStore.upStore.setState({isFollow:!!e[r]})}t.addReaction(n)}))},t.prototype.addReaction=function(e){var t=this;switch(e){case To.IsFollowed:this.addEventReaction(e,(function(){return t.upStore.state.isFollow}))}},t.prototype.removeReaction=function(e){"function"==typeof this.dc[e]&&this.dc[e]()},t.prototype.addEventReaction=function(e,t){var r=this;this.removeReaction(e),this.dc[e]=Object(D.i)(t,(function(t){r.rootStore.isDisposing||r.rootPlayer.emit(C.a.Player_Internal_Signal,new CustomEvent(C.a.Player_Internal_Signal,{detail:{kind:e,value:t}}))}))},t}(se.a),Si=function(){function e(e){var t,r,n,o=this;this.isInitialized=!1,this.isDisposing=!1,this.rootPlayer=e,this.window=e.window,this.parent=e.parent,this.isEmbed=e.isEmbed,this.isEmbedSOP=e.isEmbedSOP,this.nodes=(t=V.f,
r='\n        <div class="'+t+'-container">\n            <div class="'+t+'-primary-area" aria-label="哔哩哔哩播放器">\n                <div class="'+t+'-video-area">\n                    <div class="'+t+'-video-perch">\n                        <div class="'+t+'-video-wrap"></div>\n                    </div>\n                    <div class="'+t+'-row-dm-wrap"></div>\n                    <div class="'+t+'-adv-dm-wrap"></div>\n                    <div class="'+t+'-bas-dm-wrap"></div>\n                    <div class="'+t+'-cmd-dm-wrap">\n                        <div class="'+t+'-cmd-dm-inside"></div>\n                    </div>\n                    <div class="'+t+'-ending-panel" hidden></div>\n                    <div class="'+t+'-share-panel" hidden></div>\n                    <div class="'+t+'-subtitle-wrap"></div>\n                    <div class="'+t+'-top-wrap">\n                        <div class="'+t+'-top-mask"></div>\n                        <div class="'+t+'-top-title"></div>\n                        <div class="'+t+'-top-follow"></div>\n                        <div class="'+t+'-top-issue">\n                            <span class="'+t+'-top-issue-icon"></span>\n                        </div>\n                    </div>\n                    <div class="'+t+'-state-wrap">\n                        <div class="'+t+'-state-play"></div>\n                        <div class="'+t+'-state-buff-icon"></div>\n                        <div class="'+t+'-state-buff-text">\n                            <span class="'+t+'-state-buff-title">正在缓冲...</span>\n                            <span class="'+t+'-state-buff-speed"></span>\n                        </div>\n                    </div>\n                    <div class="'+t+'-loading-panel">\n                        <div class="'+t+'-loading-panel-text" hidden></div>\n                        <div class="'+t+'-loading-panel-blur" hidden>\n                            <div class="'+t+'-loading-panel-blur-detail"></div>\n                        </div>\n                    </div>\n                    <div class="'+t+'-toast-wrap">\n                        <div class="'+t+'-toast-auto"></div>\n                        <div class="'+t+'-toast-fixed"></div>\n                    </div>\n                    <div class="'+t+'-control-wrap">\n                        <div class="'+t+'-control-mask"></div>\n                        <div class="'+t+'-control-entity">\n                            <div class="'+t+'-control-top"></div>\n                            <div class="'+t+'-control-bottom">\n                                <div class="'+t+'-control-bottom-left"></div>\n                                <div class="'+t+'-control-bottom-center"></div>\n                                <div class="'+t+'-control-bottom-right"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="'+t+'-dialog-wrap"></div>\n                </div>\n                <div class="'+t+'-sending-area">\n                    <div class="'+t+'-sending-bar">\n                        <div class="'+t+'-sending-bar-left"></div>\n                        <div class="'+t+'-sending-bar-right"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="'+t+'-dialog-area"></div>\n            <div class="'+t+'-tooltip-area"></div>\n            <div class="'+t+'-context-area"></div>\n        </div>',{container:n=Object(oe.a)(r),videoArea:n.querySelector("."+t+"-video-area"),sendingArea:n.querySelector("."+t+"-sending-area"),dialogArea:n.querySelector("."+t+"-dialog-area"),tooltipArea:n.querySelector("."+t+"-tooltip-area"),contextArea:n.querySelector("."+t+"-context-area"),videoPerch:n.querySelector("."+t+"-video-perch"),videoWrap:n.querySelector("."+t+"-video-wrap"),rowDanmaku:n.querySelector("."+t+"-row-dm-wrap"),advDanmaku:n.querySelector("."+t+"-adv-dm-wrap"),basDanmaku:n.querySelector("."+t+"-bas-dm-wrap"),cmdDanmaku:n.querySelector("."+t+"-cmd-dm-wrap"),cmdInside:n.querySelector("."+t+"-cmd-dm-inside"),
endingPanel:n.querySelector("."+t+"-ending-panel"),sharePanel:n.querySelector("."+t+"-share-panel"),subtitleWrap:n.querySelector("."+t+"-subtitle-wrap"),topWrap:n.querySelector("."+t+"-top-wrap"),stateWrap:n.querySelector("."+t+"-state-wrap"),loadingPanel:n.querySelector("."+t+"-loading-panel"),toastWrap:n.querySelector("."+t+"-toast-wrap"),controlWrap:n.querySelector("."+t+"-control-wrap"),dialogWrap:n.querySelector("."+t+"-dialog-wrap"),sendingBar:n.querySelector("."+t+"-sending-bar"),controlBottomCenter:n.querySelector("."+t+"-control-bottom-center"),topTitle:n.querySelector("."+t+"-top-title"),topFollow:n.querySelector("."+t+"-top-follow"),buffIcon:n.querySelector("."+t+"-state-buff-icon"),buffSpeed:n.querySelector("."+t+"-state-buff-speed"),toastAuto:n.querySelector("."+t+"-toast-auto"),toastFixed:n.querySelector("."+t+"-toast-fixed")}),this.subStores={localStore:new an(this),sessionStore:new sn(this),clientStore:new ye(this),configStore:new ht(this),assetStore:new Mn(this),kernelStore:new to(this),uiStore:new le(this),loadingStore:new yn(this),mediaStore:new pe(this),userStore:new ln(this),upStore:new hn(this),episodeStore:new Nn(this),videoStore:new fe(this),errorStore:new ro(this),qualityStore:new Bn(this),endingStore:new In(this),apiStore:new Ln(this),helperStore:new oo(this),perfStore:new uo(this),screenStore:new po(this),sendStore:new mo(this),danmakuStore:new Po(this),dmAdvStore:new ko.b(this),dmBasStore:new xo(this),dmListStore:new No(this),dmCmdStore:new Bo(this),dmSkipStore:new Vo(this),dmSettingStore:new qo(this),blockStore:new $o(this),dmMaskStore:new Jo(this),dmModeStore:new Xo(this),dropFrameStore:new Zo(this),toastStore:new ei(this),tooltipStore:new ti(this),httpStore:new ii(this),trackStore:new li(this),auxiliaryStore:new pi(this),controlStore:new di(this),menuStore:new fi(this),dialogStore:new hi(this),hotspotStore:new yi(this),interactionStore:new mi.b(this),shareStore:new vi.b(this),bpNCLoadStore:new bi(this),signalStore:new gi(this),eventStore:new no(this)},this.decomposeSubStores(this),this.rootPlayer.on(C.a.Player_Dispose,(function(){o.isDisposing=!1}),1).on(C.a.Player_Dispose,(function(){o.isDisposing=!0}),-1),this.rootPlayer.emit(C.b.PLAYER_GRAPH_FLATTEN),this.rootPlayer.emit(C.b.PLAYER_STORAGE_BUILD),this.rootPlayer.emit(C.b.PLAYER_STATE_CREATE),this.rootPlayer.emit(C.b.PLAYER_STATE_CREATED),this.rootPlayer.emit(C.b.PLAYER_STORE_MOUNT),this.rootPlayer.emit(C.b.PLAYER_STORE_MOUNTED),this.setInitState(!0)}return e.prototype.setInitState=function(e){this.isInitialized=e},e.prototype.decomposeSubStores=function(e){var t,r;if(this.subStores){var n=Object.keys(this.subStores),o={};try{for(var i=Object(L.i)(n),a=i.next();!a.done;a=i.next()){var s=a.value;o[s]={configurable:!0,enumerable:!1,writable:!1,value:this.subStores[s]}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}Object.defineProperties(e,o)}},e.prototype.disconnect=function(){this.setInitState(!1)},Object(L.c)([D.g],e.prototype,"isInitialized",void 0),Object(L.c)([D.b],e.prototype,"setInitState",null),e}(),Ei=new(function(){function e(){this.isDetected=!1,this.details={vendor:"",renderer:""}}return Object.defineProperty(e.prototype,"vendor",{get:function(){return this.getDetails().vendor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this.getDetails().renderer},enumerable:!1,configurable:!0}),e.prototype.getDetails=function(){if(this.isDetected)return this.details;var e,t,r=document.createElement("canvas"),n="",o="";try{(e=r.getContext("webgl2")||r.getContext("webgl")||r.getContext("experimental-webgl"))&&(t=e.getExtension("WEBGL_debug_renderer_info"))&&(n=e.getParameter(t.UNMASKED_VENDOR_WEBGL),o=e.getParameter(t.UNMASKED_RENDERER_WEBGL))}catch(e){console.warn(e)}return this.details.vendor=n,this.details.renderer=o,this.isDetected=!0,{vendor:n,renderer:o}},e}());var Oi=function(){function e(e,t,r){this.epp=e,this.input=t,this.theme=r,this.isEmbed=!1,this.isEmbedSOP=!1,this.isInitialized=!1,this.httpRequests=new Set,
this.httpCaches=new Map,this.connectDetails={starting:!1,finished:!1},this.connectDeferred=null,this.disposeDeferredSet=new Set,this.disconnectDeferredSet=new Set,this.beforeEmitter=new B.EventEmitter,this.emitter=new B.EventEmitter,this.afterEmitter=new B.EventEmitter,this.beforeEmitter.setMaxListeners(0),this.emitter.setMaxListeners(0),this.afterEmitter.setMaxListeners(0),this.isInitialized=!1,this.log=new $n,this.track=new Yn,this.window=window,this.isEmbed=window!==window.parent,this.primary=he(this.input),this.searchParam=function(e){var t=Object.create(null);if("string"!=typeof e)return t;var r=k.a.parse(e,{ignoreQueryPrefix:!0,plainObjects:!0});return"nano"!==r.parser||Object.keys(r).forEach((function(e){var n=r[e];if(n)switch(e){case"t":case"ctrl":case"kernel":case"nocache":case"autoplay":t[e]=+n;break;case"player":t[e]=n}})),t}(this.window.location.search),this.checkFrameStatus(),this.createBaseNode(),this.cd=this.createPrefetchProxy(),this.fn=this.createCallbackProxy(),this.log.i("[EntryTiming]",JSON.stringify(io.entryLoadTime)),Object(n.b)("M03"),Object(n.c)("P02:IH2I","M01","M03"),this.instantiate=performance.now()}return e.prototype.emit=function(e){for(var t,r,n,o,i,a,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];(t=this.beforeEmitter).emit.apply(t,Object(L.h)(["**"],s)),(r=this.emitter).emit.apply(r,Object(L.h)(["**"],s)),(n=this.afterEmitter).emit.apply(n,Object(L.h)(["**"],s));var c=(o=this.beforeEmitter).emit.apply(o,Object(L.h)([e],s)),l=(i=this.emitter).emit.apply(i,Object(L.h)([e],s)),p=(a=this.afterEmitter).emit.apply(a,Object(L.h)([e],s));return c||l||p},e.prototype.on=function(e,t,r){switch(!0){case r<0:this.beforeEmitter.on(e,t);break;case r>0:this.afterEmitter.on(e,t);break;default:this.emitter.on(e,t)}return this},e.prototype.once=function(e,t,r){switch(!0){case r<0:this.beforeEmitter.once(e,t);break;case r>0:this.afterEmitter.once(e,t);break;default:this.emitter.once(e,t)}return this},e.prototype.off=function(e,t,r){switch(!0){case r<0:this.beforeEmitter.off(e,t);break;case r>0:this.afterEmitter.off(e,t);break;default:this.emitter.off(e,t)}return this},e.prototype.removeAllListeners=function(e){return this.beforeEmitter.removeAllListeners(e),this.emitter.removeAllListeners(e),this.afterEmitter.removeAllListeners(e),this},e.prototype.createBaseNode=function(){var e=this.iid=M().toString(),t=de.a.msie.alike?V.a+"-msie":de.a.edge.alike?V.a+"-edge":de.a.safari.alike?V.a+"-safari":de.a.firefox.alike?V.a+"-firefox":null,r=function(r){var n=document.createElement("div");return n.setAttribute("data-iid",e),n.setAttribute("data-injector","nano"),r.forEach((function(e){return n.classList.add(e)})),t&&n.classList.add(t),n};this.majorNode=r([V.b,V.b+"-major"]),this.minorNode=r([V.b,V.b+"-minor"]),this.patchNode=r([V.b,V.b+"-patch"])},e.prototype.checkFrameStatus=function(){try{this.parent=window.parent&&window.parent.document?window.parent:window}catch(e){this.parent=window}this.isEmbed&&(this.isEmbedSOP=this.window!==this.parent)},e.prototype.createPrefetchProxy=function(){var e=this.input.prefetch;return e&&"object"==typeof e?e:(this.log.w("[getPrefetchProxy]","Invalid prefetch data"),{__placeholder__:!0})},e.prototype.createCallbackProxy=function(){var e=this;return function(t,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(null==t)throw new Error("1 argument required");var i=e.input.callbacks;return r?!!i&&"function"==typeof i[t]:i&&"function"==typeof i[t]?i[t].apply(null,n):void 0}},e.prototype.onError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Object(L.h)(["[InternalError]:","whoops! there was an error"],e))},e.prototype.onDispose=function(){var e=this;this.disposeDeferredSet.size&&(this.disposeDeferredSet.forEach((function(e){e&&"function"==typeof e.reject&&e.reject(new Error(V.s))})),this.disposeDeferredSet.clear()),this.httpCaches.size&&this.httpCaches.clear();var t=[];this.httpRequests.forEach((function(e){e.persistent||t.push(e)})),t.forEach((function(t){t&&"function"==typeof t.dispose&&t.dispose(),
e.httpRequests.delete(t)}))},e.prototype.onDisconnect=function(){this.disconnectDeferredSet.size&&(this.disconnectDeferredSet.forEach((function(e){e&&"function"==typeof e.reject&&e.reject(new Error(V.r))})),this.disconnectDeferredSet.clear()),this.httpRequests.forEach((function(e){e&&"function"==typeof e.dispose&&e.dispose()})),this.httpRequests.clear()},e.prototype.snapshotError=function(e){var t=e&&e.message;t&&this.log.e(t)},e.prototype.isDisposeErr=function(e){return e&&e.message===V.s},e.prototype.isDisconnectErr=function(e){return e&&e.message===V.r},e.prototype.addDispose=function(e){var t=this;return this.disposeDeferredSet.add(e),e.promise.then((function(){return t.disposeDeferredSet.delete(e)})).catch(this.snapshotError),e.promise.catch((function(){return t.disposeDeferredSet.delete(e)})).catch(this.snapshotError),e},e.prototype.addDisconnect=function(e){var t=this;return this.disconnectDeferredSet.add(e),e.promise.then((function(){return t.disconnectDeferredSet.delete(e)})).catch(this.snapshotError),e.promise.catch((function(){return t.disconnectDeferredSet.delete(e)})).catch(this.snapshotError),e},e.prototype.getRuntimeMetadata=function(){return{version:I.version,revision:I.revision,lastCompiled:I.lastCompiled,userAgent:navigator.userAgent,cookieEnabled:navigator.cookieEnabled,hardwareConcurrency:navigator.hardwareConcurrency||NaN,devicePixelRatio:self.devicePixelRatio||NaN,viewport:"width:"+self.innerWidth+",height:"+self.innerHeight,screen:"width:"+screen.width+",height:"+screen.height+",colorDepth:"+screen.colorDepth,gpu:"vendor:"+Ei.vendor+",renderer:"+Ei.renderer,frameUrl:document.URL,referrer:document.referrer}},e.prototype.hasFeature=function(e){return!!ft(this.primary.featureList)&&this.primary.featureList.has(e)},e.prototype.getFormattedLogs=function(e){return $n.format(this.log.filter(null,e),this.getRuntimeMetadata())},e.prototype.connect=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){switch(t.label){case 0:return this.connectDetails.starting?[3,2]:(this.connectStart=performance.now(),Object(n.b)("M04"),Object(n.c)("P03:I2CS","M03","M04"),ao.add(this),Object(D.j)((function(){e.connectDetails.starting=!0})),this.connectDeferred=new bn.a,this.on("error",this.onError),this.on(C.a.Player_Dispose,this.onDispose),this.on(C.a.Player_Disconnect,this.onDisconnect),this.rootStore=new Si(this),this.rootStore.decomposeSubStores(this),new ne(this.rootStore),Object(n.b)("M05"),Object(n.c)("P04:CS2SE","M04","M05"),this.storeEnd=performance.now(),[4,this.connectDeferred.promise]);case 1:return t.sent(),this.isInitialized=!0,this.emit(C.a.Player_Initialized,new CustomEvent(C.a.Player_Initialized)),this.emit(C.a.Player_Connected,new CustomEvent(C.a.Player_Connected)),Object(D.j)((function(){e.connectDetails.finished=!0})),Object(n.b)("M12"),Object(n.c)("P06:CS2CE","M04","M12"),this.connectEnd=performance.now(),[3,5];case 2:return[4,this.connectDeferred.promise];case 3:return t.sent(),[4,Object(D.l)((function(){return e.connectDetails.finished}))];case 4:t.sent(),t.label=5;case 5:return[2,!this.rootStore.errorStore.state.initError]}}))}))},e.prototype.disconnect=function(){return Object(L.b)(this,void 0,void 0,(function(){var e=this;return Object(L.e)(this,(function(t){switch(t.label){case 0:return this.connectDetails.starting?(Object(D.j)((function(){e.connectDetails.finished=!1})),this.connectDeferred&&(this.connectDeferred.reject(new Error('Interrupted by "Player.disconnect()" action')),this.connectDeferred=null),this.isInitialized=!1,this.emit(C.b.PLAYER_BEFORE_QUIT),this.emit(C.a.Player_Dispose,new CustomEvent(C.a.Player_Dispose)),this.rootStore.disconnect(),this.emit(C.a.Player_Disconnect,new CustomEvent(C.a.Player_Disconnect)),this.removeAllListeners(),this.track.destroy(),Object(D.j)((function(){e.connectDetails.starting=!1})),ao.delete(this),[3,3]):[3,1];case 1:return[4,Object(D.l)((function(){return!e.connectDetails.starting}))];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Object(L.c)([D.g],e.prototype,"connectDetails",void 0),
Object(L.c)([ee.a],e.prototype,"onError",null),Object(L.c)([ee.a],e.prototype,"onDispose",null),Object(L.c)([ee.a],e.prototype,"onDisconnect",null),Object(L.c)([ee.a],e.prototype,"snapshotError",null),e}(),wi=new Map;var _i,Pi=r(291),ki=r(108),xi=0,ji={injectType:"lazyStyleTag",attributes:{"data-injector":"nano"},insert:"head",singleton:!1},Ai={};Ai.locals=ki.a.locals||{},Ai.use=function(){return xi++||(_i=O()(ki.a,ji)),Ai},Ai.unuse=function(){xi>0&&!--xi&&(_i(),_i=null)};var Ti=Ai,Di=function(){function e(e){this.prefix="bpx-legacy-browser",Ti.use(),this.config=Object.assign({promptImageUrl:"//s1.hdslb.com/bfs/static/player/img/h5.png",promptTextList:["您当前的浏览器不支持 HTML5 播放器","请更换浏览器再试试哦~"]},e),this.container=this.config.container,this.container.innerHTML=this.template()}return e.prototype.template=function(){var e,t,r=[];if(Array.isArray(this.config.promptTextList))try{for(var n=Object(L.i)(this.config.promptTextList),o=n.next();!o.done;o=n.next()){var i=o.value;r.push('<p class="'+this.prefix+'-text">'+i+"</p>")}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return'\n            <div class="'+this.prefix+'-container">\n                <img class="'+this.prefix+'-image" src="'+this.config.promptImageUrl+'" alt="Legacy Browser">\n                '+r.join("")+"\n            </div>\n        "},e.prototype.dispose=function(){var e=this.container.querySelector("."+this.prefix+"-container");e&&e.parentElement&&e.parentElement.removeChild(e),Ti.unuse()},e}();function Li(e,t){if(!Object(wr.a)(e))throw new TypeError("1 argument required and MUST be a plain object");if(!function(e){void 0===e&&(e='video/mp4; codecs="avc1.42001E, mp4a.40.2"');var t="[canPlayType]:"+e;if(wi.has(t))return wi.get(t);var r=navigator.userAgent.toLowerCase(),n=!(/msie [\w.]+/.exec(r)||/Trident/i.test(r)&&/Windows NT 6/.test(r)||!window.URL);if(n){var o=document.createElement("video");if(o&&o.canPlayType)return!!o.canPlayType(e)}return wi.set(t,n),n}())return new Di({container:e.element}),console.error("Legacy Browser"),null;var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object.assign.apply(Object,Object(L.h)([{}],e,[{origin:1}]))},n=new(function(){function e(){}return e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&/[A-Z]/.test(e)?console.error('The "type" cannot contain uppercase letter'):o.emit.apply(o,Object(L.h)([e],t))},e.prototype.on=function(e,t){return o.on(e,t),this},e.prototype.off=function(e,t){return o.off(e,t),this},e.prototype.once=function(e,t){return o.once(e,t),this},e.prototype.eTrack=function(e,t,n){return o.track.add(e,t,r(n,{kind:Qn.EVENT}))},e.prototype.oTrack=function(e,t,n){return o.track.add(e,t,r(n,{kind:Qn.OP}))},e.prototype.isInitialized=function(){return o.isInitialized},e.prototype.getFormattedLogs=function(e){return void 0===e&&(e=500),o.getFormattedLogs(e)},e.prototype.connect=function(){return o.connect()},e.prototype.disconnect=function(){return o.disconnect()},e.prototype.isEnded=function(){return o.apiStore.isEnded(!1)},e.prototype.isPaused=function(){return o.apiStore.isPaused()},e.prototype.isSeeking=function(){return o.apiStore.isSeeking()},e.prototype.isMuted=function(){return o.apiStore.isMuted()},e.prototype.mediaElement=function(){return o.videoStore.video},e.prototype.getQuality=function(){return o.apiStore.getQuality()},e.prototype.getCurrentTime=function(){return o.apiStore.getCurrentTime()},e.prototype.getDuration=function(e){return o.apiStore.getDuration(e)},e.prototype.getElements=function(){return o.apiStore.getElements()},e.prototype.getUserInfo=function(){return o.apiStore.getUserInfo()},e.prototype.getMediaInfo=function(){return o.apiStore.getMediaInfo()},e.prototype.getStates=function(){return o.apiStore.getStates()},e.prototype.getManifest=function(){return o.apiStore.getManifest()},e.prototype.getUserParams=function(){return o.apiStore.getUserParams()},e.prototype.setLoop=function(e){return o.apiStore.setLoop(e,r())},e.prototype.getLoop=function(){
return o.apiStore.getLoop()},e.prototype.setMuted=function(e){return o.apiStore.setMuted(e,r())},e.prototype.getMuted=function(){return o.apiStore.getMuted()},e.prototype.setVolume=function(e){return o.apiStore.setVolume(e,r())},e.prototype.getVolume=function(){return o.apiStore.getVolume()},e.prototype.setPlaybackRate=function(e){return o.apiStore.setPlaybackRate(e,r())},e.prototype.getPlaybackRate=function(){return o.apiStore.getPlaybackRate()},e.prototype.setMirror=function(e){return o.apiStore.setMirror(e,r())},e.prototype.getMirror=function(){return o.apiStore.getMirror()},e.prototype.setAspectRatio=function(e){return o.apiStore.setAspectRatio(e,r())},e.prototype.getAspectRatio=function(){return o.apiStore.getAspectRatio()},e.prototype.setLightOff=function(e){return o.apiStore.setLightOff(e,r())},e.prototype.getLightOff=function(){return o.apiStore.getLightOff()},e.prototype.setBlackGap=function(e){return o.apiStore.setBlackGap(e,r())},e.prototype.getBlackGap=function(){return o.apiStore.getBlackGap()},e.prototype.setAutoplay=function(e){return o.apiStore.setAutoplay(e,r())},e.prototype.getAutoplay=function(){return o.apiStore.getAutoplay()},e.prototype.setHandoff=function(e){return o.apiStore.setHandoff(e,r())},e.prototype.getHandoff=function(){return o.apiStore.getHandoff()},e.prototype.setPreferCodec=function(e){return o.apiStore.setPreferCodec(e)},e.prototype.getPreferCodec=function(){return o.apiStore.getPreferCodec()},e.prototype.play=function(e){return o.apiStore.play(r(e))},e.prototype.pause=function(e){return o.apiStore.pause(r(e))},e.prototype.seek=function(e,t){return o.apiStore.seek(e,r(t))},e.prototype.reload=function(e){return o.apiStore.reload(e,null,r())},e.prototype.goto=function(e,t,n){return o.apiStore.goto(e,t,n,r())},e.prototype.prev=function(e){return o.apiStore.prev(e,r())},e.prototype.next=function(e){return o.apiStore.next(e,r())},e.prototype.requestScreen=function(e,t){return o.apiStore.requestScreen(e,t,r())},e.prototype.requestQuality=function(e){return o.apiStore.requestQuality(e,r())},e.prototype.fetch=function(e){return o.apiStore.fetch(e)},e.prototype.reloadAccess=function(){return o.apiStore.reloadAccess()},Object.defineProperty(e.prototype,"toast",{get:function(){return{create:function(e,t){return o.toastStore.create(e,t)},update:function(e,t){return o.toastStore.update(e,t)},remove:function(e){return o.toastStore.remove(e)},resumeClock:function(e){return o.toastStore.resumeClock(e)},suspendClock:function(e){return o.toastStore.suspendClock(e)},getActions:function(){return o.toastStore.getActions()}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return{create:function(e){return o.tooltipStore.create(e)},update:function(e,t){return o.tooltipStore.update(e,t)},remove:function(e){return o.tooltipStore.remove(e)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hotspot",{get:function(){return{set:function(e){return o.hotspotStore.set(e)},get:function(e){return o.hotspotStore.get(e)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endPanel",{get:function(){return{open:function(){return o.endingStore.open()},close:function(){return o.endingStore.close()},isOpen:function(){return o.endingStore.state.opened}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharePanel",{get:function(){return{open:function(e){return o.shareStore.open(e)},close:function(){return o.shareStore.close()},isOpen:function(){return o.shareStore.state.opened}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interaction",{get:function(){return{restart:function(){return o.interactionStore.restart()},timeline:function(){return o.interactionStore.timeline()},isComplete:function(){return o.interactionStore.isComplete()},jump:function(e){return o.interactionStore.jump(e)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auxiliary",{get:function(){return{openTabList:function(){return o.auxiliaryStore.setState({isListSpread:!0})},closeTabList:function(){
return o.auxiliaryStore.setState({isListSpread:!1})},isTabListOpen:function(){return o.auxiliaryStore.state.isListSpread},enableUserSwitching:function(){return o.auxiliaryStore.setState({disableListSwitch:!1})},disableUserSwitching:function(){return o.auxiliaryStore.setState({disableListSwitch:!0})},isUserSwitchingDisabled:function(){return o.auxiliaryStore.state.disableListSwitch}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"danmaku",{get:function(){return{open:function(){return o.dmSettingStore.setState({dmSwitchOut:!0})},close:function(){return o.dmSettingStore.setState({dmSwitchOut:!1})},isOpen:function(){return o.sendStore.dmVisible},isDisabled:function(){return!!o.danmakuStore.state.state}}},enumerable:!1,configurable:!0}),e.prototype.readFrameAsBlob=function(e){return o.apiStore.readFrameAsBlob(e)},e.prototype.readFrameAsDataURL=function(e){return o.apiStore.readFrameAsDataURL(e)},e.prototype.canPlayType=function(e){return o.apiStore.canPlayType(e)},e.prototype.setState=function(e){return o.signalStore.setFromExternal(e)},e.prototype.core=function(){return null},e.prototype.getStageTiming=function(){return o.perfStore.getStageTiming()},e.prototype.downloadLogs=function(){Object(Pi.a)({text:o.getFormattedLogs(0),filename:"bilibili-player.log"})},e}()),o=new Oi(n,e,t);return n}Li.valueOf=function(){return Object(L.h)(ao)};var Ci,Ri=function(){function e(){window.nano&&window.nano.injector===this.injector?console.warn('The "nano" namespace already exist'):window.nano=this}return Object.defineProperty(e.prototype,"injector",{get:function(){return"nano"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return I},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookies",{get:function(){return T.a},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guid",{get:function(){return M},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefetch",{get:function(){return eo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return U},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchParams",{get:function(){return function(e){return void 0===e&&(e=self.location.search),k.a.parse(e,{ignoreQueryPrefix:!0,plainObjects:!0})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"createPlayer",{get:function(){return Li},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EventType",{get:function(){return Object(L.a)({},C.a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GroupKind",{get:function(){return Object(L.a)({},R.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ScreenKind",{get:function(){return Object(L.a)({},R.g)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ServiceKind",{get:function(){return Object(L.a)({},R.h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FetcherKind",{get:function(){return Object(L.a)({},R.b)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HandoffKind",{get:function(){return Object(L.a)({},R.d)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ChannelKind",{get:function(){return Object(L.a)({},R.a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"InternalKind",{get:function(){return Object(L.a)({},To)},enumerable:!1,configurable:!0}),e}();Object(n.b)("M01"),Object(n.c)("P01:NS2IH",null,"M01"),Object(n.b)("M02"),T.a.defaults.expires=365,T.a.defaults.path="/",T.a.defaults.domain=".bilibili.com","function"!=typeof self.CustomEvent&&(self.CustomEvent=function(e,t){var r=document.createEvent("CustomEvent"),n=Object.assign({bubbles:!1,cancelable:!1,detail:null},t);return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r}),j.a.interceptors.request.use((function(e){var t;return/^POST$/i.test(e.method)&&e.data&&!e.data.csrf&&Object.assign(e.data,{csrf:T.a.get("bili_jct")}),
"[object Object]"===((t=e.data)&&Object.prototype.toString.call(t))&&(e.data=k.a.stringify(e.data)),e})),Object(D.f)({enforceActions:"observed",computedRequiresReaction:!0,reactionRequiresObservable:!0}),new Ri,(Ci=Object(n.a)(V.t))&&(io.entryRequestStart=Ci.requestStart,io.entryResponseEnd=Ci.requestStart+Ci.duration,io.entryLoadTime=Ci)},function(e,t,r){"use strict";function n(e,t,r){return Math.min(Math.max(t,e),r)}r.d(t,"a",(function(){return n}))},,function(e){
e.exports=JSON.parse('{"v":"5.6.5","fr":30,"ip":0,"op":90,"w":24,"h":24,"nm":"loading - blue","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"圆点3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":10,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":20,"s":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":50,"s":[100]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[16.844,14.031,0],"ix":2},"a":{"a":0,"k":[-2.25,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.774,0],[0,-0.774],[-0.774,0],[0,0.774]],"o":[[-0.774,0],[0,0.774],[0.774,0],[0,-0.774]],"v":[[0,-1.402],[-1.402,0],[0,1.402],[1.402,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-2.285,2.715],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"圆点2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":5,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":15,"s":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":25,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":35,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":45,"s":[100]},{"t":55,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12.156,14.031,0],"ix":2},"a":{"a":0,"k":[-2.25,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.774,0],[0,-0.774],[-0.774,0],[0,0.774]],"o":[[-0.774,0],[0,0.774],[0.774,0],[0,-0.774]],"v":[[0,-1.402],[-1.402,0],[0,1.402],[1.402,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-2.285,2.715],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"圆点1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":10,"s":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":20,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[100]},{"t":50,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[7.625,14.031,0],"ix":2},"a":{"a":0,"k":[-2.25,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.774,0],[0,-0.774],[-0.774,0],[0,0.774]],"o":[[-0.774,0],[0,0.774],[0.774,0],[0,-0.774]],"v":[[0,-1.402],[-1.402,0],[0,1.402],[1.402,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-2.285,2.715],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12,12,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"天线左 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":0,"k":[7.391,1.8,0],"ix":2},"a":{"a":0,"k":[-0.298,-9.69,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":60,"s":[100,0,100]},{"t":63,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.408,0],[0,-0.408],[0,0],[-0.408,0],[0,0.408],[0,0]],"o":[[-0.408,0],[0,0],[0,0.408],[0.408,0],[0,0],[0,-0.408]],"v":[[0,-3.388],[-0.739,-2.649],[-0.739,2.649],[0,3.388],[0.739,2.649],[0.739,-2.649]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.26,-6.371],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":60,"op":90,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"天线右 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":45,"ix":10},"p":{"a":0,"k":[12.297,5.7,0],"ix":2},"a":{"a":0,"k":[-0.376,-4.176,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":80,"s":[100,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":84,"s":[100,110,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":87,"s":[100,95,100]},{"t":90,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.408,0],[0,-0.408],[0,0],[-0.408,0],[0,0.408],[0,0]],"o":[[-0.408,0],[0,0],[0,0.408],[0.408,0],[0,0],[0,-0.408]],"v":[[0,-3.388],[-0.739,-2.649],[-0.739,2.649],[0,3.388],[0.739,2.649],[0.739,-2.649]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.26,-6.371],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":60,"op":90,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"形状图层 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12,13.75,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[98.401,107.097,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"st","c":{"a":0,"k":[0.043137256056,0.639215707779,0.584313750267,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137256056,0.639215707779,0.584313750267,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[-0.191,0.233]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.631372570992,0.839215695858,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137256056,0.639215707779,0.584313750267,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 2","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[3.048,0],[0,-2.201],[0,-1.598],[-3.016,0],[-2.482,0],[0,2.092],[0,1.8],[3.055,0]],"o":[[0,0],[-3.048,0],[0,2.031],[0,2.087],[2.031,0],[3.054,0],[0,-1.875],[0,-2.15],[-1.844,0]],"v":[[-0.05,-6.758],[-6.13,-6.726],[-10.121,-2.585],[-10.137,3.078],[-6.162,6.816],[6.092,6.822],[10.27,3.073],[10.285,-2.635],[6.091,-6.718]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.631372570992,0.839215695858,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137256056,0.639215707779,0.584313750267,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":-60,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12,13.75,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[98.401,107.097,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"st","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137254902,0.639215686275,0.58431372549,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[-0.191,0.233]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137254902,0.639215686275,0.58431372549,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 2","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[3.048,0],[0,-2.201],[0,-1.598],[-3.016,0],[-2.482,0],[0,2.092],[0,1.8],[3.055,0]],"o":[[0,0],[-3.048,0],[0,2.031],[0,2.087],[2.031,0],[3.054,0],[0,-1.875],[0,-2.15],[-1.844,0]],"v":[[-0.05,-6.758],[-6.13,-6.726],[-10.121,-2.585],[-10.137,3.078],[-6.162,6.816],[6.092,6.822],[10.27,3.073],[10.285,-2.635],[6.091,-6.718]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.547],"y":[1]},"o":{"x":[0.453],"y":[0]},"t":63,"s":[0]},{"t":80,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.043137254902,0.639215686275,0.58431372549,1],"ix":4},"o":{"a":0,"k":0,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":60,"op":90,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":0,"nm":"点点点 - blue","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12,12,0],"ix":2},"a":{"a":0,"k":[12,12,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":24,"h":24,"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"天线左","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":50,"s":[100]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":0,"k":[7.391,1.8,0],"ix":2},"a":{"a":0,"k":[-0.298,-9.69,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.408,0],[0,-0.408],[0,0],[-0.408,0],[0,0.408],[0,0]],"o":[[-0.408,0],[0,0],[0,0.408],[0.408,0],[0,0],[0,-0.408]],"v":[[0,-3.388],[-0.739,-2.649],[-0.739,2.649],[0,3.388],[0.739,2.649],[0.739,-2.649]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.26,-6.371],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"天线右","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":50,"s":[100]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":45,"ix":10},"p":{"a":0,"k":[12.297,5.7,0],"ix":2},"a":{"a":0,"k":[-0.376,-4.176,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.408,0],[0,-0.408],[0,0],[-0.408,0],[0,0.408],[0,0]],"o":[[-0.408,0],[0,0],[0,0.408],[0.408,0],[0,0],[0,-0.408]],"v":[[0,-3.388],[-0.739,-2.649],[-0.739,2.649],[0,3.388],[0.739,2.649],[0.739,-2.649]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.270588248968,0.270588248968,0.270588248968,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.63137254902,0.839215686275,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.26,-6.371],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"bm":0}],"markers":[]}')
},,function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a}));var n=r(0);function o(e,t){return new Map(Object(n.h)(e.entries()).filter((function(e){var r=Object(n.g)(e,2),o=r[0];r[1];return t.has(o)})))}function i(e,t){return new Map(Object(n.h)(e.entries()).filter((function(e){var r=Object(n.g)(e,2),o=r[0];r[1];return!t.has(o)})))}var a=function(){function e(e){this.flag=0,this.set(e)}return e.prototype.get=function(){return this.flag},e.prototype.set=function(e){null!=e&&(this.flag=e)},e.prototype.enable=function(e){null!=e&&(this.flag|=e)},e.prototype.disable=function(e){null!=e&&(this.flag&=~e)},e.prototype.isAllow=function(e){return(this.flag&e)===e},e.prototype.isOnlyAllow=function(e){return this.flag===e},e.prototype.isNotAllow=function(e){return 0==(this.flag&e)},e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){function e(){var e=this;this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r}))}return e.prototype.then=function(e,t){return this.promise.then(e,t)},e.prototype.catch=function(e){return this.promise.catch(e)},e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c}));var n=r(0),o=r(159),i="nano_perf"===Object(o.a)("parser"),a=Object.create(null);function s(e){var t,r,o=function(){var e,t,r=[];if(null==self.performance)return r;var o=performance.getEntriesByType("resource");if(null==o||o.length<=0)return r;try{for(var i=Object(n.i)(o),a=i.next();!a.done;a=i.next()){var s=a.value,u=s.redirectEnd-s.redirectStart,c=s.domainLookupEnd-s.domainLookupStart,l=s.connectEnd-s.connectStart,p=s.secureConnectionStart>0?s.connectEnd-s.secureConnectionStart:0,d=s.responseEnd-s.responseStart,f=s.fetchStart>0?s.responseEnd-s.fetchStart:0,h=(s.requestStart>0&&(s.responseEnd,s.requestStart),s.startTime>0?s.responseEnd-s.startTime:0);r.push({name:s.name,duration:s.duration||h||f,requestStart:s.startTime||s.fetchStart,entryType:s.entryType,initiatorType:s.initiatorType,nextHopProtocol:s.nextHopProtocol,decodedBodySize:s.decodedBodySize,transferSize:s.transferSize,redirectTime:u,dnsTime:c,tcpTime:l,sslTime:p,responseTime:d})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}();try{for(var i=Object(n.i)(o),a=i.next();!a.done;a=i.next()){var s=a.value;if(e.test(s.name))return s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return null}function u(e){a[e]||(a[e]=1,i&&function(e){try{"function"==typeof performance.mark&&performance.mark(e)}catch(e){console.warn(e)}}(e))}function c(e,t,r){a[e]||(a[e]=1,i&&function(e,t,r){try{"function"==typeof performance.measure&&performance.measure(e,t,r)}catch(e){console.warn(e)}}(e,t,r))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r(160);function i(e){for(var t,r,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(e&&i.length){Object(o.a)(e);try{for(var s=Object(n.i)(i),u=s.next();!u.done;u=s.next()){var c=u.value;"string"==typeof c?e.appendChild(document.createTextNode(c)):e.appendChild(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}}},function(e,t,r){"use strict";function n(e){for(var t=document.createDocumentFragment(),r=(new DOMParser).parseFromString(e,"text/html");r.body.lastChild;)t.insertBefore(document.adoptNode(r.body.lastChild),t.firstChild||null);return t}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){e&&(e.style.display="none")}))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){e&&(e.style.display="")}))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n,o;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),function(e){
e.Screen_Play="screen_play",e.Screen_Pause="screen_pause",e.Double_Fullscreen="double_fullscreen"}(n||(n={})),function(e){e.Enter="enter",e.Quit="quit",e.Ended="ended",e.Stage="stage",e.Media_Canplay="media_canplay",e.Load_Start="load_start",e.Load_End="load_end",e.Load_End_Null="load_end_null",e.Load_End_Head="load_end_head",e.Load_End_Hack="load_end_hack",e.Load_End_Seek="load_end_seek",e.Media_Gap="media_gap",e.Lag_Load_Start="lag_load_start",e.Lag_Load_End="lag_load_end",e.Kernel_Initial="kernel_initial",e.Http_Connection="http_connection",e.First_Audio_Frame_Decoded="first_audio_frame_decoded",e.First_Video_Frame_Decoded="first_video_frame_decoded",e.Auto_Switch_Requested="auto_switch_requested",e.Auto_Switch_Rendered="auto_switch_rendered",e.Quota_Exceeded="quota_exceeded",e.Buffering_Optimization="buffering_optimization",e.Dash_Warning="dash_warning",e.Abnormal_Segment_Length="abnormal_segment_length",e.Abnormal_Segment_Length_Error="abnormal_segment_length_error",e.Range_Early_EOF="range_early_eof",e.Flv_Cts_Warning="flv_cts_warning",e.Flv_Data_Abnormal="flv_data_abnormal",e.Playback_Error="playback_error",e.Playback_Error_Code="playback_error_code",e.Playback_Error_Info="playback_error_info",e.Playback_Retry_Done="playback_retry_done",e.Playback_Retry_Fail="playback_retry_fail",e.API_PlayUrl_Done="api_playurl_done",e.API_PlayUrl_Fail="api_playurl_fail"}(o||(o={}))},function(e,t,r){"use strict";var n=r(167),o=r(12);t.a=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Object(o.a)(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),Object(n.a)(e,t,{leading:i,maxWait:t,trailing:a})}},function(e,t,r){"use strict";function n(e){var t=(new DOMParser).parseFromString(e,"text/html");return document.adoptNode(t.body.firstChild)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=function(){function e(){this.zone=this.atomicBufferZone}return Object.defineProperty(e.prototype,"atomicBufferZone",{get:function(){return{paused:!0,currentTime:0,previousTimeStamp:0,currentTimeStamp:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.zone.paused},enumerable:!1,configurable:!0}),e.prototype.getCurrentTime=function(){return this.tick(),this.zone.currentTime},e.prototype.getCurrentTimeStamp=function(){return self.performance&&performance.now?performance.now():Date.now()},e.prototype.tick=function(){if(this.zone.paused)return this.zone.currentTimeStamp=this.zone.previousTimeStamp=this.getCurrentTimeStamp(),!1;var e=this.getCurrentTimeStamp();return e-this.zone.currentTimeStamp>0&&(this.zone.previousTimeStamp=this.zone.currentTimeStamp,this.zone.currentTimeStamp=e,this.zone.currentTimeStamp&&this.zone.previousTimeStamp&&(this.zone.currentTime+=this.zone.currentTimeStamp-this.zone.previousTimeStamp)),!0},e.prototype.play=function(){return!!this.zone.paused&&(this.tick(),this.zone.paused=!1,!0)},e.prototype.pause=function(){return!this.zone.paused&&(this.tick(),this.zone.paused=!0,!0)},e.prototype.reset=function(e){return e&&(this.zone.paused||this.pause()),!!this.zone.paused&&(this.zone=this.atomicBufferZone,!0)},e}(),i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nid=0,t.previousTime=0,t.record=new Map,t}Object(n.d)(t,e),t.prototype.start=function(){return this.play()},t.prototype.stop=function(){return this.pause()},t.prototype.tape=function(e){if(this.paused)return!1;var t=e||"计次 "+ ++this.nid,r=this.getCurrentTime();return this.record.set(t,r-this.previousTime),this.previousTime=r,!0},t.prototype.reset=function(e){return void 0===e&&(e=!1),e&&(this.paused||(this.tape("FORCE_RESET"),this.stop())),!!this.paused&&(this.record.clear(),!0)}}(o),function(e){function t(t,r,n){void 0===n&&(n=100);var o=e.call(this)||this;if(o.callback=t,o.duration=r,o.interval=n,o.timer=null,"number"!=typeof r||"number"!=typeof n)throw new Error("duration/interval MUST be a number")
;if(!(r>0&&n>0))throw new Error("duration/interval MUST be a positive number");return o}return Object(n.d)(t,e),Object.defineProperty(t.prototype,"currentTime",{get:function(){return Math.min(Math.max(0,this.getCurrentTime()),this.duration)},set:function(e){this.zone.currentTime=Math.min(Math.max(0,e),this.duration)},enumerable:!1,configurable:!0}),t.prototype.startInterval=function(){var t=this;e.prototype.play.call(this),this.timer=self.setInterval((function(){var e=t.getCurrentTime();t.paused||t.callback(t.duration,e),t.duration<=e&&t.abort()}),this.interval)},t.prototype.stopInterval=function(){e.prototype.reset.call(this,!0),self.clearInterval(this.timer),this.timer=null},t.prototype.suspend=function(){return!!this.timer&&(!this.paused&&(e.prototype.pause.call(this),!0))},t.prototype.resume=function(){return this.timer?!!this.paused&&(e.prototype.play.call(this),!0):(this.startInterval(),!0)},t.prototype.abort=function(){return!!this.timer&&(this.stopInterval(),!0)},t}(o))},function(e,t,r){"use strict";function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n="",o=0;o<t.length;o++){var i=t[o],a="";if(null!=i)switch(!0){case"string"==typeof i:a=i;break;case"[object Object]"===Object.prototype.toString.call(i):try{a=JSON.stringify(i)}catch(e){0}break;case"string"==typeof i.message:a=i.message;break;default:try{a=i.toString()}catch(e){0}}n+=e[o],n+=a}return n+=e[e.length-1]}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){function e(){}return Object.defineProperty(e,"detail",{get:function(){return[{value:0,name:"自动"},{value:15,name:"360P 流畅"},{value:16,name:"360P 流畅"},{value:32,name:"480P 清晰"},{value:48,name:"720P 高清"},{value:64,name:"720P 高清"},{value:74,name:"720P 高清"},{value:80,name:"1080P 高清"},{value:112,name:"1080P 高码率",prime:!0},{value:116,name:"1080P 60帧",prime:!0},{value:120,name:"4K 超清",prime:!0},{value:125,name:"HDR 真彩",prime:!0,nocache:!0}]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"mapping",{get:function(){return e.detail.reduce((function(e,t){return e[t.value]=t,e}),{})},enumerable:!1,configurable:!0}),e.normalize=function(e){return{1:16,2:64,3:80,4:112,48:64}[e]||+e},e.isSuperQuality=function(t){var r=e.mapping;return!(!r[t]||!r[t].prime)},e.gtnLogin=32,e.gtnBigWidth=80,e.gtnMseSupported=64,e}()},function(e,t,r){"use strict";function n(){return r.e(2).then(r.t.bind(null,272,7))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0);function o(e){var t={};return"string"==typeof e&&e.split(";").forEach((function(e){var r=Object(n.g)(e.split(":"),2),o=r[0],i=r[1];o&&(t[o]=i)})),t}},function(e,t,r){"use strict";function n(e){return"#"+("00000"+e.toString(16)).slice(-6)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(8),i=r(168),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tag="[HttpStatsLog]",t.url="//data.bilibili.com/log/web",t}return Object(n.d)(t,e),t.prototype.sendBeacon=function(e){self.navigator&&"function"==typeof self.navigator.sendBeacon?self.navigator.sendBeacon(this.getSerializedUrl(e)):this.r(e).catch(i.a)},t.prototype.r=function(e){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(t){return[2,this.request({url:this.getSerializedUrl(e),withCredentials:!0})]}))}))},t.prototype.getSerializedUrl=function(e){if("string"==typeof e)return this.url+"?"+e;var t=[e.ctime,e.fid,e.ver,e.eventId,e.eventParam,e.displayId,e.seasonId,e.episodeId,e.aid,e.cid,e.part,e.currentTime,e.readyState,e.statue,e.handover,e.sourceType,e.quality,e.realtime,e.srcUrl,e.abParam,e.abVer,e.label].join("|");return this.url+"?"+e.logId+Date.now()+t},t}(o.a)},function(e,t,r){"use strict";var n;function o(e,t){return"_"===e||"$"===e||(!!/^[A-Z]$/i.test(e)||!(t||!/^[0-9]$/.test(e)))}r.d(t,"a",(function(){return s})),function(e){e.Name="Name",e.Number="Number",e.End="End",e.Equal="Equal",e.NotEqual="NotEqual",e.GreaterEqual="GreaterEqual",
e.LessEqual="LessEqual",e.Print="Print",e.Plus="+",e.Subtract="-",e.Multiply="*",e.Divide="/",e.And="&",e.Greater=">",e.Less="<",e.Or="|",e.Not="!",e.LBracket="(",e.RBracket=")",e.Assign="="}(n||(n={}));var i=function(){function e(e){this.express=e,this.index=-1,this.current={kind:n.Print}}return Object.defineProperty(e.prototype,"kind",{get:function(){return this.current.kind},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"str",{get:function(){return this.current.str},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"num",{get:function(){return this.current.num},enumerable:!1,configurable:!0}),e.prototype.putforward=function(){return this.char=this.express[++this.index],this.char},e.prototype.putback=function(){return this.char=this.express[--this.index],this.char},e.prototype.getNext=function(){do{if(this.putforward(),!this.char)return this.current={kind:n.End}}while("\n"!==this.char&&(e=this.char,t=void 0,(t=e.charCodeAt(0))>8&&t<14||32===t));var e,t;switch(this.char){case";":case"\n":return this.current={kind:n.Print};case"*":case"/":case"+":case"-":case"(":case")":return this.current={kind:this.char};case">":return"="===this.putforward()?this.current={kind:n.GreaterEqual}:(this.putback(),this.current={kind:n.Greater});case"<":return"="===this.putforward()?this.current={kind:n.LessEqual}:(this.putback(),this.current={kind:n.Less});case"=":return"="===this.putforward()?this.current={kind:n.Equal}:(this.putback(),this.current={kind:n.Assign});case"&":return"&"===this.putforward()?this.current={kind:n.And}:(this.putback(),Error("bad token"),this.current={kind:n.Print});case"|":return"|"===this.putforward()?this.current={kind:n.Or}:(this.putback(),Error("bad token"),this.current={kind:n.Print});case"!":return"="===this.putforward()?this.current={kind:n.NotEqual}:(this.putback(),this.current={kind:n.Not});case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":this.current.kind=n.Number;for(var r=this.char;this.putforward()&&/^[0-9.]$/.test(this.char);)r+=this.char;return this.current.num=Number(r),this.putback(),this.current;default:if(o(this.char,!0)){for(this.current.kind=n.Name,this.current.str=this.char;this.putforward()&&o(this.char,!1);)this.current.str+=this.char;return this.putback(),this.current}return Error("bad token"),this.current={kind:n.Print}}},e}(),a=function(){function e(e){this.table=null!=e?e:{}}return e.prototype.logicalExpress=function(e){for(var t=this.comparisonExpress(e);;)switch(this.token.kind){case n.And:t=0!==this.comparisonExpress(!0)&&0!==t?1:0;break;case n.Or:t=0!==this.comparisonExpress(!0)||0!==t?1:0;break;default:return t}},e.prototype.comparisonExpress=function(e){for(var t=this.numberExpress(e);;)switch(this.token.kind){case n.Equal:t=t===this.numberExpress(!0)?1:0;break;case n.NotEqual:t=t!==this.numberExpress(!0)?1:0;break;case n.Greater:t=t>this.numberExpress(!0)?1:0;break;case n.GreaterEqual:t=t>=this.numberExpress(!0)?1:0;break;case n.Less:t=t<this.numberExpress(!0)?1:0;break;case n.LessEqual:t=t<=this.numberExpress(!0)?1:0;break;default:return t}},e.prototype.numberExpress=function(e){for(var t=this.term(e);;)switch(this.token.kind){case n.Plus:t+=this.term(!0);break;case n.Subtract:t-=this.term(!0);break;default:return t}},e.prototype.term=function(e){for(var t,r=this.prim(e);;)switch(this.token.kind){case n.Multiply:r*=this.prim(!0);break;case n.Divide:if(!(t=this.prim(!0)))return console.error("divide by 0"),1/0;r/=t;break;default:return r}},e.prototype.prim=function(e){switch(e&&this.token.getNext(),this.token.kind){case n.Number:var t=this.token.num;return this.token.getNext(),t;case n.Name:this.table||(this.table={});t=this.token.str;return this.token.getNext().kind===n.Assign?this.table[t]=this.logicalExpress(!0):void 0===this.table[t]&&(this.table[t]=0),this.table[t];case n.Plus:return+this.prim(!0);case n.Subtract:return-this.prim(!0);case n.Not:return 0===this.prim(!0)?1:0;case n.LBracket:var r=this.logicalExpress(!0);return this.token.getNext(),r;default:return console.error("primary expected"),1/0}},
e.prototype.eval=function(e){this.token=new i(e);for(var t=0;this.token.getNext(),this.token.kind!==n.End;)if(this.token.kind!==n.Print){t=this.logicalExpress(!1);var r=this.token.current.kind;if(r!==n.Print&&r!==n.End)return Error("unexpected char")}return t},e}();function s(e,t){for(var r=new a(e),n="",o="",i=!1,s=t[0],u=0;s;)i?"`"===s?(i=!1,n+=r.eval(o)):o+=s:"`"===s?(i=!0,o=""):n+="\\"===s?s=t[++u]:s,s=t[++u];return n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0);function o(e){var t=Object(n.a)({text:"",mimeType:"text/plain;charset=utf-8",filename:"text.txt",timeout:5e3},e),r=Array.isArray(t.text)?t.text:[t.text],o=new Blob(r,{type:t.mimeType}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=t.filename,i.target="_blank",i.click(),self.setTimeout((function(){URL.revokeObjectURL(i.href)}),t.timeout)}}])}));